"use strict";var K=Object.defineProperty;var o=(h,f)=>K(h,"name",{value:f,configurable:!0});Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});;/* empty css                                                                                                                                            */;/* empty css                                                                                                                                            */;/* empty css                                                                                                                                                */const t=require("vue"),D=,/* empty css                                */N=,/* empty css               */_=,/* empty css                         */z=,/* empty css                                                                                                                                               */R=,/* empty css                                                                                                                                           */H=t.defineComponent({name:"LSTree"}),I=t.defineComponent({...H,props:N.lsTreeProps,emits:N.emitNames,setup(h,{expose:f,emit:b}){const y=b,d=h,C=D.useNamespace("tree"),x=C.b(),S=C.b("box"),s=t.ref(),i=t.ref(!1),u=t.ref(!1),p=t.ref([]),E=t.computed(()=>d.height?{maxHeight:d.height}:{}),m=t.computed(()=>d.treeData);t.watch(()=>m.value,async e=>{e&&e.length>0&&(i.value=!1,u.value=!1,p.value=q(),w(),await t.nextTick(),s.value.filter(),v(),B())},{immediate:!0,deep:!0});function q(){return m.value.reduce((e,l)=>(e.push(l.id),l.children&&e.push(...k(l.children)),e),[])}o(q,"getAllNodeKeys");function k(e){return e.reduce((l,r)=>(l.push(r.id),r.children&&l.push(...k(r.children)),l),[])}o(k,"getAllChildKeys");async function w(){var l,r;await t.nextTick();const e=document.getElementsByClassName("hide-child-node");for(let a=0;a<e.length;a++){const n=e[a].parentNode;n.style.opacity=0,n.style.width=0,n.style.height=0,(r=(l=n==null?void 0:n.parentNode)==null?void 0:l.parentNode)!=null&&r.previousElementSibling&&(n.parentNode.parentNode.previousElementSibling.querySelector(".el-icon").style.opacity=0,n.parentNode.parentNode.previousElementSibling.querySelector(".el-icon").style.visibility="hidden")}}o(w,"updateHideStyle");function T(){u.value=!1,s.value&&s.value.setCheckedKeys(i.value?p.value:[])}o(T,"handleCheckAllChange");function A(e,l){const{permission:r}=l||{};if(r!=null&&r.startsWith(d.hideNodePrefix))return!1;if(!e)return!0;const{label:a}=d.dataProps||{};return a?l[a].indexOf(e)!==-1:!0}o(A,"filterNode");function P(e,l){s.value.setCheckedNodes(_.excutePowerTree(m.value,e,l)),y("handleCheck",e,l)}o(P,"handleCheck");function V(e,l){v(),y("handleChekChange",e,l)}o(V,"handleChekChange");function v(){const e=s.value.getCheckedNodes(!1,!0);let l=[];e.forEach(r=>{const{id:a,parentId:n}=r;l.push(a||n)}),l.length>0?l.length===p.value.length?(i.value=!0,u.value=!1):(i.value=!1,u.value=!0):(i.value=!1,u.value=!1)}o(v,"updateAllCheckStatus");function B(){var e,l;if(d.direction=="h"){const r=(l=(e=s.value)==null?void 0:e.el$)==null?void 0:l.getElementsByClassName("el-tree-node");for(let a=0;a<r.length;a++){const n=r[a];if(n){const c=n.querySelector(".el-tree-node__content .el-icon");c&&getComputedStyle(c).visibility==="hidden"&&(n.style.display="inline-block",n.style.verticalAlign="middle")}}}}return o(B,"updateStyle"),f({lsTreeRef:s}),(e,l)=>{const r=z.ElCheckbox,a=R.ElTree;return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(t.unref(x))},[e.isCheckAll?(t.openBlock(),t.createBlock(r,{key:0,modelValue:t.unref(i),"onUpdate:modelValue":l[0]||(l[0]=n=>t.isRef(i)?i.value=n:null),indeterminate:t.unref(u),onChange:T},{default:t.withCtx(()=>l[1]||(l[1]=[t.createTextVNode(" 全选 ")])),_:1},8,["modelValue","indeterminate"])):t.createCommentVNode("",!0),t.createVNode(a,{ref_key:"lsTreeRef",ref:s,"show-checkbox":e.showCheckbox,"default-expand-all":e.defaultExpandAll,"node-key":e.nodeKey,"check-strictly":e.isCheckStrictly,style:t.normalizeStyle(t.unref(E)),class:t.normalizeClass([t.unref(S),!e.isExpand&&"expand-disabled"]),data:e.treeData,props:e.dataProps,"default-checked-keys":e.defaultCheckedKeys,"expand-on-click-node":e.isExpand,"filter-node-method":A,onCheck:P,onCheckChange:V},{default:t.withCtx(({node:n,data:c})=>{var g;return[t.createElementVNode("span",{class:t.normalizeClass(["custom-tree-node",{"hide-child-node":e.hideNodePrefix&&((g=c.permission)==null?void 0:g.startsWith(e.hideNodePrefix))}])},[t.createElementVNode("span",null,t.toDisplayString(n.label),1)],2)]}),_:1},8,["show-checkbox","default-expand-all","node-key","check-strictly","style","class","data","props","default-checked-keys","expand-on-click-node"])],2)}}});exports.default=I;
