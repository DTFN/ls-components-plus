"use strict";var m=Object.defineProperty;var c=(e,o)=>m(e,"name",{value:o,configurable:!0});Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const f=require("element-plus"),g=,/* empty css                      */t=require("vue");;/* empty css                                                                                                                                            */;/* empty css                                                                                                                                             */;/* empty css                                                                                                                                               */const z=;/* empty css                                                                                                                                              */function q(e,o){const{zoomSize:s}=t.toRefs(e),a=t.reactive({zoomSize:s.value,source:""}),i=g.useNamespace("preview").b(),r=t.ref();let n=null;t.watch(()=>o==null?void 0:o.value,u=>{u&&l()},{immediate:!0,deep:!0}),t.watch(()=>e.source,u=>{a.source=u,u&&clearTimeout(n)},{immediate:!0,deep:!0});function l(){e.needLoading&&(r.value=f.ElLoading.service(e.loadingOption)),a.zoomSize=e.zoomSize,a.hasDownload=e.hasDownload,a.hasDownload&&(a.downloadData=e.downloadData),n=setTimeout(()=>{e.source||(z.ElMessage.error("加载超时，请检查网络后重试！"),d(),o.value=!1),clearTimeout(n)},2e4)}c(l,"openLoading");const d=c(()=>{n&&clearTimeout(n),e.needLoading&&r.value&&r.value.close()},"closeLoading");return t.onBeforeMount(()=>{o.value&&l()}),t.onBeforeUnmount(()=>{d()}),{previewVisible:o,comClass:i,defAttrs:a,closeLoading:d}}c(q,"usePreviewHook");exports.default=q;
