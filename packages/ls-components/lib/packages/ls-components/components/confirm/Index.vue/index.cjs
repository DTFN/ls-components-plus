"use strict";var h=Object.defineProperty;var c=(n,r)=>h(n,"name",{value:r,configurable:!0});Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const t=require("vue"),y=require("../../_hooks/useNamespace/index.cjs"),M=require("element-plus"),f=require("../types/index.cjs"),_={style:{display:"none"}},v=t.defineComponent({name:"LSConfirm"}),x=t.defineComponent({...v,props:t.mergeModels(f.lsConfirmProps,{modelValue:{type:Boolean},modelModifiers:{}}),emits:t.mergeModels(f.emitNames,["update:modelValue"]),setup(n,{emit:r}){const d=y.useNamespace("confirm").b(),e=n,i=r,s=t.useModel(n,"modelValue"),u=t.ref();t.watch(()=>s==null?void 0:s.value,o=>{o&&C()},{immediate:!0,deep:!0});const p=t.computed(()=>e.title),a=t.computed(()=>e.message);t.watch(()=>a.value,o=>{s!=null&&s.value&&o&&g()},{deep:!0});async function g(){const o=document.querySelector(".ls-confirm-box .el-message-box__message p");o&&(e.useHtml?o.innerHTML=a.value:o.textContent=a.value)}c(g,"updateMessage");function C(){M.ElMessageBox({title:p,message:a.value,confirmButtonText:e.confirmBtnTxt,cancelButtonText:e.cancelBtnTxt,type:e.type,center:e.center,draggable:e.draggable,dangerouslyUseHTMLString:e.useHtml,showCancelButton:e.showCancelBtn,showConfirmButton:e.showConfirmBtn,showClose:e.showClose,customClass:`${d} ${e.customClass} ls-confirm-box`,closeOnClickModal:e.closeOnClickModal,closeOnPressEscape:e.closeOnPressEscape,appendTo:e.appendTo,beforeClose:c(async(o,l,m)=>{if(o==="confirm"){if(l.confirmButtonLoading=!0,e.requestApi&&typeof e.requestApi=="function")try{u.value=await e.requestApi(e.requestParams)}catch(B){u.value=B}l.confirmButtonLoading=!1,m()}else l.confirmButtonLoading||m()},"beforeClose")}).then(()=>{s.value=!1,i("onConfirm",u)}).catch(()=>{s.value=!1,i("onCancel")})}return c(C,"initBox"),(o,l)=>(t.openBlock(),t.createElementBlock("div",_))}});exports.default=x;
