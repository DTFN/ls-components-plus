"use strict";var D=Object.defineProperty;var n=(p,m)=>D(p,"name",{value:m,configurable:!0});Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});;/* empty css                                                                                                                                            */;/* empty css                                                                                                                                                       */;/* empty css                                                                                                                                                 */const e=require("vue"),T=,/* empty css                                */$=,/* empty css                    */E=,/* empty css                          */I=,/* empty css                                                                                                                                                */M=,/* empty css                                                                                                                                                      */F={class:"opt-wrap"},j={key:0,class:"page-wrap"},O={class:"num-wrap"},A={key:1,class:"size-wrap"},G={class:"num-wrap"},H={class:"pdf-content"},J={key:1,class:"infinite-list-wrapper",style:{overflow:"auto"}},K=["infinite-scroll-disabled"],Q=e.defineComponent({name:"LSPdf"}),R=e.defineComponent({...Q,props:{source:{},onClose:{},showSize:{type:Boolean,default:!0}},emits:["annotation","highlight","loaded","textLoaded","annotationLoaded","xfaLoaded","loadComplete","loadError","update:source"],setup(p,{emit:m}){const v=T.useNamespace("pdf"),B=v.b(),_=e.ref(void 0),l=e.ref(1),a=e.ref(0),t=e.ref(1),i=e.ref(!0),C=e.ref(!1),c=p,k=m;e.watch(()=>c.source,()=>{b()},{immediate:!0,deep:!0});const V=e.computed(()=>i.value?"取消分页":"分页展示");async function b(){if(c.source)try{const{pdf:r,processLoadingTask:o,pages:s}=$.usePDF(c.source,{onError:d});await o(c.source),_.value=r.value,a.value=s.value,g()}catch{d()}finally{C.value=!0}}n(b,"initPdf");const h=n(()=>{C.value=!1,c.onClose&&c.onClose(),k("update:source")},"closeFunc");function w(){l.value>1&&l.value--}n(w,"prevPdf");function P(){l.value<a.value&&l.value++}n(P,"nextPdf");function N(r){r===0?t.value=t.value>.25?t.value-.25:t.value:t.value=t.value<2?t.value+.25:t.value}n(N,"scalePdf");const y=e.ref(!1),u=e.ref(0),S=n(()=>{if(u.value>=a.value){y.value=!0;return}u.value++},"load");function L(){i.value=!i.value,i.value||(y.value=!1,u.value=a.value>10?10:a.value)}n(L,"changePagition");function g(){k("loadComplete")}n(g,"loadComplete");function d(){k("loadError")}return n(d,"loadError"),(r,o)=>{const s=e.resolveComponent("LSButton"),x=e.resolveComponent("LSIcon"),z=I.ElScrollbar,q=M.ElInfiniteScroll;return e.unref(C)?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(e.unref(B))},[e.createElementVNode("div",F,[e.unref(i)?(e.openBlock(),e.createElementBlock("div",j,[e.createVNode(s,{type:"primary",size:"small",disabled:e.unref(l)==1,onClick:w},{default:e.withCtx(()=>o[2]||(o[2]=[e.createTextVNode("上一页")])),_:1},8,["disabled"]),e.createElementVNode("span",O,e.toDisplayString(e.unref(l))+" / "+e.toDisplayString(e.unref(a)),1),e.createVNode(s,{type:"primary",size:"small",disabled:e.unref(l)==e.unref(a),onClick:P},{default:e.withCtx(()=>o[3]||(o[3]=[e.createTextVNode("下一页")])),_:1},8,["disabled"])])):e.createCommentVNode("",!0),r.showSize?(e.openBlock(),e.createElementBlock("div",A,[e.createVNode(s,{type:"primary",icon:"Minus",size:"small",disabled:e.unref(t)==.25,onClick:o[0]||(o[0]=f=>N(0))},null,8,["disabled"]),e.createElementVNode("span",G,e.toDisplayString(e.unref(t)*100)+"%",1),e.createVNode(s,{type:"primary",icon:"Plus",size:"small",disabled:e.unref(t)==2,onClick:o[1]||(o[1]=f=>N(1))},null,8,["disabled"])])):e.createCommentVNode("",!0),e.createVNode(s,{type:"primary",size:"small",onClick:L},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(V)),1)]),_:1}),e.createElementVNode("span",{class:e.normalizeClass([e.unref(v).e("btn"),e.unref(v).e("close")]),onClick:h},[e.createVNode(x,{name:"Close",size:26})],2)]),e.createElementVNode("div",H,[e.unref(i)?(e.openBlock(),e.createBlock(E.default,e.mergeProps({key:0},r.$attrs,{pdf:e.unref(_),page:e.unref(l),scale:e.unref(t),onLoadComplete:g,onLoadError:d}),null,16,["pdf","page","scale"])):(e.openBlock(),e.createElementBlock("div",J,[e.createVNode(z,{height:"calc(100vh - 48px)"},{default:e.withCtx(()=>[e.withDirectives((e.openBlock(),e.createElementBlock("ul",{"infinite-scroll-disabled":e.unref(y),class:"infinite-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(u),f=>(e.openBlock(),e.createElementBlock("li",{key:f,class:"infinite-list-item"},[e.createVNode(E.default,e.mergeProps({ref_for:!0},r.$attrs,{pdf:e.unref(_),page:f,scale:e.unref(t),onLoadComplete:g,onLoadError:d}),null,16,["pdf","page","scale"])]))),128))],8,K)),[[q,S]])]),_:1})]))])],2)):e.createCommentVNode("",!0)}}});exports.default=R;
