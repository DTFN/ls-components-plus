"use strict";var k=Object.defineProperty;var a=(u,i)=>k(u,"name",{value:i,configurable:!0});Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),M=,/* empty css                                */P=,/* empty css               */y=require("element-plus");;/* empty css                                                                                                                                            */;/* empty css                                                                                                                                             */;/* empty css                                                                                                                                               */const L=,/* empty css                                                                                                                                              */B=,/* empty css                                                                                       */E=e.defineComponent({name:"LSPreview",inheritAttrs:!1,__name:"Index",props:e.mergeModels(P.lsPreviewProp,{modelValue:{type:Boolean},modelModifiers:{}}),emits:e.mergeModels(["loadComplete","loadError"],["update:modelValue"]),setup(u,{emit:i}){const d=i,o=u,{type:r,zoomSize:g}=e.toRefs(o),n=e.useModel(u,"modelValue"),p=e.reactive({zoomSize:g,source:""}),C=M.useNamespace("preview").b(),s=e.shallowRef({image:null,docx:null,xlsx:null,pdf:null}),m=e.ref(),f=e.computed(()=>(r==null?void 0:r.value)&&s.value[r==null?void 0:r.value]),q=e.ref("文件加载失败，请检查文件是否已损坏！");let l=null;e.watch(()=>n==null?void 0:n.value,t=>{t&&v()},{immediate:!0,deep:!0}),e.watch(()=>o.source,t=>{p.source=t,t&&clearTimeout(l)},{immediate:!0,deep:!0});function v(){switch(o.needLoading&&(m.value=y.ElLoading.service(o.loadingOption)),o.type){case"image":s.value.image=e.defineAsyncComponent(()=>Promise.resolve().then(()=>require("../components/Image.vue/index.cjs")));break;case"docx":s.value.docx=e.defineAsyncComponent(()=>Promise.resolve().then(()=>require("../components/Docx.vue/index.cjs")));break;case"xlsx":s.value.xlsx=e.defineAsyncComponent(()=>Promise.resolve().then(()=>require("../components/Xlsx.vue/index.cjs")));break;case"pdf":s.value.pdf=e.defineAsyncComponent(()=>Promise.resolve().then(()=>require("../components/Pdf.vue/index.cjs")));break}l=setTimeout(()=>{o.source||(L.ElMessage.error("加载超时，请检查网络后重试！"),c(),n.value=!1),clearTimeout(l)},2e4)}a(v,"openLoading");const c=a(()=>{l&&clearTimeout(l),o.needLoading&&m.value&&m.value.close()},"closeLoading"),x=a(()=>{c(),d("loadComplete")},"loadComplete"),h=a(()=>{c(),console.error(q.value),d("loadError")},"loadError");return e.onBeforeMount(()=>{n.value&&o.type&&v()}),e.onBeforeUnmount(()=>{c()}),(t,w)=>n.value?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(e.unref(C))},[e.unref(f)?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(f)),e.mergeProps({key:0},e.unref(B.default)(e.unref(p),t.$attrs),{onLoadComplete:x,onLoadError:h}),null,16)):e.createCommentVNode("",!0)],2)):e.createCommentVNode("",!0)}});exports.default=E;
