"use strict";var g=Object.defineProperty;var u=(n,t)=>g(n,"name",{value:t,configurable:!0});Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const N=require("../../../../../../../tslib@2.3.0/node_modules/tslib/tslib.es6/index.cjs"),l=require("../../../../../../../zrender@5.6.0/node_modules/zrender/lib/core/util/index.cjs"),O=require("../../../util/model/index.cjs"),S=require("../../../model/Component/index.cjs"),v=require("../../../util/layout/index.cjs");function y(n,t){var e=n.existing;if(t.id=n.keyInfo.id,!t.type&&e&&(t.type=e.type),t.parentId==null){var o=t.parentOption;o?t.parentId=o.id:e&&(t.parentId=e.parentId)}t.parentOption=null}u(y,"setKeyInfoToNewElOption");function d(n,t){var e;return l.each(t,function(o){n[o]!=null&&n[o]!=="auto"&&(e=!0)}),e}u(d,"isSetLoc");function C(n,t,e){var o=l.extend({},e),i=n[t],a=e.$action||"merge";if(a==="merge")if(i){if(process.env.NODE_ENV!=="production"){var r=e.type;l.assert(!r||i.type===r,'Please set $action: "replace" to change `type`')}l.merge(i,o,!0),v.mergeLayoutParam(i,o,{ignoreSize:!0}),v.copyLayoutParams(e,i),c(e,i),c(e,i,"shape"),c(e,i,"style"),c(e,i,"extra"),e.clipPath=i.clipPath}else n[t]=o;else a==="replace"?n[t]=o:a==="remove"&&i&&(n[t]=null)}u(C,"mergeNewElOptionToExist");var m=["transition","enterFrom","leaveTo"],A=m.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function c(n,t,e){if(e&&(!n[e]&&t[e]&&(n[e]={}),n=n[e],t=t[e]),!(!n||!t))for(var o=e?m:A,i=0;i<o.length;i++){var a=o[i];n[a]==null&&t[a]!=null&&(n[a]=t[a])}}u(c,"copyTransitionInfo");function I(n,t){if(n&&(n.hv=t.hv=[d(t,["left","right"]),d(t,["top","bottom"])],n.type==="group")){var e=n,o=t;e.width==null&&(e.width=o.width=0),e.height==null&&(e.height=o.height=0)}}u(I,"setLayoutInfoToExist");var R=function(n){N.__extends(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.preventAutoZ=!0,e}return u(t,"GraphicComponentModel"),t.prototype.mergeOption=function(e,o){var i=this.option.elements;this.option.elements=null,n.prototype.mergeOption.call(this,e,o),this.option.elements=i},t.prototype.optionUpdated=function(e,o){var i=this.option,a=(o?i:e).elements,r=i.elements=o?[]:i.elements,h=[];this._flatten(a,h,null);var T=O.mappingToExists(r,h,"normalMerge"),_=this._elOptionsToUpdate=[];l.each(T,function(s,p){var f=s.newOption;process.env.NODE_ENV!=="production"&&l.assert(l.isObject(f)||s.existing,"Empty graphic option definition"),f&&(_.push(f),y(s,f),C(r,p,f),I(r[p],f))},this),i.elements=l.filter(r,function(s){return s&&delete s.$action,s!=null})},t.prototype._flatten=function(e,o,i){l.each(e,function(a){if(a){i&&(a.parentOption=i),o.push(a);var r=a.children;r&&r.length&&this._flatten(r,o,a),delete a.children}},this)},t.prototype.useElOptionsToUpdate=function(){var e=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,e},t.type="graphic",t.defaultOption={elements:[]},t}(S.default);exports.GraphicComponentModel=R;exports.setKeyInfoToNewElOption=y;
