"use strict";var H=Object.defineProperty;var c=(e,t)=>H(e,"name",{value:t,configurable:!0});Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const f=require("../../../../../../zrender@5.6.0/node_modules/zrender/lib/core/util/index.cjs"),q=require("../../../../../../zrender@5.6.0/node_modules/zrender/lib/contain/text/index.cjs"),O=require("../../util/model/index.cjs"),b=require("../axisHelper/index.cjs");var C=O.makeInner();function F(e,t){var a=f.map(t,function(r){return e.scale.parse(r)});return e.type==="time"&&a.length>0&&(a.sort(),a.unshift(a[0]),a.push(a[a.length-1])),a}c(F,"tickValuesToNumbers");function z(e){var t=e.getLabelModel().get("customValues");if(t){var a=b.makeLabelFormatter(e);return{labels:F(e,t).map(function(r){var o={value:r};return{formattedLabel:a(o),rawLabel:e.scale.getLabel(o),tickValue:r}})}}return e.type==="category"?j(e):G(e)}c(z,"createAxisLabels");function P(e,t){var a=e.getTickModel().get("customValues");return a?{ticks:F(e,a)}:e.type==="category"?W(e,t):{ticks:f.map(e.scale.getTicks(),function(r){return r.value})}}c(P,"createAxisTicks");function j(e){var t=e.getLabelModel(),a=E(e,t);return!t.get("show")||e.scale.isBlank()?{labels:[],labelCategoryInterval:a.labelCategoryInterval}:a}c(j,"makeCategoryLabels");function E(e,t){var a=V(e,"labels"),r=b.getOptionCategoryInterval(t),o=S(a,r);if(o)return o;var l,n;return f.isFunction(r)?l=B(e,r):(n=r==="auto"?D(e):r,l=R(e,n)),N(a,r,{labels:l,labelCategoryInterval:n})}c(E,"makeCategoryLabelsActually");function W(e,t){var a=V(e,"ticks"),r=b.getOptionCategoryInterval(t),o=S(a,r);if(o)return o;var l,n;if((!t.get("show")||e.scale.isBlank())&&(l=[]),f.isFunction(r))l=B(e,r,!0);else if(r==="auto"){var v=E(e,e.getLabelModel());n=v.labelCategoryInterval,l=f.map(v.labels,function(u){return u.tickValue})}else n=r,l=R(e,n,!0);return N(a,r,{ticks:l,tickCategoryInterval:n})}c(W,"makeCategoryTicks");function G(e){var t=e.scale.getTicks(),a=b.makeLabelFormatter(e);return{labels:f.map(t,function(r,o){return{level:r.level,formattedLabel:a(r,o),rawLabel:e.scale.getLabel(r),tickValue:r.value}})}}c(G,"makeRealNumberLabels");function V(e,t){return C(e)[t]||(C(e)[t]=[])}c(V,"getListCache");function S(e,t){for(var a=0;a<e.length;a++)if(e[a].key===t)return e[a].value}c(S,"listCacheGet");function N(e,t,a){return e.push({key:t,value:a}),a}c(N,"listCacheSet");function D(e){var t=C(e).autoInterval;return t??(C(e).autoInterval=e.calculateCategoryInterval())}c(D,"makeAutoCategoryInterval");function J(e){var t=K(e),a=b.makeLabelFormatter(e),r=(t.axisRotate-t.labelRotate)/180*Math.PI,o=e.scale,l=o.getExtent(),n=o.count();if(l[1]-l[0]<1)return 0;var v=1;n>40&&(v=Math.max(1,Math.floor(n/40)));for(var u=l[0],i=e.dataToCoord(u+1)-e.dataToCoord(u),T=Math.abs(i*Math.cos(r)),M=Math.abs(i*Math.sin(r)),L=0,d=0;u<=l[1];u+=v){var g=0,m=0,k=q.getBoundingRect(a({value:u}),t.font,"center","top");g=k.width*1.3,m=k.height*1.3,L=Math.max(L,g,7),d=Math.max(d,m,7)}var h=L/T,w=d/M;isNaN(h)&&(h=1/0),isNaN(w)&&(w=1/0);var y=Math.max(0,Math.floor(Math.min(h,w))),s=C(e.model),I=e.getExtent(),p=s.lastAutoInterval,A=s.lastTickCount;return p!=null&&A!=null&&Math.abs(p-y)<=1&&Math.abs(A-n)<=1&&p>y&&s.axisExtent0===I[0]&&s.axisExtent1===I[1]?y=p:(s.lastTickCount=n,s.lastAutoInterval=y,s.axisExtent0=I[0],s.axisExtent1=I[1]),y}c(J,"calculateCategoryInterval");function K(e){var t=e.getLabelModel();return{axisRotate:e.getRotate?e.getRotate():e.isHorizontal&&!e.isHorizontal()?90:0,labelRotate:t.get("rotate")||0,font:t.getFont()}}c(K,"fetchAutoCategoryIntervalCalculationParams");function R(e,t,a){var r=b.makeLabelFormatter(e),o=e.scale,l=o.getExtent(),n=e.getLabelModel(),v=[],u=Math.max((t||0)+1,1),i=l[0],T=o.count();i!==0&&u>1&&T/u>2&&(i=Math.round(Math.ceil(i/u)*u));var M=b.shouldShowAllLabels(e),L=n.get("showMinLabel")||M,d=n.get("showMaxLabel")||M;L&&i!==l[0]&&m(l[0]);for(var g=i;g<=l[1];g+=u)m(g);d&&g-u!==l[1]&&m(l[1]);function m(k){var h={value:k};v.push(a?k:{formattedLabel:r(h),rawLabel:o.getLabel(h),tickValue:k})}return c(m,"addItem"),v}c(R,"makeLabelsByNumericCategoryInterval");function B(e,t,a){var r=e.scale,o=b.makeLabelFormatter(e),l=[];return f.each(r.getTicks(),function(n){var v=r.getLabel(n),u=n.value;t(n.value,v)&&l.push(a?u:{formattedLabel:o(n),rawLabel:v,tickValue:u})}),l}c(B,"makeLabelsByCustomizedCategoryInterval");exports.calculateCategoryInterval=J;exports.createAxisLabels=z;exports.createAxisTicks=P;
