"use strict";var Q=Object.defineProperty;var f=(r,a)=>Q(r,"name",{value:a,configurable:!0});Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const O=require("../../../../../../zrender@5.6.0/node_modules/zrender/lib/tool/morphPath/index.cjs");require("../../util/graphic/index.cjs");const d=require("../../../../../../zrender@5.6.0/node_modules/zrender/lib/core/util/index.cjs"),R=require("../basicTransition/index.cjs"),U=require("../../../../../../zrender@5.6.0/node_modules/zrender/lib/tool/path/index.cjs"),V=require("../../../../../../zrender@5.6.0/node_modules/zrender/lib/graphic/Path/index.cjs");function E(r){return d.isArray(r[0])}f(E,"isMultiple");function G(r,a){for(var t=[],e=r.length,n=0;n<e;n++)t.push({one:r[n],many:[]});for(var n=0;n<a.length;n++){var o=a[n].length,v=void 0;for(v=0;v<o;v++)t[v%e].many.push(a[n][v])}for(var i=0,n=e-1;n>=0;n--)if(!t[n].many.length){var u=t[i].many;if(u.length<=1)if(i)i=0;else return t;var o=u.length,l=Math.ceil(o/2);t[n].many=u.slice(l,o),t[i].many=u.slice(0,l),i++}return t}f(G,"prepareMorphBatches");var W={clone:f(function(r){for(var a=[],t=1-Math.pow(1-r.path.style.opacity,1/r.count),e=0;e<r.count;e++){var n=U.clonePath(r.path);n.setStyle("opacity",t),a.push(n)}return a},"clone"),split:null};function X(r,a,t,e,n,o){if(!r.length||!a.length)return;var v=R.getAnimationConfig("update",e,n);if(!(v&&v.duration>0))return;var i=e.getModel("universalTransition").get("delay"),u=Object.assign({setToFinal:!0},v),l,B;E(r)&&(l=r,B=a),E(a)&&(l=a,B=r);function b(M,c,D,S,J){var p=M.many,P=M.one;if(p.length===1&&!J){var y=c?p[0]:P,q=c?P:p[0];if(O.isCombineMorphing(y))b({many:[y],one:q},!0,D,S,!0);else{var A=i?d.defaults({delay:i(D,S)},u):u;O.morphPath(y,q,A),o(y,q,y,q,A)}}else for(var w=d.defaults({dividePath:W[t],individualDelay:i&&function(N,Y,Z,$){return i(N+D,S)}},u),T=c?O.combineMorph(p,P,w):O.separateMorph(P,p,w),x=T.fromIndividuals,K=T.toIndividuals,z=x.length,s=0;s<z;s++){var A=i?d.defaults({delay:i(s,z)},u):u;o(x[s],K[s],c?p[s]:M.one,c?M.one:p[s],A)}}f(b,"morphOneBatch");for(var C=l?l===r:r.length>a.length,g=l?G(B,l):G(C?a:r,[C?r:a]),j=0,h=0;h<g.length;h++)j+=g[h].many.length;for(var L=0,h=0;h<g.length;h++)b(g[h],C,L,j),L+=g[h].many.length}f(X,"applyMorphAnimation");function H(r){if(!r)return[];if(d.isArray(r)){for(var a=[],t=0;t<r.length;t++)a.push(H(r[t]));return a}var e=[];return r.traverse(function(n){n instanceof V.default&&!n.disableMorphing&&!n.invisible&&!n.ignore&&e.push(n)}),e}f(H,"getPathList");exports.applyMorphAnimation=X;exports.getPathList=H;
