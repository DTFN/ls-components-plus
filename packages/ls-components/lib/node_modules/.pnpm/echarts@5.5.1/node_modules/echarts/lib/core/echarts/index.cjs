"use strict";var ut=Object.defineProperty;var _=(h,o)=>ut(h,"name",{value:o,configurable:!0});Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const le=require("../../../../../../tslib@2.3.0/node_modules/tslib/tslib.es6/index.cjs"),Re=require("../../../../../../zrender@5.6.0/node_modules/zrender/lib/zrender/index.cjs"),p=require("../../../../../../zrender@5.6.0/node_modules/zrender/lib/core/util/index.cjs"),Y=require("../../../../../../zrender@5.6.0/node_modules/zrender/lib/core/env/index.cjs"),ee=require("../../../../../../zrender@5.6.0/node_modules/zrender/lib/core/timsort/index.cjs"),_e=require("../../../../../../zrender@5.6.0/node_modules/zrender/lib/core/Eventful/index.cjs"),dt=require("../../model/Global/index.cjs"),ct=require("../ExtensionAPI/index.cjs"),He=require("../CoordinateSystem/index.cjs"),lt=require("../../model/OptionManager/index.cjs"),Ye=require("../../preprocessor/backwardCompat/index.cjs"),ft=require("../../processor/dataStack/index.cjs"),we=require("../../model/Series/index.cjs"),ht=require("../../view/Component/index.cjs"),te=require("../../view/Chart/index.cjs"),re=require("../../util/innerStore/index.cjs"),E=require("../../util/states/index.cjs"),k=require("../../util/model/index.cjs"),pt=require("../../util/throttle/index.cjs"),ge=require("../../visual/style/index.cjs"),vt=require("../../loading/default/index.cjs"),qe=require("../Scheduler/index.cjs"),_t=require("../../theme/light/index.cjs"),gt=require("../../theme/dark/index.cjs"),De=require("../../util/clazz/index.cjs"),Tt=require("../../util/ECEventProcessor/index.cjs"),Fe=require("../../visual/symbol/index.cjs"),Ie=require("../../visual/helper/index.cjs"),D=require("../../util/log/index.cjs"),Et=require("../../legacy/dataSelectAction/index.cjs"),St=require("../../data/helper/transform/index.cjs"),fe=require("../locale/index.cjs"),X=require("../../util/event/index.cjs"),Ct=require("../../visual/decal/index.cjs"),x=require("../lifecycle/index.cjs"),mt=require("../../../../../../zrender@5.6.0/node_modules/zrender/lib/core/platform/index.cjs"),yt=require("../impl/index.cjs"),Ot=require("../../../../../../zrender@5.6.0/node_modules/zrender/lib/graphic/shape/Rect/index.cjs"),At=require("../../../../../../zrender@5.6.0/node_modules/zrender/lib/graphic/Image/index.cjs"),Pt=require("../../../../../../zrender@5.6.0/node_modules/zrender/lib/graphic/Path/index.cjs"),ie=require("../../animation/basicTransition/index.cjs");var Rt=1,wt=800,Dt=900,It=1e3,Lt=2e3,Nt=5e3,Ge=1e3,Vt=1100,Te=2e3,Be=3e3,Mt=4e3,Q=4500,xt=4600,Ut=5e3,bt=6e3,We=7e3,kt={PROCESSOR:{FILTER:It,SERIES_FILTER:wt,STATISTIC:Nt},VISUAL:{LAYOUT:Ge,PROGRESSIVE_LAYOUT:Vt,GLOBAL:Te,CHART:Be,POST_CHART_LAYOUT:xt,COMPONENT:Mt,BRUSH:Ut,CHART_ITEM:Q,ARIA:bt,DECAL:We}},R="__flagInMainProcess",w="__pendingUpdate",ne="__needsUpdateStatus",Le=/^[a-zA-Z0-9_]+$/,ae="__connectUpdateStatus",Ne=0,zt=1,Ht=2;function je(h){return function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];if(this.isDisposed()){L(this.id);return}return Ze(this,h,o)}}_(je,"createRegisterEventWithLowercaseECharts");function Xe(h){return function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];return Ze(this,h,o)}}_(Xe,"createRegisterEventWithLowercaseMessageCenter");function Ze(h,o,r){return r[0]=r[0]&&r[0].toLowerCase(),_e.default.prototype[o].apply(h,r)}_(Ze,"toLowercaseNameAndCallEventful");var Ke=function(h){le.__extends(o,h);function o(){return h!==null&&h.apply(this,arguments)||this}return _(o,"MessageCenter"),o}(_e.default),$e=Ke.prototype;$e.on=Xe("on");$e.off=Xe("off");var q,se,Z,z,oe,ue,de,G,B,Ve,Me,ce,xe,K,Ue,Je,V,be,Qe=function(h){le.__extends(o,h);function o(r,a,f){var u=h.call(this,new Tt.ECEventProcessor)||this;u._chartsViews=[],u._chartsMap={},u._componentsViews=[],u._componentsMap={},u._pendingActions=[],f=f||{},p.isString(a)&&(a=et[a]),u._dom=r;var C="canvas",O="auto",S=!1;if(process.env.NODE_ENV!=="production"){var A=Y.default.hasGlobalWindow?window:global;A&&(C=p.retrieve2(A.__ECHARTS__DEFAULT__RENDERER__,C),O=p.retrieve2(A.__ECHARTS__DEFAULT__COARSE_POINTER,O),S=p.retrieve2(A.__ECHARTS__DEFAULT__USE_DIRTY_RECT__,S))}f.ssr;var m=u._zr=Re.init(r,{renderer:f.renderer||C,devicePixelRatio:f.devicePixelRatio,width:f.width,height:f.height,ssr:f.ssr,useDirtyRect:p.retrieve2(f.useDirtyRect,S),useCoarsePointer:p.retrieve2(f.useCoarsePointer,O),pointerSize:f.pointerSize});u._ssr=f.ssr,u._throttledZrFlush=pt.throttle(p.bind(m.flush,m),17),a=p.clone(a),a&&Ye.default(a,!0),u._theme=a,u._locale=fe.createLocaleObject(f.locale||fe.SYSTEM_LANG),u._coordSysMgr=new He.default;var e=u._api=Ue(u);function i(t,n){return t.__prio-n.__prio}return _(i,"prioritySortFunc"),ee.default(J,i),ee.default(he,i),u._scheduler=new qe.default(u,e,he,J),u._messageCenter=new Ke,u._initEvents(),u.resize=p.bind(u.resize,u),m.animation.on("frame",u._onframe,u),Ve(m,u),Me(m,u),p.setAsPrimitive(u),u}return _(o,"ECharts"),o.prototype._onframe=function(){if(!this._disposed){be(this);var r=this._scheduler;if(this[w]){var a=this[w].silent;this[R]=!0;try{q(this),z.update.call(this,null,this[w].updateParams)}catch(S){throw this[R]=!1,this[w]=null,S}this._zr.flush(),this[R]=!1,this[w]=null,G.call(this,a),B.call(this,a)}else if(r.unfinished){var f=Rt,u=this._model,C=this._api;r.unfinished=!1;do{var O=+new Date;r.performSeriesTasks(u),r.performDataProcessorTasks(u),ue(this,u),r.performVisualTasks(u),K(this,this._model,C,"remain",{}),f-=+new Date-O}while(f>0&&r.unfinished);r.unfinished||this._zr.flush()}}},o.prototype.getDom=function(){return this._dom},o.prototype.getId=function(){return this.id},o.prototype.getZr=function(){return this._zr},o.prototype.isSSR=function(){return this._ssr},o.prototype.setOption=function(r,a,f){if(this[R]){process.env.NODE_ENV!=="production"&&D.error("`setOption` should not be called during main process.");return}if(this._disposed){L(this.id);return}var u,C,O;if(p.isObject(a)&&(f=a.lazyUpdate,u=a.silent,C=a.replaceMerge,O=a.transition,a=a.notMerge),this[R]=!0,!this._model||a){var S=new lt.default(this._api),A=this._theme,m=this._model=new dt.default;m.scheduler=this._scheduler,m.ssr=this._ssr,m.init(null,null,null,A,this._locale,S)}this._model.setOption(r,{replaceMerge:C},pe);var e={seriesTransition:O,optionChanged:!0};if(f)this[w]={silent:u,updateParams:e},this[R]=!1,this.getZr().wakeUp();else{try{q(this),z.update.call(this,null,e)}catch(i){throw this[w]=null,this[R]=!1,i}this._ssr||this._zr.flush(),this[w]=null,this[R]=!1,G.call(this,u),B.call(this,u)}},o.prototype.setTheme=function(){D.deprecateLog("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},o.prototype.getModel=function(){return this._model},o.prototype.getOption=function(){return this._model&&this._model.getOption()},o.prototype.getWidth=function(){return this._zr.getWidth()},o.prototype.getHeight=function(){return this._zr.getHeight()},o.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||Y.default.hasGlobalWindow&&window.devicePixelRatio||1},o.prototype.getRenderedCanvas=function(r){return process.env.NODE_ENV!=="production"&&D.deprecateReplaceLog("getRenderedCanvas","renderToCanvas"),this.renderToCanvas(r)},o.prototype.renderToCanvas=function(r){r=r||{};var a=this._zr.painter;if(process.env.NODE_ENV!=="production"&&a.type!=="canvas")throw new Error("renderToCanvas can only be used in the canvas renderer.");return a.getRenderedCanvas({backgroundColor:r.backgroundColor||this._model.get("backgroundColor"),pixelRatio:r.pixelRatio||this.getDevicePixelRatio()})},o.prototype.renderToSVGString=function(r){r=r||{};var a=this._zr.painter;if(process.env.NODE_ENV!=="production"&&a.type!=="svg")throw new Error("renderToSVGString can only be used in the svg renderer.");return a.renderToString({useViewBox:r.useViewBox})},o.prototype.getSvgDataURL=function(){if(Y.default.svgSupported){var r=this._zr,a=r.storage.getDisplayList();return p.each(a,function(f){f.stopAnimation(null,!0)}),r.painter.toDataURL()}},o.prototype.getDataURL=function(r){if(this._disposed){L(this.id);return}r=r||{};var a=r.excludeComponents,f=this._model,u=[],C=this;p.each(a,function(S){f.eachComponent({mainType:S},function(A){var m=C._componentsMap[A.__viewId];m.group.ignore||(u.push(m),m.group.ignore=!0)})});var O=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(r).toDataURL("image/"+(r&&r.type||"png"));return p.each(u,function(S){S.group.ignore=!1}),O},o.prototype.getConnectedDataURL=function(r){if(this._disposed){L(this.id);return}var a=r.type==="svg",f=this.group,u=Math.min,C=Math.max,O=1/0;if(ke[f]){var S=O,A=O,m=-O,e=-O,i=[],t=r&&r.pixelRatio||this.getDevicePixelRatio();p.each(j,function(c,g){if(c.group===f){var y=a?c.getZr().painter.getSvgDom().innerHTML:c.renderToCanvas(p.clone(r)),T=c.getDom().getBoundingClientRect();S=u(T.left,S),A=u(T.top,A),m=C(T.right,m),e=C(T.bottom,e),i.push({dom:y,left:T.left,top:T.top})}}),S*=t,A*=t,m*=t,e*=t;var n=m-S,s=e-A,l=mt.platformApi.createCanvas(),d=Re.init(l,{renderer:a?"svg":"canvas"});if(d.resize({width:n,height:s}),a){var v="";return p.each(i,function(c){var g=c.left-S,y=c.top-A;v+='<g transform="translate('+g+","+y+')">'+c.dom+"</g>"}),d.painter.getSvgRoot().innerHTML=v,r.connectedBackgroundColor&&d.painter.setBackgroundColor(r.connectedBackgroundColor),d.refreshImmediately(),d.painter.toDataURL()}else return r.connectedBackgroundColor&&d.add(new Ot.default({shape:{x:0,y:0,width:n,height:s},style:{fill:r.connectedBackgroundColor}})),p.each(i,function(c){var g=new At.default({style:{x:c.left*t-S,y:c.top*t-A,image:c.dom}});d.add(g)}),d.refreshImmediately(),l.toDataURL("image/"+(r&&r.type||"png"))}else return this.getDataURL(r)},o.prototype.convertToPixel=function(r,a){return oe(this,"convertToPixel",r,a)},o.prototype.convertFromPixel=function(r,a){return oe(this,"convertFromPixel",r,a)},o.prototype.containPixel=function(r,a){if(this._disposed){L(this.id);return}var f=this._model,u,C=k.parseFinder(f,r);return p.each(C,function(O,S){S.indexOf("Models")>=0&&p.each(O,function(A){var m=A.coordinateSystem;if(m&&m.containPoint)u=u||!!m.containPoint(a);else if(S==="seriesModels"){var e=this._chartsMap[A.__viewId];e&&e.containPoint?u=u||e.containPoint(a,A):process.env.NODE_ENV!=="production"&&D.warn(S+": "+(e?"The found component do not support containPoint.":"No view mapping to the found component."))}else process.env.NODE_ENV!=="production"&&D.warn(S+": containPoint is not supported")},this)},this),!!u},o.prototype.getVisual=function(r,a){var f=this._model,u=k.parseFinder(f,r,{defaultMainType:"series"}),C=u.seriesModel;process.env.NODE_ENV!=="production"&&(C||D.warn("There is no specified series model"));var O=C.getData(),S=u.hasOwnProperty("dataIndexInside")?u.dataIndexInside:u.hasOwnProperty("dataIndex")?O.indexOfRawIndex(u.dataIndex):null;return S!=null?Ie.getItemVisualFromData(O,S,a):Ie.getVisualFromData(O,a)},o.prototype.getViewOfComponentModel=function(r){return this._componentsMap[r.__viewId]},o.prototype.getViewOfSeriesModel=function(r){return this._chartsMap[r.__viewId]},o.prototype._initEvents=function(){var r=this;p.each(Yt,function(a){var f=_(function(u){var C=r.getModel(),O=u.target,S,A=a==="globalout";if(A?S={}:O&&X.findEventDispatcher(O,function(n){var s=re.getECData(n);if(s&&s.dataIndex!=null){var l=s.dataModel||C.getSeriesByIndex(s.seriesIndex);return S=l&&l.getDataParams(s.dataIndex,s.dataType,O)||{},!0}else if(s.eventData)return S=p.extend({},s.eventData),!0},!0),S){var m=S.componentType,e=S.componentIndex;(m==="markLine"||m==="markPoint"||m==="markArea")&&(m="series",e=S.seriesIndex);var i=m&&e!=null&&C.getComponent(m,e),t=i&&r[i.mainType==="series"?"_chartsMap":"_componentsMap"][i.__viewId];process.env.NODE_ENV!=="production"&&!A&&!(i&&t)&&D.warn("model or view can not be found by params"),S.event=u,S.type=a,r._$eventProcessor.eventInfo={targetEl:O,packedEvent:S,model:i,view:t},r.trigger(a,S)}},"handler");f.zrEventfulCallAtLast=!0,r._zr.on(a,f,r)}),p.each(W,function(a,f){r._messageCenter.on(f,function(u){this.trigger(f,u)},r)}),p.each(["selectchanged"],function(a){r._messageCenter.on(a,function(f){this.trigger(a,f)},r)}),Et.handleLegacySelectEvents(this._messageCenter,this,this._api)},o.prototype.isDisposed=function(){return this._disposed},o.prototype.clear=function(){if(this._disposed){L(this.id);return}this.setOption({series:[]},!0)},o.prototype.dispose=function(){if(this._disposed){L(this.id);return}this._disposed=!0;var r=this.getDom();r&&k.setAttribute(this.getDom(),Se,"");var a=this,f=a._api,u=a._model;p.each(a._componentsViews,function(C){C.dispose(u,f)}),p.each(a._chartsViews,function(C){C.dispose(u,f)}),a._zr.dispose(),a._dom=a._model=a._chartsMap=a._componentsMap=a._chartsViews=a._componentsViews=a._scheduler=a._api=a._zr=a._throttledZrFlush=a._theme=a._coordSysMgr=a._messageCenter=null,delete j[a.id]},o.prototype.resize=function(r){if(this[R]){process.env.NODE_ENV!=="production"&&D.error("`resize` should not be called during main process.");return}if(this._disposed){L(this.id);return}this._zr.resize(r);var a=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!a){var f=a.resetOption("media"),u=r&&r.silent;this[w]&&(u==null&&(u=this[w].silent),f=!0,this[w]=null),this[R]=!0;try{f&&q(this),z.update.call(this,{type:"resize",animation:p.extend({duration:0},r&&r.animation)})}catch(C){throw this[R]=!1,C}this[R]=!1,G.call(this,u),B.call(this,u)}},o.prototype.showLoading=function(r,a){if(this._disposed){L(this.id);return}if(p.isObject(r)&&(a=r,r=""),r=r||"default",this.hideLoading(),!ve[r]){process.env.NODE_ENV!=="production"&&D.warn("Loading effects "+r+" not exists.");return}var f=ve[r](this._api,a),u=this._zr;this._loadingFX=f,u.add(f)},o.prototype.hideLoading=function(){if(this._disposed){L(this.id);return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},o.prototype.makeActionFromEvent=function(r){var a=p.extend({},r);return a.type=W[r.type],a},o.prototype.dispatchAction=function(r,a){if(this._disposed){L(this.id);return}if(p.isObject(a)||(a={silent:!!a}),!!$[r.type]&&this._model){if(this[R]){this._pendingActions.push(r);return}var f=a.silent;de.call(this,r,f);var u=a.flush;u?this._zr.flush():u!==!1&&Y.default.browser.weChat&&this._throttledZrFlush(),G.call(this,f),B.call(this,f)}},o.prototype.updateLabelLayout=function(){x.default.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},o.prototype.appendData=function(r){if(this._disposed){L(this.id);return}var a=r.seriesIndex,f=this.getModel(),u=f.getSeriesByIndex(a);process.env.NODE_ENV!=="production"&&p.assert(r.data&&u),u.appendData(r),this._scheduler.unfinished=!0,this.getZr().wakeUp()},o.internalField=function(){q=_(function(e){var i=e._scheduler;i.restorePipelines(e._model),i.prepareStageTasks(),se(e,!0),se(e,!1),i.plan()},"prepare"),se=_(function(e,i){for(var t=e._model,n=e._scheduler,s=i?e._componentsViews:e._chartsViews,l=i?e._componentsMap:e._chartsMap,d=e._zr,v=e._api,c=0;c<s.length;c++)s[c].__alive=!1;i?t.eachComponent(function(T,I){T!=="series"&&g(I)}):t.eachSeries(g);function g(T){var I=T.__requireNewView;T.__requireNewView=!1;var U="_ec_"+T.id+"_"+T.type,P=!I&&l[U];if(!P){var M=De.parseClassType(T.type),b=i?ht.default.getClass(M.main,M.sub):te.default.getClass(M.sub);process.env.NODE_ENV!=="production"&&p.assert(b,M.sub+" does not exist."),P=new b,P.init(t,v),l[U]=P,s.push(P),d.add(P.group)}T.__viewId=P.__id=U,P.__alive=!0,P.__model=T,P.group.__ecComponentInfo={mainType:T.mainType,index:T.componentIndex},!i&&n.prepareView(P,T,t,v)}_(g,"doPrepare");for(var c=0;c<s.length;){var y=s[c];y.__alive?c++:(!i&&y.renderTask.dispose(),d.remove(y.group),y.dispose(t,v),s.splice(c,1),l[y.__id]===y&&delete l[y.__id],y.__id=y.group.__ecComponentInfo=null)}},"prepareView"),Z=_(function(e,i,t,n,s){var l=e._model;if(l.setUpdatePayload(t),!n){p.each([].concat(e._componentsViews).concat(e._chartsViews),y);return}var d={};d[n+"Id"]=t[n+"Id"],d[n+"Index"]=t[n+"Index"],d[n+"Name"]=t[n+"Name"];var v={mainType:n,query:d};s&&(v.subType=s);var c=t.excludeSeriesId,g;c!=null&&(g=p.createHashMap(),p.each(k.normalizeToArray(c),function(T){var I=k.convertOptionIdName(T,null);I!=null&&g.set(I,!0)})),l&&l.eachComponent(v,function(T){var I=g&&g.get(T.id)!=null;if(!I)if(E.isHighDownPayload(t))if(T instanceof we.default)t.type===E.HIGHLIGHT_ACTION_TYPE&&!t.notBlur&&!T.get(["emphasis","disabled"])&&E.blurSeriesFromHighlightPayload(T,t,e._api);else{var U=E.findComponentHighDownDispatchers(T.mainType,T.componentIndex,t.name,e._api),P=U.focusSelf,M=U.dispatchers;t.type===E.HIGHLIGHT_ACTION_TYPE&&P&&!t.notBlur&&E.blurComponent(T.mainType,T.componentIndex,e._api),M&&p.each(M,function(b){t.type===E.HIGHLIGHT_ACTION_TYPE?E.enterEmphasis(b):E.leaveEmphasis(b)})}else E.isSelectChangePayload(t)&&T instanceof we.default&&(E.toggleSelectionFromPayload(T,t,e._api),E.updateSeriesElementSelection(T),V(e))},e),l&&l.eachComponent(v,function(T){var I=g&&g.get(T.id)!=null;I||y(e[n==="series"?"_chartsMap":"_componentsMap"][T.__viewId])},e);function y(T){T&&T.__alive&&T[i]&&T[i](T.__model,l,e._api,t)}_(y,"callView")},"updateDirectly"),z={prepareAndUpdate:_(function(e){q(this),z.update.call(this,e,{optionChanged:e.newOption!=null})},"prepareAndUpdate"),update:_(function(e,i){var t=this._model,n=this._api,s=this._zr,l=this._coordSysMgr,d=this._scheduler;if(t){t.setUpdatePayload(e),d.restoreData(t,e),d.performSeriesTasks(t),l.create(t,n),d.performDataProcessorTasks(t,e),ue(this,t),l.update(t,n),r(t),d.performVisualTasks(t,e),ce(this,t,n,e,i);var v=t.get("backgroundColor")||"transparent",c=t.get("darkMode");s.setBackgroundColor(v),c!=null&&c!=="auto"&&s.setDarkMode(c),x.default.trigger("afterupdate",t,n)}},"update"),updateTransform:_(function(e){var i=this,t=this._model,n=this._api;if(t){t.setUpdatePayload(e);var s=[];t.eachComponent(function(d,v){if(d!=="series"){var c=i.getViewOfComponentModel(v);if(c&&c.__alive)if(c.updateTransform){var g=c.updateTransform(v,t,n,e);g&&g.update&&s.push(c)}else s.push(c)}});var l=p.createHashMap();t.eachSeries(function(d){var v=i._chartsMap[d.__viewId];if(v.updateTransform){var c=v.updateTransform(d,t,n,e);c&&c.update&&l.set(d.uid,1)}else l.set(d.uid,1)}),r(t),this._scheduler.performVisualTasks(t,e,{setDirty:!0,dirtyMap:l}),K(this,t,n,e,{},l),x.default.trigger("afterupdate",t,n)}},"updateTransform"),updateView:_(function(e){var i=this._model;i&&(i.setUpdatePayload(e),te.default.markUpdateMethod(e,"updateView"),r(i),this._scheduler.performVisualTasks(i,e,{setDirty:!0}),ce(this,i,this._api,e,{}),x.default.trigger("afterupdate",i,this._api))},"updateView"),updateVisual:_(function(e){var i=this,t=this._model;t&&(t.setUpdatePayload(e),t.eachSeries(function(n){n.getData().clearAllVisual()}),te.default.markUpdateMethod(e,"updateVisual"),r(t),this._scheduler.performVisualTasks(t,e,{visualType:"visual",setDirty:!0}),t.eachComponent(function(n,s){if(n!=="series"){var l=i.getViewOfComponentModel(s);l&&l.__alive&&l.updateVisual(s,t,i._api,e)}}),t.eachSeries(function(n){var s=i._chartsMap[n.__viewId];s.updateVisual(n,t,i._api,e)}),x.default.trigger("afterupdate",t,this._api))},"updateVisual"),updateLayout:_(function(e){z.update.call(this,e)},"updateLayout")},oe=_(function(e,i,t,n){if(e._disposed){L(e.id);return}for(var s=e._model,l=e._coordSysMgr.getCoordinateSystems(),d,v=k.parseFinder(s,t),c=0;c<l.length;c++){var g=l[c];if(g[i]&&(d=g[i](s,v,n))!=null)return d}process.env.NODE_ENV!=="production"&&D.warn("No coordinate system that supports "+i+" found by the given finder.")},"doConvertPixel"),ue=_(function(e,i){var t=e._chartsMap,n=e._scheduler;i.eachSeries(function(s){n.updateStreamModes(s,t[s.__viewId])})},"updateStreamModes"),de=_(function(e,i){var t=this,n=this.getModel(),s=e.type,l=e.escapeConnect,d=$[s],v=d.actionInfo,c=(v.update||"update").split(":"),g=c.pop(),y=c[0]!=null&&De.parseClassType(c[0]);this[R]=!0;var T=[e],I=!1;e.batch&&(I=!0,T=p.map(e.batch,function(N){return N=p.defaults(p.extend({},N),e),N.batch=null,N}));var U=[],P,M=E.isSelectChangePayload(e),b=E.isHighDownPayload(e);if(b&&E.allLeaveBlur(this._api),p.each(T,function(N){if(P=d.action(N,t._model,t._api),P=P||p.extend({},N),P.type=v.event||P.type,U.push(P),b){var Pe=k.preParseFinder(e),at=Pe.queryOptionMap,st=Pe.mainTypeSpecified,ot=st?at.keys()[0]:"series";Z(t,g,N,ot),V(t)}else M?(Z(t,g,N,"series"),V(t)):y&&Z(t,g,N,y.main,y.sub)}),g!=="none"&&!b&&!M&&!y)try{this[w]?(q(this),z.update.call(this,e),this[w]=null):z[g].call(this,e)}catch(N){throw this[R]=!1,N}if(I?P={type:v.event||s,escapeConnect:l,batch:U}:P=U[0],this[R]=!1,!i){var Oe=this._messageCenter;if(Oe.trigger(P.type,P),M){var Ae={type:"selectchanged",escapeConnect:l,selected:E.getAllSelectedIndices(n),isFromClick:e.isFromClick||!1,fromAction:e.type,fromActionPayload:e};Oe.trigger(Ae.type,Ae)}}},"doDispatchAction"),G=_(function(e){for(var i=this._pendingActions;i.length;){var t=i.shift();de.call(this,t,e)}},"flushPendingActions"),B=_(function(e){!e&&this.trigger("updated")},"triggerUpdatedEvent"),Ve=_(function(e,i){e.on("rendered",function(t){i.trigger("rendered",t),e.animation.isFinished()&&!i[w]&&!i._scheduler.unfinished&&!i._pendingActions.length&&i.trigger("finished")})},"bindRenderedEvent"),Me=_(function(e,i){e.on("mouseover",function(t){var n=t.target,s=X.findEventDispatcher(n,E.isHighDownDispatcher);s&&(E.handleGlobalMouseOverForHighDown(s,t,i._api),V(i))}).on("mouseout",function(t){var n=t.target,s=X.findEventDispatcher(n,E.isHighDownDispatcher);s&&(E.handleGlobalMouseOutForHighDown(s,t,i._api),V(i))}).on("click",function(t){var n=t.target,s=X.findEventDispatcher(n,function(v){return re.getECData(v).dataIndex!=null},!0);if(s){var l=s.selected?"unselect":"select",d=re.getECData(s);i._api.dispatchAction({type:l,dataType:d.dataType,dataIndexInside:d.dataIndex,seriesIndex:d.seriesIndex,isFromClick:!0})}})},"bindMouseEvent");function r(e){e.clearColorPalette(),e.eachSeries(function(i){i.clearColorPalette()})}_(r,"clearColorPalette");function a(e){var i=[],t=[],n=!1;if(e.eachComponent(function(v,c){var g=c.get("zlevel")||0,y=c.get("z")||0,T=c.getZLevelKey();n=n||!!T,(v==="series"?t:i).push({zlevel:g,z:y,idx:c.componentIndex,type:v,key:T})}),n){var s=i.concat(t),l,d;ee.default(s,function(v,c){return v.zlevel===c.zlevel?v.z-c.z:v.zlevel-c.zlevel}),p.each(s,function(v){var c=e.getComponent(v.type,v.idx),g=v.zlevel,y=v.key;l!=null&&(g=Math.max(l,g)),y?(g===l&&y!==d&&g++,d=y):d&&(g===l&&g++,d=""),l=g,c.setZLevel(g)})}}_(a,"allocateZlevels"),ce=_(function(e,i,t,n,s){a(i),xe(e,i,t,n,s),p.each(e._chartsViews,function(l){l.__alive=!1}),K(e,i,t,n,s),p.each(e._chartsViews,function(l){l.__alive||l.remove(i,t)})},"render"),xe=_(function(e,i,t,n,s,l){p.each(l||e._componentsViews,function(d){var v=d.__model;A(v,d),d.render(v,i,t,n),O(v,d),m(v,d)})},"renderComponents"),K=_(function(e,i,t,n,s,l){var d=e._scheduler;s=p.extend(s||{},{updatedSeries:i.getSeries()}),x.default.trigger("series:beforeupdate",i,t,s);var v=!1;i.eachSeries(function(c){var g=e._chartsMap[c.__viewId];g.__alive=!0;var y=g.renderTask;d.updatePayload(y,n),A(c,g),l&&l.get(c.uid)&&y.dirty(),y.perform(d.getPerformArgs(y))&&(v=!0),g.group.silent=!!c.get("silent"),C(c,g),E.updateSeriesElementSelection(c)}),d.unfinished=v||d.unfinished,x.default.trigger("series:layoutlabels",i,t,s),x.default.trigger("series:transition",i,t,s),i.eachSeries(function(c){var g=e._chartsMap[c.__viewId];O(c,g),m(c,g)}),u(e,i),x.default.trigger("series:afterupdate",i,t,s)},"renderSeries"),V=_(function(e){e[ne]=!0,e.getZr().wakeUp()},"markStatusToUpdate"),be=_(function(e){e[ne]&&(e.getZr().storage.traverse(function(i){ie.isElementRemoved(i)||f(i)}),e[ne]=!1)},"applyChangedStates");function f(e){for(var i=[],t=e.currentStates,n=0;n<t.length;n++){var s=t[n];s==="emphasis"||s==="blur"||s==="select"||i.push(s)}e.selected&&e.states.select&&i.push("select"),e.hoverState===E.HOVER_STATE_EMPHASIS&&e.states.emphasis?i.push("emphasis"):e.hoverState===E.HOVER_STATE_BLUR&&e.states.blur&&i.push("blur"),e.useStates(i)}_(f,"applyElementStates");function u(e,i){var t=e._zr,n=t.storage,s=0;n.traverse(function(l){l.isGroup||s++}),s>i.get("hoverLayerThreshold")&&!Y.default.node&&!Y.default.worker&&i.eachSeries(function(l){if(!l.preventUsingHoverLayer){var d=e._chartsMap[l.__viewId];d.__alive&&d.eachRendered(function(v){v.states.emphasis&&(v.states.emphasis.hoverLayer=!0)})}})}_(u,"updateHoverLayerStatus");function C(e,i){var t=e.get("blendMode")||null;i.eachRendered(function(n){n.isGroup||(n.style.blend=t)})}_(C,"updateBlend");function O(e,i){if(!e.preventAutoZ){var t=e.get("z")||0,n=e.get("zlevel")||0;i.eachRendered(function(s){return S(s,t,n,-1/0),!0})}}_(O,"updateZ");function S(e,i,t,n){var s=e.getTextContent(),l=e.getTextGuideLine(),d=e.isGroup;if(d)for(var v=e.childrenRef(),c=0;c<v.length;c++)n=Math.max(S(v[c],i,t,n),n);else e.z=i,e.zlevel=t,n=Math.max(e.z2,n);if(s&&(s.z=i,s.zlevel=t,isFinite(n)&&(s.z2=n+2)),l){var g=e.textGuideLineConfig;l.z=i,l.zlevel=t,isFinite(n)&&(l.z2=n+(g&&g.showAbove?1:-1))}return n}_(S,"doUpdateZ");function A(e,i){i.eachRendered(function(t){if(!ie.isElementRemoved(t)){var n=t.getTextContent(),s=t.getTextGuideLine();t.stateTransition&&(t.stateTransition=null),n&&n.stateTransition&&(n.stateTransition=null),s&&s.stateTransition&&(s.stateTransition=null),t.hasState()?(t.prevStates=t.currentStates,t.clearStates()):t.prevStates&&(t.prevStates=null)}})}_(A,"clearStates");function m(e,i){var t=e.getModel("stateAnimation"),n=e.isAnimationEnabled(),s=t.get("duration"),l=s>0?{duration:s,delay:t.get("delay"),easing:t.get("easing")}:null;i.eachRendered(function(d){if(d.states&&d.states.emphasis){if(ie.isElementRemoved(d))return;if(d instanceof Pt.default&&E.savePathStates(d),d.__dirty){var v=d.prevStates;v&&d.useStates(v)}if(n){d.stateTransition=l;var c=d.getTextContent(),g=d.getTextGuideLine();c&&(c.stateTransition=l),g&&(g.stateTransition=l)}d.__dirty&&f(d)}})}_(m,"updateStates"),Ue=_(function(e){return new(function(i){le.__extends(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return _(t,"class_1"),t.prototype.getCoordinateSystems=function(){return e._coordSysMgr.getCoordinateSystems()},t.prototype.getComponentByElement=function(n){for(;n;){var s=n.__ecComponentInfo;if(s!=null)return e._model.getComponent(s.mainType,s.index);n=n.parent}},t.prototype.enterEmphasis=function(n,s){E.enterEmphasis(n,s),V(e)},t.prototype.leaveEmphasis=function(n,s){E.leaveEmphasis(n,s),V(e)},t.prototype.enterBlur=function(n){E.enterBlur(n),V(e)},t.prototype.leaveBlur=function(n){E.leaveBlur(n),V(e)},t.prototype.enterSelect=function(n){E.enterSelect(n),V(e)},t.prototype.leaveSelect=function(n){E.leaveSelect(n),V(e)},t.prototype.getModel=function(){return e.getModel()},t.prototype.getViewOfComponentModel=function(n){return e.getViewOfComponentModel(n)},t.prototype.getViewOfSeriesModel=function(n){return e.getViewOfSeriesModel(n)},t}(ct.default))(e)},"createExtensionAPI"),Je=_(function(e){function i(t,n){for(var s=0;s<t.length;s++){var l=t[s];l[ae]=n}}_(i,"updateConnectedChartsStatus"),p.each(W,function(t,n){e._messageCenter.on(n,function(s){if(ke[e.group]&&e[ae]!==Ne){if(s&&s.escapeConnect)return;var l=e.makeActionFromEvent(s),d=[];p.each(j,function(v){v!==e&&v.group===e.group&&d.push(v)}),i(d,Ne),p.each(d,function(v){v[ae]!==zt&&v.dispatchAction(l)}),i(d,Ht)}})})},"enableConnect")}(),o}(_e.default),Ee=Qe.prototype;Ee.on=je("on");Ee.off=je("off");Ee.one=function(h,o,r){var a=this;D.deprecateLog("ECharts#one is deprecated.");function f(){for(var u=[],C=0;C<arguments.length;C++)u[C]=arguments[C];o&&o.apply&&o.apply(this,u),a.off(h,f)}_(f,"wrapped"),this.on.call(this,h,f,r)};var Yt=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function L(h){process.env.NODE_ENV!=="production"&&D.warn("Instance "+h+" has been disposed")}_(L,"disposedWarning");var $={},W={},he=[],pe=[],J=[],et={},ve={},j={},ke={},qt=+new Date-0,Se="_echarts_instance_";function Ft(h,o,r){{if(process.env.NODE_ENV!=="production"&&!h)throw new Error("Initialize failed: invalid dom.");var a=tt(h);if(a)return process.env.NODE_ENV!=="production"&&D.warn("There is a chart instance already initialized on the dom."),a;process.env.NODE_ENV!=="production"&&p.isDom(h)&&h.nodeName.toUpperCase()!=="CANVAS"&&(!h.clientWidth&&!r||!h.clientHeight&&!r)&&D.warn("Can't get DOM width or height. Please check dom.clientWidth and dom.clientHeight. They should not be 0.For example, you may need to call this in the callback of window.onload.")}var f=new Qe(h,o,r);return f.id="ec_"+qt++,j[f.id]=f,k.setAttribute(h,Se,f.id),Je(f),x.default.trigger("afterinit",f),f}_(Ft,"init");function tt(h){return j[k.getAttribute(h,Se)]}_(tt,"getInstanceByDom");function Ce(h,o){et[h]=o}_(Ce,"registerTheme");function rt(h){p.indexOf(pe,h)<0&&pe.push(h)}_(rt,"registerPreprocessor");function it(h,o){ye(he,h,o,Lt)}_(it,"registerProcessor");function Gt(h){me("afterinit",h)}_(Gt,"registerPostInit");function Bt(h){me("afterupdate",h)}_(Bt,"registerPostUpdate");function me(h,o){x.default.on(h,o)}_(me,"registerUpdateLifecycle");function F(h,o,r){p.isFunction(o)&&(r=o,o="");var a=p.isObject(h)?h.type:[h,h={event:o}][0];h.event=(h.event||a).toLowerCase(),o=h.event,!W[o]&&(p.assert(Le.test(a)&&Le.test(o)),$[a]||($[a]={action:r,actionInfo:h}),W[o]=a)}_(F,"registerAction");function Wt(h,o){He.default.register(h,o)}_(Wt,"registerCoordinateSystem");function jt(h,o){ye(J,h,o,Ge,"layout")}_(jt,"registerLayout");function H(h,o){ye(J,h,o,Be,"visual")}_(H,"registerVisual");var ze=[];function ye(h,o,r,a,f){if((p.isFunction(o)||p.isObject(o))&&(r=o,o=a),process.env.NODE_ENV!=="production"){if(isNaN(o)||o==null)throw new Error("Illegal priority");p.each(h,function(C){p.assert(C.__raw!==r)})}if(!(p.indexOf(ze,r)>=0)){ze.push(r);var u=qe.default.wrapStageHandler(r,f);u.__prio=o,u.__raw=r,h.push(u)}}_(ye,"normalizeRegister");function nt(h,o){ve[h]=o}_(nt,"registerLoading");function Xt(h,o,r){var a=yt.getImpl("registerMap");a&&a(h,o,r)}_(Xt,"registerMap");var Zt=St.registerExternalTransform;H(Te,ge.seriesStyleTask);H(Q,ge.dataStyleTask);H(Q,ge.dataColorPaletteTask);H(Te,Fe.seriesSymbolTask);H(Q,Fe.dataSymbolTask);H(We,Ct.default);rt(Ye.default);it(Dt,ft.default);nt("default",vt.default);F({type:E.HIGHLIGHT_ACTION_TYPE,event:E.HIGHLIGHT_ACTION_TYPE,update:E.HIGHLIGHT_ACTION_TYPE},p.noop);F({type:E.DOWNPLAY_ACTION_TYPE,event:E.DOWNPLAY_ACTION_TYPE,update:E.DOWNPLAY_ACTION_TYPE},p.noop);F({type:E.SELECT_ACTION_TYPE,event:E.SELECT_ACTION_TYPE,update:E.SELECT_ACTION_TYPE},p.noop);F({type:E.UNSELECT_ACTION_TYPE,event:E.UNSELECT_ACTION_TYPE,update:E.UNSELECT_ACTION_TYPE},p.noop);F({type:E.TOGGLE_SELECT_ACTION_TYPE,event:E.TOGGLE_SELECT_ACTION_TYPE,update:E.TOGGLE_SELECT_ACTION_TYPE},p.noop);Ce("light",_t.default);Ce("dark",gt.default);exports.registerLocale=fe.registerLocale;exports.PRIORITY=kt;exports.getInstanceByDom=tt;exports.init=Ft;exports.registerAction=F;exports.registerCoordinateSystem=Wt;exports.registerLayout=jt;exports.registerLoading=nt;exports.registerMap=Xt;exports.registerPostInit=Gt;exports.registerPostUpdate=Bt;exports.registerPreprocessor=rt;exports.registerProcessor=it;exports.registerTheme=Ce;exports.registerTransform=Zt;exports.registerUpdateLifecycle=me;exports.registerVisual=H;
