"use strict";var x=Object.defineProperty;var p=(m,i)=>x(m,"name",{value:i,configurable:!0});Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const N=require("../../../../../../../tslib@2.3.0/node_modules/tslib/tslib.es6/index.cjs"),Y=require("../../../util/symbol/index.cjs"),R=require("../../../util/innerStore/index.cjs"),q=require("../../../util/states/index.cjs"),Z=require("../labelHelper/index.cjs"),P=require("../../../../../../../zrender@5.6.0/node_modules/zrender/lib/core/util/index.cjs"),E=require("../../../label/labelStyle/index.cjs"),F=require("../../../../../../../zrender@5.6.0/node_modules/zrender/lib/graphic/Image/index.cjs"),d=require("../../../animation/basicTransition/index.cjs"),H=require("../../../../../../../zrender@5.6.0/node_modules/zrender/lib/graphic/Group/index.cjs");var j=function(m){N.__extends(i,m);function i(t,a,s,l){var r=m.call(this)||this;return r.updateData(t,a,s,l),r}return p(i,"Symbol"),i.prototype._createSymbol=function(t,a,s,l,r){this.removeAll();var e=Y.createSymbol(t,-1,-1,2,2,null,r);e.attr({z2:100,culling:!0,scaleX:l[0]/2,scaleY:l[1]/2}),e.drift=k,this._symbolType=t,this.add(e)},i.prototype.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(null,t)},i.prototype.getSymbolType=function(){return this._symbolType},i.prototype.getSymbolPath=function(){return this.childAt(0)},i.prototype.highlight=function(){q.enterEmphasis(this.childAt(0))},i.prototype.downplay=function(){q.leaveEmphasis(this.childAt(0))},i.prototype.setZ=function(t,a){var s=this.childAt(0);s.zlevel=t,s.z=a},i.prototype.setDraggable=function(t,a){var s=this.childAt(0);s.draggable=t,s.cursor=!a&&t?"move":s.cursor},i.prototype.updateData=function(t,a,s,l){this.silent=!1;var r=t.getItemVisual(a,"symbol")||"circle",e=t.hostModel,n=i.getSymbolSize(t,a),h=r!==this._symbolType,y=l&&l.disableAnimation;if(h){var b=t.getItemVisual(a,"symbolKeepAspect");this._createSymbol(r,t,a,n,b)}else{var o=this.childAt(0);o.silent=!1;var u={scaleX:n[0]/2,scaleY:n[1]/2};y?o.attr(u):d.updateProps(o,u,e,a),d.saveOldStyle(o)}if(this._updateCommon(t,a,n,s,l),h){var o=this.childAt(0);if(!y){var u={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:o.style.opacity}};o.scaleX=o.scaleY=0,o.style.opacity=0,d.initProps(o,u,e,a)}}y&&this.childAt(0).stopAnimation("leave")},i.prototype._updateCommon=function(t,a,s,l,r){var e=this.childAt(0),n=t.hostModel,h,y,b,o,u,_,z,c,I;if(l&&(h=l.emphasisItemStyle,y=l.blurItemStyle,b=l.selectItemStyle,o=l.focus,u=l.blurScope,z=l.labelStatesModels,c=l.hoverScale,I=l.cursorStyle,_=l.emphasisDisabled),!l||t.hasItemOption){var f=l&&l.itemModel?l.itemModel:t.getItemModel(a),v=f.getModel("emphasis");h=v.getModel("itemStyle").getItemStyle(),b=f.getModel(["select","itemStyle"]).getItemStyle(),y=f.getModel(["blur","itemStyle"]).getItemStyle(),o=v.get("focus"),u=v.get("blurScope"),_=v.get("disabled"),z=E.getLabelStatesModels(f),c=v.getShallow("scale"),I=f.getShallow("cursor")}var L=t.getItemVisual(a,"symbolRotate");e.attr("rotation",(L||0)*Math.PI/180||0);var A=Y.normalizeSymbolOffset(t.getItemVisual(a,"symbolOffset"),s);A&&(e.x=A[0],e.y=A[1]),I&&e.attr("cursor",I);var g=t.getItemVisual(a,"style"),X=g.fill;if(e instanceof F.default){var S=e.style;e.useStyle(P.extend({image:S.image,x:S.x,y:S.y,width:S.width,height:S.height},g))}else e.__isEmptyBrush?e.useStyle(P.extend({},g)):e.useStyle(g),e.style.decal=null,e.setColor(X,r&&r.symbolInnerColor),e.style.strokeNoScale=!0;var C=t.getItemVisual(a,"liftZ"),O=this._z2;C!=null?O==null&&(this._z2=e.z2,e.z2+=C):O!=null&&(e.z2=O,this._z2=null);var V=r&&r.useNameLabel;E.setLabelStyle(e,z,{labelFetcher:n,labelDataIndex:a,defaultText:w,inheritColor:X,defaultOpacity:g.opacity});function w(M){return V?t.getName(M):Z.getDefaultLabel(t,M)}p(w,"getLabelDefaultText"),this._sizeX=s[0]/2,this._sizeY=s[1]/2;var T=e.ensureState("emphasis");T.style=h,e.ensureState("select").style=b,e.ensureState("blur").style=y;var D=c==null||c===!0?Math.max(1.1,3/this._sizeY):isFinite(c)&&c>0?+c:1;T.scaleX=this._sizeX*D,T.scaleY=this._sizeY*D,this.setSymbolScale(1),q.toggleHoverEmphasis(this,o,u,_)},i.prototype.setSymbolScale=function(t){this.scaleX=this.scaleY=t},i.prototype.fadeOut=function(t,a,s){var l=this.childAt(0),r=R.getECData(this).dataIndex,e=s&&s.animation;if(this.silent=l.silent=!0,s&&s.fadeLabel){var n=l.getTextContent();n&&d.removeElement(n,{style:{opacity:0}},a,{dataIndex:r,removeOpt:e,cb:p(function(){l.removeTextContent()},"cb")})}else l.removeTextContent();d.removeElement(l,{style:{opacity:0},scaleX:0,scaleY:0},a,{dataIndex:r,cb:t,removeOpt:e})},i.getSymbolSize=function(t,a){return Y.normalizeSymbolSize(t.getItemVisual(a,"symbolSize"))},i}(H.default);function k(m,i){this.parent.drift(m,i)}p(k,"driftSymbol");exports.default=j;
