"use strict";var W=Object.defineProperty;var i=(t,e)=>W(t,"name",{value:e,configurable:!0});Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const p=require("../../../../../../../zrender@5.6.0/node_modules/zrender/lib/core/util/index.cjs"),Y=require("../../../util/model/index.cjs"),C=require("../../Source/index.cjs"),a=require("../../../util/types/index.cjs");var A,E,d,U,g,B=function(){function t(e,o){var n=C.isSourceInstance(e)?e:C.createSourceFromSeriesDataOption(e);this._source=n;var R=this._data=n.data;if(n.sourceFormat===a.SOURCE_FORMAT_TYPED_ARRAY){if(process.env.NODE_ENV!=="production"&&o==null)throw new Error("Typed array data must specify dimension size");this._offset=0,this._dimSize=o,this._data=R}g(this,R,n)}return i(t,"DefaultDataProvider"),t.prototype.getSource=function(){return this._source},t.prototype.count=function(){return 0},t.prototype.getItem=function(e,o){},t.prototype.appendData=function(e){},t.prototype.clean=function(){},t.protoInitialize=function(){var e=t.prototype;e.pure=!1,e.persistent=!0}(),t.internalField=function(){var e;g=i(function(r,u,_){var O=_.sourceFormat,c=_.seriesLayoutBy,s=_.startIndex,v=_.dimensionsDefine,S=U[I(O,c)];if(process.env.NODE_ENV!=="production"&&p.assert(S,"Invalide sourceFormat: "+O),p.extend(r,S),O===a.SOURCE_FORMAT_TYPED_ARRAY)r.getItem=o,r.count=R,r.fillStorage=n;else{var l=F(O,c);r.getItem=p.bind(l,null,u,s,v);var D=N(O,c);r.count=p.bind(D,null,u,s,v)}},"mountMethods");var o=i(function(r,u){r=r-this._offset,u=u||[];for(var _=this._data,O=this._dimSize,c=O*r,s=0;s<O;s++)u[s]=_[c+s];return u},"getItemForTypedArray"),n=i(function(r,u,_,O){for(var c=this._data,s=this._dimSize,v=0;v<s;v++){for(var S=O[v],l=S[0]==null?1/0:S[0],D=S[1]==null?-1/0:S[1],L=u-r,V=_[v],T=0;T<L;T++){var h=c[T*s+v];V[r+T]=h,h<l&&(l=h),h>D&&(D=h)}S[0]=l,S[1]=D}},"fillStorageForTypedArray"),R=i(function(){return this._data?this._data.length/this._dimSize:0},"countForTypedArray");U=(e={},e[a.SOURCE_FORMAT_ARRAY_ROWS+"_"+a.SERIES_LAYOUT_BY_COLUMN]={pure:!0,appendData:f},e[a.SOURCE_FORMAT_ARRAY_ROWS+"_"+a.SERIES_LAYOUT_BY_ROW]={pure:!0,appendData:i(function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')},"appendData")},e[a.SOURCE_FORMAT_OBJECT_ROWS]={pure:!0,appendData:f},e[a.SOURCE_FORMAT_KEYED_COLUMNS]={pure:!0,appendData:i(function(r){var u=this._data;p.each(r,function(_,O){for(var c=u[O]||(u[O]=[]),s=0;s<(_||[]).length;s++)c.push(_[s])})},"appendData")},e[a.SOURCE_FORMAT_ORIGINAL]={appendData:f},e[a.SOURCE_FORMAT_TYPED_ARRAY]={persistent:!1,pure:!0,appendData:i(function(r){process.env.NODE_ENV!=="production"&&p.assert(p.isTypedArray(r),"Added data must be TypedArray if data in initialization is TypedArray"),this._data=r},"appendData"),clean:i(function(){this._offset+=this.count(),this._data=null},"clean")},e);function f(r){for(var u=0;u<r.length;u++)this._data.push(r[u])}i(f,"appendDataSimply")}(),t}(),y=i(function(t,e,o,n){return t[n]},"getItemSimply"),G=(A={},A[a.SOURCE_FORMAT_ARRAY_ROWS+"_"+a.SERIES_LAYOUT_BY_COLUMN]=function(t,e,o,n){return t[n+e]},A[a.SOURCE_FORMAT_ARRAY_ROWS+"_"+a.SERIES_LAYOUT_BY_ROW]=function(t,e,o,n,R){n+=e;for(var f=R||[],r=t,u=0;u<r.length;u++){var _=r[u];f[u]=_?_[n]:null}return f},A[a.SOURCE_FORMAT_OBJECT_ROWS]=y,A[a.SOURCE_FORMAT_KEYED_COLUMNS]=function(t,e,o,n,R){for(var f=R||[],r=0;r<o.length;r++){var u=o[r].name;if(process.env.NODE_ENV!=="production"&&u==null)throw new Error;var _=t[u];f[r]=_?_[n]:null}return f},A[a.SOURCE_FORMAT_ORIGINAL]=y,A);function F(t,e){var o=G[I(t,e)];return process.env.NODE_ENV!=="production"&&p.assert(o,'Do not support get item on "'+t+'", "'+e+'".'),o}i(F,"getRawSourceItemGetter");var m=i(function(t,e,o){return t.length},"countSimply"),z=(E={},E[a.SOURCE_FORMAT_ARRAY_ROWS+"_"+a.SERIES_LAYOUT_BY_COLUMN]=function(t,e,o){return Math.max(0,t.length-e)},E[a.SOURCE_FORMAT_ARRAY_ROWS+"_"+a.SERIES_LAYOUT_BY_ROW]=function(t,e,o){var n=t[0];return n?Math.max(0,n.length-e):0},E[a.SOURCE_FORMAT_OBJECT_ROWS]=m,E[a.SOURCE_FORMAT_KEYED_COLUMNS]=function(t,e,o){var n=o[0].name;if(process.env.NODE_ENV!=="production"&&n==null)throw new Error;var R=t[n];return R?R.length:0},E[a.SOURCE_FORMAT_ORIGINAL]=m,E);function N(t,e){var o=z[I(t,e)];return process.env.NODE_ENV!=="production"&&p.assert(o,'Do not support count on "'+t+'", "'+e+'".'),o}i(N,"getRawSourceDataCounter");var M=i(function(t,e,o){return t[e]},"getRawValueSimply"),P=(d={},d[a.SOURCE_FORMAT_ARRAY_ROWS]=M,d[a.SOURCE_FORMAT_OBJECT_ROWS]=function(t,e,o){return t[o]},d[a.SOURCE_FORMAT_KEYED_COLUMNS]=M,d[a.SOURCE_FORMAT_ORIGINAL]=function(t,e,o){var n=Y.getDataItemValue(t);return n instanceof Array?n[e]:n},d[a.SOURCE_FORMAT_TYPED_ARRAY]=M,d);function w(t){var e=P[t];return process.env.NODE_ENV!=="production"&&p.assert(e,'Do not support get value on "'+t+'".'),e}i(w,"getRawSourceValueGetter");function I(t,e){return t===a.SOURCE_FORMAT_ARRAY_ROWS?t+"_"+e:t}i(I,"getMethodMapKey");function b(t,e,o){if(t){var n=t.getRawDataItem(e);if(n!=null){var R=t.getStore(),f=R.getSource().sourceFormat;if(o!=null){var r=t.getDimensionIndex(o),u=R.getDimensionProperty(r);return w(f)(n,r,u)}else{var _=n;return f===a.SOURCE_FORMAT_ORIGINAL&&(_=Y.getDataItemValue(n)),_}}}}i(b,"retrieveRawValue");exports.DefaultDataProvider=B;exports.getRawSourceDataCounter=N;exports.getRawSourceItemGetter=F;exports.getRawSourceValueGetter=w;exports.retrieveRawValue=b;
