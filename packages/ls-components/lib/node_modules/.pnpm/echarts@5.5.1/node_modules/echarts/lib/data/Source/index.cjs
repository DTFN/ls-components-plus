"use strict";var C=Object.defineProperty;var O=(n,t)=>C(n,"name",{value:t,configurable:!0});Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const i=require("../../../../../../zrender@5.6.0/node_modules/zrender/lib/core/util/index.cjs"),s=require("../../util/types/index.cjs"),y=require("../../util/model/index.cjs"),f=require("../helper/sourceHelper/index.cjs");var R=function(){function n(t){this.data=t.data||(t.sourceFormat===s.SOURCE_FORMAT_KEYED_COLUMNS?{}:[]),this.sourceFormat=t.sourceFormat||s.SOURCE_FORMAT_UNKNOWN,this.seriesLayoutBy=t.seriesLayoutBy||s.SERIES_LAYOUT_BY_COLUMN,this.startIndex=t.startIndex||0,this.dimensionsDetectedCount=t.dimensionsDetectedCount,this.metaRawOption=t.metaRawOption;var r=this.dimensionsDefine=t.dimensionsDefine;if(r)for(var o=0;o<r.length;o++){var e=r[o];e.type==null&&f.guessOrdinal(this,o)===f.BE_ORDINAL.Must&&(e.type="ordinal")}}return O(n,"SourceImpl"),n}();function T(n){return n instanceof R}O(T,"isSourceInstance");function U(n,t,r){r=r||m(n);var o=t.seriesLayoutBy,e=F(n,r,o,t.sourceHeader,t.dimensions),u=new R({data:n,sourceFormat:r,seriesLayoutBy:o,dimensionsDefine:e.dimensionsDefine,startIndex:e.startIndex,dimensionsDetectedCount:e.dimensionsDetectedCount,metaRawOption:i.clone(t)});return u}O(U,"createSource");function p(n){return new R({data:n,sourceFormat:i.isTypedArray(n)?s.SOURCE_FORMAT_TYPED_ARRAY:s.SOURCE_FORMAT_ORIGINAL})}O(p,"createSourceFromSeriesDataOption");function v(n){return new R({data:n.data,sourceFormat:n.sourceFormat,seriesLayoutBy:n.seriesLayoutBy,dimensionsDefine:i.clone(n.dimensionsDefine),startIndex:n.startIndex,dimensionsDetectedCount:n.dimensionsDetectedCount})}O(v,"cloneSourceShallow");function m(n){var t=s.SOURCE_FORMAT_UNKNOWN;if(i.isTypedArray(n))t=s.SOURCE_FORMAT_TYPED_ARRAY;else if(i.isArray(n)){n.length===0&&(t=s.SOURCE_FORMAT_ARRAY_ROWS);for(var r=0,o=n.length;r<o;r++){var e=n[r];if(e!=null){if(i.isArray(e)||i.isTypedArray(e)){t=s.SOURCE_FORMAT_ARRAY_ROWS;break}else if(i.isObject(e)){t=s.SOURCE_FORMAT_OBJECT_ROWS;break}}}}else if(i.isObject(n)){for(var u in n)if(i.hasOwn(n,u)&&i.isArrayLike(n[u])){t=s.SOURCE_FORMAT_KEYED_COLUMNS;break}}return t}O(m,"detectSourceFormat");function F(n,t,r,o,e){var u,c;if(!n)return{dimensionsDefine:A(e),startIndex:c,dimensionsDetectedCount:u};if(t===s.SOURCE_FORMAT_ARRAY_ROWS){var a=n;o==="auto"||o==null?E(function(l){l!=null&&l!=="-"&&(i.isString(l)?c==null&&(c=1):c=0)},r,a,10):c=i.isNumber(o)?o:o?1:0,!e&&c===1&&(e=[],E(function(l,_){e[_]=l!=null?l+"":""},r,a,1/0)),u=e?e.length:r===s.SERIES_LAYOUT_BY_ROW?a.length:a[0]?a[0].length:null}else if(t===s.SOURCE_FORMAT_OBJECT_ROWS)e||(e=h(n));else if(t===s.SOURCE_FORMAT_KEYED_COLUMNS)e||(e=[],i.each(n,function(l,_){e.push(_)}));else if(t===s.SOURCE_FORMAT_ORIGINAL){var S=y.getDataItemValue(n[0]);u=i.isArray(S)&&S.length||1}else t===s.SOURCE_FORMAT_TYPED_ARRAY&&process.env.NODE_ENV!=="production"&&i.assert(!!e,"dimensions must be given if data is TypedArray.");return{startIndex:c,dimensionsDefine:A(e),dimensionsDetectedCount:u}}O(F,"determineSourceDimensions");function h(n){for(var t=0,r;t<n.length&&!(r=n[t++]););if(r)return i.keys(r)}O(h,"objectRowsCollectDimensions");function A(n){if(n){var t=i.createHashMap();return i.map(n,function(r,o){r=i.isObject(r)?r:{name:r};var e={name:r.name,displayName:r.displayName,type:r.type};if(e.name==null)return e;e.name+="",e.displayName==null&&(e.displayName=e.name);var u=t.get(e.name);return u?e.name+="-"+u.count++:t.set(e.name,{count:1}),e})}}O(A,"normalizeDimensionsOption");function E(n,t,r,o){if(t===s.SERIES_LAYOUT_BY_ROW)for(var e=0;e<r.length&&e<o;e++)n(r[e]?r[e][0]:null,e);else for(var u=r[0]||[],e=0;e<u.length&&e<o;e++)n(u[e],e)}O(E,"arrayRowsTravelFirst");function d(n){var t=n.sourceFormat;return t===s.SOURCE_FORMAT_OBJECT_ROWS||t===s.SOURCE_FORMAT_KEYED_COLUMNS}O(d,"shouldRetrieveDataByName");exports.cloneSourceShallow=v;exports.createSource=U;exports.createSourceFromSeriesDataOption=p;exports.detectSourceFormat=m;exports.isSourceInstance=T;exports.shouldRetrieveDataByName=d;
