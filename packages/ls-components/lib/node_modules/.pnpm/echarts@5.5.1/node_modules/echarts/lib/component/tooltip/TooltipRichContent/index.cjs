"use strict";var w=Object.defineProperty;var d=(e,t)=>w(e,"name",{value:t,configurable:!0});Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const f=require("../../../../../../../zrender@5.6.0/node_modules/zrender/lib/core/util/index.cjs"),g=require("../../../../../../../zrender@5.6.0/node_modules/zrender/lib/graphic/Text/index.cjs"),p=require("../tooltipMarkup/index.cjs"),v=require("../../../util/log/index.cjs");var y=function(){function e(t){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=t.getZr(),_(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return d(e,"TooltipRichContent"),e.prototype.update=function(t){var i=t.get("alwaysShowContent");i&&this._moveIfResized(),this._alwaysShowContent=i},e.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},e.prototype.setContent=function(t,i,o,r,u){var n=this;f.isObject(t)&&v.throwError(process.env.NODE_ENV!=="production"?"Passing DOM nodes as content is not supported in richText tooltip!":""),this.el&&this._zr.remove(this.el);var a=o.getModel("textStyle");this.el=new g.default({style:{rich:i.richTextStyles,text:t,lineHeight:22,borderWidth:1,borderColor:r,textShadowColor:a.get("textShadowColor"),fill:o.get(["textStyle","color"]),padding:p.getPaddingFromTooltipModel(o,"richText"),verticalAlign:"top",align:"left"},z:o.get("z")}),f.each(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(l){n.el.style[l]=o.get(l)}),f.each(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(l){n.el.style[l]=a.get(l)||0}),this._zr.add(this.el);var s=this;this.el.on("mouseover",function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0}),this.el.on("mouseout",function(){s._enterable&&s._show&&s.hideLater(s._hideDelay),s._inContent=!1})},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el,i=this.el.getBoundingRect(),o=c(t.style);return[i.width+o.left+o.right,i.height+o.top+o.bottom]},e.prototype.moveTo=function(t,i){var o=this.el;if(o){var r=this._styleCoord;_(r,this._zr,t,i),t=r[0],i=r[1];var u=o.style,n=h(u.borderWidth||0),a=c(u);o.x=t+n+a.left,o.y=i+n+a.top,o.markRedraw()}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],i=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),i*this._zr.getHeight())},e.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(f.bind(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this._zr.remove(this.el)},e}();function h(e){return Math.max(0,e)}d(h,"mathMaxWith0");function c(e){var t=h(e.shadowBlur||0),i=h(e.shadowOffsetX||0),o=h(e.shadowOffsetY||0);return{left:h(t-i),right:h(t+i),top:h(t-o),bottom:h(t+o)}}d(c,"calcShadowOuterSize");function _(e,t,i,o){e[0]=i,e[1]=o,e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}d(_,"makeStyleCoord");exports.default=y;
