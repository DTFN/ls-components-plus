"use strict";var q=Object.defineProperty;var u=(e,t)=>q(e,"name",{value:t,configurable:!0});Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const G=require("../../../model/Model/index.cjs"),v=require("../../../../../../../zrender@5.6.0/node_modules/zrender/lib/core/util/index.cjs");function O(e,t){var o={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return U(o,e,t),o.seriesInvolved&&z(o,e),o}u(O,"collect");function U(e,t,o){var s=t.getComponent("tooltip"),n=t.getComponent("axisPointer"),l=n.get("link",!0)||[],a=[];v.each(o.getCoordinateSystems(),function(i){if(!i.axisPointerEnabled)return;var r=y(i.model),d=e.coordSysAxesInfo[r]={};e.coordSysMap[r]=i;var h=i.model,c=h.getModel("tooltip",s);if(v.each(i.getAxes(),v.curry(S,!1,null)),i.getTooltipAxes&&s&&c.get("show")){var x=c.get("trigger")==="axis",A=c.get(["axisPointer","type"])==="cross",k=i.getTooltipAxes(c.get(["axisPointer","axis"]));(x||A)&&v.each(k.baseAxes,v.curry(S,A?"cross":!0,x)),A&&v.each(k.otherAxes,v.curry(S,"cross",!1))}function S(P,p,g){var f=g.model.getModel("axisPointer",n),D=f.get("show");if(!(!D||D==="auto"&&!P&&!C(f))){p==null&&(p=f.get("triggerTooltip")),f=P?j(g,c,n,t,P,p):f;var T=f.get("snap"),H=f.get("triggerEmphasis"),m=y(g.model),K=p||T||g.type==="category",M=e.axesInfo[m]={key:m,axis:g,coordSys:i,axisPointerModel:f,triggerTooltip:p,triggerEmphasis:H,involveSeries:K,snap:T,useHandle:C(f),seriesModels:[],linkGroup:null};d[m]=M,e.seriesInvolved=e.seriesInvolved||K;var I=B(l,g);if(I!=null){var w=a[I]||(a[I]={axesInfo:{}});w.axesInfo[m]=M,w.mapper=l[I].mapper,M.linkGroup=w}}}u(S,"saveTooltipAxisInfo")})}u(U,"collectAxesInfo");function j(e,t,o,s,n,l){var a=t.getModel("axisPointer"),i=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],r={};v.each(i,function(x){r[x]=v.clone(a.get(x))}),r.snap=e.type!=="category"&&!!l,a.get("type")==="cross"&&(r.type="line");var d=r.label||(r.label={});if(d.show==null&&(d.show=!1),n==="cross"){var h=a.get(["label","show"]);if(d.show=h??!0,!l){var c=r.lineStyle=a.get("crossStyle");c&&v.defaults(d,c.textStyle)}}return e.model.getModel("axisPointer",new G.default(r,o,s))}u(j,"makeAxisPointerModel");function z(e,t){t.eachSeries(function(o){var s=o.coordinateSystem,n=o.get(["tooltip","trigger"],!0),l=o.get(["tooltip","show"],!0);!s||n==="none"||n===!1||n==="item"||l===!1||o.get(["axisPointer","show"],!0)===!1||v.each(e.coordSysAxesInfo[y(s.model)],function(a){var i=a.axis;s.getAxis(i.dim)===i&&(a.seriesModels.push(o),a.seriesDataCount==null&&(a.seriesDataCount=0),a.seriesDataCount+=o.getData().count())})})}u(z,"collectSeriesInfo");function B(e,t){for(var o=t.model,s=t.dim,n=0;n<e.length;n++){var l=e[n]||{};if(b(l[s+"AxisId"],o.id)||b(l[s+"AxisIndex"],o.componentIndex)||b(l[s+"AxisName"],o.name))return n}}u(B,"getLinkGroupIndex");function b(e,t){return e==="all"||v.isArray(e)&&v.indexOf(e,t)>=0||e===t}u(b,"checkPropInLink");function L(e){var t=E(e);if(t){var o=t.axisPointerModel,s=t.axis.scale,n=o.option,l=o.get("status"),a=o.get("value");a!=null&&(a=s.parse(a));var i=C(o);l==null&&(n.status=i?"show":"hide");var r=s.getExtent().slice();r[0]>r[1]&&r.reverse(),(a==null||a>r[1])&&(a=r[1]),a<r[0]&&(a=r[0]),n.value=a,i&&(n.status=t.axis.scale.isBlank()?"hide":"show")}}u(L,"fixValue");function E(e){var t=(e.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[y(e)]}u(E,"getAxisInfo");function N(e){var t=E(e);return t&&t.axisPointerModel}u(N,"getAxisPointerModel");function C(e){return!!e.get(["handle","show"])}u(C,"isHandleTrigger");function y(e){return e.type+"||"+e.id}u(y,"makeKey");exports.collect=O;exports.fixValue=L;exports.getAxisInfo=E;exports.getAxisPointerModel=N;exports.makeKey=y;
