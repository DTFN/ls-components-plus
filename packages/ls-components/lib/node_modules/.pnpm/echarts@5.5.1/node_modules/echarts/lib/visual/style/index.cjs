"use strict";var I=Object.defineProperty;var y=(e,r)=>I(e,"name",{value:r,configurable:!0});Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const v=require("../../../../../../zrender@5.6.0/node_modules/zrender/lib/core/util/index.cjs"),P=require("../../model/mixin/makeStyleMapper/index.cjs"),V=require("../../model/mixin/itemStyle/index.cjs"),d=require("../../model/mixin/lineStyle/index.cjs"),A=require("../../model/Model/index.cjs"),D=require("../../util/model/index.cjs");var h=D.makeInner(),w={itemStyle:P.default(V.ITEM_STYLE_KEY_MAP,!0),lineStyle:P.default(d.LINE_STYLE_KEY_MAP,!0)},q={lineStyle:"stroke",itemStyle:"fill"};function T(e,r){var t=e.visualStyleMapper||w[r];return t||(console.warn("Unknown style type '"+r+"'."),w.itemStyle)}y(T,"getStyleMapper");function C(e,r){var t=e.visualDrawType||q[r];return t||(console.warn("Unknown style type '"+r+"'."),"fill")}y(C,"getDefaultColorKey");var E={createOnAllSeries:!0,performRawSeries:!0,reset:y(function(e,r){var t=e.getData(),l=e.visualStyleAccessPath||"itemStyle",u=e.getModel(l),o=T(e,l),a=o(u),c=u.getShallow("decal");c&&(t.setVisual("decal",c),c.dirty=!0);var i=C(e,l),n=a[i],s=v.isFunction(n)?n:null,m=a.fill==="auto"||a.stroke==="auto";if(!a[i]||s||m){var S=e.getColorFromPalette(e.name,null,r.getSeriesCount());a[i]||(a[i]=S,t.setVisual("colorFromPalette",!0)),a.fill=a.fill==="auto"||v.isFunction(a.fill)?S:a.fill,a.stroke=a.stroke==="auto"||v.isFunction(a.stroke)?S:a.stroke}if(t.setVisual("style",a),t.setVisual("drawType",i),!r.isSeriesFiltered(e)&&s)return t.setVisual("colorFromPalette",!1),{dataEach:y(function(g,p){var F=e.getDataParams(p),k=v.extend({},a);k[i]=s(F),g.setItemVisual(p,"style",k)},"dataEach")}},"reset")},f=new A.default,K={createOnAllSeries:!0,performRawSeries:!0,reset:y(function(e,r){if(!(e.ignoreStyleOnData||r.isSeriesFiltered(e))){var t=e.getData(),l=e.visualStyleAccessPath||"itemStyle",u=T(e,l),o=t.getVisual("drawType");return{dataEach:t.hasItemOption?function(a,c){var i=a.getRawDataItem(c);if(i&&i[l]){f.option=i[l];var n=u(f),s=a.ensureUniqueItemVisual(c,"style");v.extend(s,n),f.option.decal&&(a.setItemVisual(c,"decal",f.option.decal),f.option.decal.dirty=!0),o in n&&a.setItemVisual(c,"colorFromPalette",!1)}}:null}}},"reset")},R={performRawSeries:!0,overallReset:y(function(e){var r=v.createHashMap();e.eachSeries(function(t){var l=t.getColorBy();if(!t.isColorBySeries()){var u=t.type+"-"+l,o=r.get(u);o||(o={},r.set(u,o)),h(t).scope=o}}),e.eachSeries(function(t){if(!(t.isColorBySeries()||e.isSeriesFiltered(t))){var l=t.getRawData(),u={},o=t.getData(),a=h(t).scope,c=t.visualStyleAccessPath||"itemStyle",i=C(t,c);o.each(function(n){var s=o.getRawIndex(n);u[s]=n}),l.each(function(n){var s=u[n],m=o.getItemVisual(s,"colorFromPalette");if(m){var S=o.ensureUniqueItemVisual(s,"style"),g=l.getName(n)||n+"",p=l.count();S[i]=t.getColorFromPalette(g,a,p)}})}})},"overallReset")};exports.dataColorPaletteTask=R;exports.dataStyleTask=K;exports.seriesStyleTask=E;
