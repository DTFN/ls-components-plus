"use strict";var ce=Object.defineProperty;var a=(e,t)=>ce(e,"name",{value:t,configurable:!0});Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const c=require("../../../../../../zrender@5.6.0/node_modules/zrender/lib/core/util/index.cjs"),d=require("../innerStore/index.cjs"),k=require("../../../../../../zrender@5.6.0/node_modules/zrender/lib/tool/color/index.cjs"),D=require("../model/index.cjs"),fe=require("../../../../../../zrender@5.6.0/node_modules/zrender/lib/graphic/Path/index.cjs"),T=require("../log/index.cjs");var V=1,Y={},z=D.makeInner(),P=D.makeInner(),y=0,m=1,O=2,he=["emphasis","blur","select"],ve=["normal","emphasis","blur","select"],U=10,W=9,Z="highlight",j="downplay",L="select",J="unselect",B="toggleSelect";function S(e){return e!=null&&e!=="none"}a(S,"hasFillOrStroke");function C(e,t,r){e.onHoverStateChange&&(e.hoverState||0)!==r&&e.onHoverStateChange(t),e.hoverState=r}a(C,"doChangeHoverState");function K(e){C(e,"emphasis",O)}a(K,"singleEnterEmphasis");function Q(e){e.hoverState===O&&C(e,"normal",y)}a(Q,"singleLeaveEmphasis");function F(e){C(e,"blur",m)}a(F,"singleEnterBlur");function X(e){e.hoverState===m&&C(e,"normal",y)}a(X,"singleLeaveBlur");function ge(e){e.selected=!0}a(ge,"singleEnterSelect");function Se(e){e.selected=!1}a(Se,"singleLeaveSelect");function R(e,t,r){t(e,r)}a(R,"updateElementState");function g(e,t,r){R(e,t,r),e.isGroup&&e.traverse(function(n){R(n,t,r)})}a(g,"traverseUpdateState");function de(e,t){switch(t){case"emphasis":e.hoverState=O;break;case"normal":e.hoverState=y;break;case"blur":e.hoverState=m;break;case"select":e.selected=!0}}a(de,"setStatesFlag");function Ee(e,t,r,n){for(var i=e.style,o={},l=0;l<t.length;l++){var s=t[l],f=i[s];o[s]=f??(n&&n[s])}for(var l=0;l<e.animators.length;l++){var u=e.animators[l];u.__fromStateTransition&&u.__fromStateTransition.indexOf(r)<0&&u.targetName==="style"&&u.saveTo(o,t)}return o}a(Ee,"getFromStateStyle");function _e(e,t,r,n){var i=r&&c.indexOf(r,"select")>=0,o=!1;if(e instanceof fe.default){var l=z(e),s=i&&l.selectFill||l.normalFill,f=i&&l.selectStroke||l.normalStroke;if(S(s)||S(f)){n=n||{};var u=n.style||{};u.fill==="inherit"?(o=!0,n=c.extend({},n),u=c.extend({},u),u.fill=s):!S(u.fill)&&S(s)?(o=!0,n=c.extend({},n),u=c.extend({},u),u.fill=k.liftColor(s)):!S(u.stroke)&&S(f)&&(o||(n=c.extend({},n),u=c.extend({},u)),u.stroke=k.liftColor(f)),n.style=u}}if(n&&n.z2==null){o||(n=c.extend({},n));var v=e.z2EmphasisLift;n.z2=e.z2+(v??U)}return n}a(_e,"createEmphasisDefaultState");function pe(e,t,r){if(r&&r.z2==null){r=c.extend({},r);var n=e.z2SelectLift;r.z2=e.z2+(n??W)}return r}a(pe,"createSelectDefaultState");function De(e,t,r){var n=c.indexOf(e.currentStates,t)>=0,i=e.style.opacity,o=n?null:Ee(e,["opacity"],t,{opacity:1});r=r||{};var l=r.style||{};return l.opacity==null&&(r=c.extend({},r),l=c.extend({opacity:n?i:o.opacity*.1},l),r.style=l),r}a(De,"createBlurDefaultState");function A(e,t){var r=this.states[e];if(this.style){if(e==="emphasis")return _e(this,e,t,r);if(e==="blur")return De(this,e,r);if(e==="select")return pe(this,e,r)}return r}a(A,"elementStateProxy");function $(e){e.stateProxy=A;var t=e.getTextContent(),r=e.getTextGuideLine();t&&(t.stateProxy=A),r&&(r.stateProxy=A)}a($,"setDefaultStateProxy");function w(e,t){!ne(e,t)&&!e.__highByOuter&&g(e,K)}a(w,"enterEmphasisWhenMouseOver");function b(e,t){!ne(e,t)&&!e.__highByOuter&&g(e,Q)}a(b,"leaveEmphasisWhenMouseOut");function Te(e,t){e.__highByOuter|=1<<(t||0),g(e,K)}a(Te,"enterEmphasis");function ye(e,t){!(e.__highByOuter&=~(1<<(t||0)))&&g(e,Q)}a(ye,"leaveEmphasis");function me(e){g(e,F)}a(me,"enterBlur");function ee(e){g(e,X)}a(ee,"leaveBlur");function te(e){g(e,ge)}a(te,"enterSelect");function re(e){g(e,Se)}a(re,"leaveSelect");function ne(e,t){return e.__highDownSilentOnTouch&&t.zrByTouch}a(ne,"shouldSilent");function ae(e){var t=e.getModel(),r=[],n=[];t.eachComponent(function(i,o){var l=P(o),s=i==="series",f=s?e.getViewOfSeriesModel(o):e.getViewOfComponentModel(o);!s&&n.push(f),l.isBlured&&(f.group.traverse(function(u){X(u)}),s&&r.push(o)),l.isBlured=!1}),c.each(n,function(i){i&&i.toggleBlurSeries&&i.toggleBlurSeries(r,!1,t)})}a(ae,"allLeaveBlur");function p(e,t,r,n){var i=n.getModel();r=r||"coordinateSystem";function o(u,v){for(var h=0;h<v.length;h++){var E=u.getItemGraphicEl(v[h]);E&&ee(E)}}if(a(o,"leaveBlurOfIndices"),e!=null&&!(!t||t==="none")){var l=i.getSeriesByIndex(e),s=l.coordinateSystem;s&&s.master&&(s=s.master);var f=[];i.eachSeries(function(u){var v=l===u,h=u.coordinateSystem;h&&h.master&&(h=h.master);var E=h&&s?h===s:v;if(!(r==="series"&&!v||r==="coordinateSystem"&&!E||t==="series"&&v)){var se=n.getViewOfSeriesModel(u);if(se.group.traverse(function(M){M.__highByOuter&&v&&t==="self"||F(M)}),c.isArrayLike(t))o(u.getData(),t);else if(c.isObject(t))for(var H=c.keys(t),_=0;_<H.length;_++)o(u.getData(H[_]),t[H[_]]);f.push(u),P(u).isBlured=!0}}),i.eachComponent(function(u,v){if(u!=="series"){var h=n.getViewOfComponentModel(v);h&&h.toggleBlurSeries&&h.toggleBlurSeries(f,!0,i)}})}}a(p,"blurSeries");function x(e,t,r){if(!(e==null||t==null)){var n=r.getModel().getComponent(e,t);if(n){P(n).isBlured=!0;var i=r.getViewOfComponentModel(n);!i||!i.focusBlurEnabled||i.group.traverse(function(o){F(o)})}}}a(x,"blurComponent");function Oe(e,t,r){var n=e.seriesIndex,i=e.getData(t.dataType);if(!i){process.env.NODE_ENV!=="production"&&T.error("Unknown dataType "+t.dataType);return}var o=D.queryDataIndex(i,t);o=(c.isArray(o)?o[0]:o)||0;var l=i.getItemGraphicEl(o);if(!l)for(var s=i.count(),f=0;!l&&f<s;)l=i.getItemGraphicEl(f++);if(l){var u=d.getECData(l);p(n,u.focus,u.blurScope,r)}else{var v=e.get(["emphasis","focus"]),h=e.get(["emphasis","blurScope"]);v!=null&&p(n,v,h,r)}}a(Oe,"blurSeriesFromHighlightPayload");function G(e,t,r,n){var i={focusSelf:!1,dispatchers:null};if(e==null||e==="series"||t==null||r==null)return i;var o=n.getModel().getComponent(e,t);if(!o)return i;var l=n.getViewOfComponentModel(o);if(!l||!l.findHighDownDispatchers)return i;for(var s=l.findHighDownDispatchers(r),f,u=0;u<s.length;u++)if(process.env.NODE_ENV!=="production"&&!I(s[u])&&T.error("param should be highDownDispatcher"),d.getECData(s[u]).focus==="self"){f=!0;break}return{focusSelf:f,dispatchers:s}}a(G,"findComponentHighDownDispatchers");function Ce(e,t,r){process.env.NODE_ENV!=="production"&&!I(e)&&T.error("param should be highDownDispatcher");var n=d.getECData(e),i=G(n.componentMainType,n.componentIndex,n.componentHighDownName,r),o=i.dispatchers,l=i.focusSelf;o?(l&&x(n.componentMainType,n.componentIndex,r),c.each(o,function(s){return w(s,t)})):(p(n.seriesIndex,n.focus,n.blurScope,r),n.focus==="self"&&x(n.componentMainType,n.componentIndex,r),w(e,t))}a(Ce,"handleGlobalMouseOverForHighDown");function Ie(e,t,r){process.env.NODE_ENV!=="production"&&!I(e)&&T.error("param should be highDownDispatcher"),ae(r);var n=d.getECData(e),i=G(n.componentMainType,n.componentIndex,n.componentHighDownName,r).dispatchers;i?c.each(i,function(o){return b(o,t)}):b(e,t)}a(Ie,"handleGlobalMouseOutForHighDown");function He(e,t,r){if(ue(t)){var n=t.dataType,i=e.getData(n),o=D.queryDataIndex(i,t);c.isArray(o)||(o=[o]),e[t.type===B?"toggleSelect":t.type===L?"select":"unselect"](o,n)}}a(He,"toggleSelectionFromPayload");function Ae(e){var t=e.getAllData();c.each(t,function(r){var n=r.data,i=r.type;n.eachItemGraphicEl(function(o,l){e.isSelected(l,i)?te(o):re(o)})})}a(Ae,"updateSeriesElementSelection");function we(e){var t=[];return e.eachSeries(function(r){var n=r.getAllData();c.each(n,function(i){i.data;var o=i.type,l=r.getSelectedDataIndices();if(l.length>0){var s={dataIndex:l,seriesIndex:r.seriesIndex};o!=null&&(s.dataType=o),t.push(s)}})}),t}a(we,"getAllSelectedIndices");function ie(e,t,r){N(e,!0),g(e,$),le(e,t,r)}a(ie,"enableHoverEmphasis");function oe(e){N(e,!1)}a(oe,"disableHoverEmphasis");function be(e,t,r,n){n?oe(e):ie(e,t,r)}a(be,"toggleHoverEmphasis");function le(e,t,r){var n=d.getECData(e);t!=null?(n.focus=t,n.blurScope=r):n.focus&&(n.focus=null)}a(le,"enableHoverFocus");var q=["emphasis","blur","select"],xe={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function Pe(e,t,r,n){r=r||"itemStyle";for(var i=0;i<q.length;i++){var o=q[i],l=t.getModel([o,r]),s=e.ensureState(o);s.style=l[xe[r]]()}}a(Pe,"setStatesStylesFromModel");function N(e,t){var r=t===!1,n=e;e.highDownSilentOnTouch&&(n.__highDownSilentOnTouch=e.highDownSilentOnTouch),(!r||n.__highDownDispatcher)&&(n.__highByOuter=n.__highByOuter||0,n.__highDownDispatcher=!r)}a(N,"setAsHighDownDispatcher");function I(e){return!!(e&&e.__highDownDispatcher)}a(I,"isHighDownDispatcher");function Le(e){var t=Y[e];return t==null&&V<=32&&(t=Y[e]=V++),t}a(Le,"getHighlightDigit");function ue(e){var t=e.type;return t===L||t===J||t===B}a(ue,"isSelectChangePayload");function Be(e){var t=e.type;return t===Z||t===j}a(Be,"isHighDownPayload");function Fe(e){var t=z(e);t.normalFill=e.style.fill,t.normalStroke=e.style.stroke;var r=e.states.select||{};t.selectFill=r.style&&r.style.fill||null,t.selectStroke=r.style&&r.style.stroke||null}a(Fe,"savePathStates");exports.DISPLAY_STATES=ve;exports.DOWNPLAY_ACTION_TYPE=j;exports.HIGHLIGHT_ACTION_TYPE=Z;exports.HOVER_STATE_BLUR=m;exports.HOVER_STATE_EMPHASIS=O;exports.HOVER_STATE_NORMAL=y;exports.SELECT_ACTION_TYPE=L;exports.SPECIAL_STATES=he;exports.TOGGLE_SELECT_ACTION_TYPE=B;exports.UNSELECT_ACTION_TYPE=J;exports.Z2_EMPHASIS_LIFT=U;exports.Z2_SELECT_LIFT=W;exports.allLeaveBlur=ae;exports.blurComponent=x;exports.blurSeries=p;exports.blurSeriesFromHighlightPayload=Oe;exports.disableHoverEmphasis=oe;exports.enableHoverEmphasis=ie;exports.enableHoverFocus=le;exports.enterBlur=me;exports.enterEmphasis=Te;exports.enterEmphasisWhenMouseOver=w;exports.enterSelect=te;exports.findComponentHighDownDispatchers=G;exports.getAllSelectedIndices=we;exports.getHighlightDigit=Le;exports.handleGlobalMouseOutForHighDown=Ie;exports.handleGlobalMouseOverForHighDown=Ce;exports.isHighDownDispatcher=I;exports.isHighDownPayload=Be;exports.isSelectChangePayload=ue;exports.leaveBlur=ee;exports.leaveEmphasis=ye;exports.leaveEmphasisWhenMouseOut=b;exports.leaveSelect=re;exports.savePathStates=Fe;exports.setAsHighDownDispatcher=N;exports.setDefaultStateProxy=$;exports.setStatesFlag=de;exports.setStatesStylesFromModel=Pe;exports.toggleHoverEmphasis=be;exports.toggleSelectionFromPayload=He;exports.updateSeriesElementSelection=Ae;
