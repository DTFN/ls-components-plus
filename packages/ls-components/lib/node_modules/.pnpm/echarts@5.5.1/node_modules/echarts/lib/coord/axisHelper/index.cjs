"use strict";var E=Object.defineProperty;var c=(e,t)=>E(e,"name",{value:t,configurable:!0});Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const v=require("../../../../../../zrender@5.6.0/node_modules/zrender/lib/core/util/index.cjs"),h=require("../../scale/Ordinal/index.cjs"),I=require("../../scale/Interval/index.cjs"),S=require("../../scale/Scale/index.cjs"),M=require("../../layout/barGrid/index.cjs"),O=require("../../../../../../zrender@5.6.0/node_modules/zrender/lib/core/BoundingRect/index.cjs"),C=require("../../scale/Time/index.cjs"),F=require("../../scale/Log/index.cjs"),q=require("../../data/helper/dataStackHelper/index.cjs"),A=require("../scaleRawExtentInfo/index.cjs");function d(e,t){var r=e.type,a=A.ensureScaleRawExtentInfo(e,t,e.getExtent()).calculate();e.setBlank(a.isBlank);var n=a.min,l=a.max,u=t.ecModel;if(u&&r==="time"){var o=M.prepareLayoutBarSeries("bar",u),i=!1;if(v.each(o,function(x){i=i||x.getBaseAxis()===t.axis}),i){var s=M.makeColumnLayout(o),f=R(n,l,t,s);n=f.min,l=f.max}}return{extent:[n,l],fixMin:a.minFixed,fixMax:a.maxFixed}}c(d,"getScaleExtent");function R(e,t,r,a){var n=r.axis.getExtent(),l=n[1]-n[0],u=M.retrieveColumnLayout(a,r.axis);if(u===void 0)return{min:e,max:t};var o=1/0;v.each(u,function(g){o=Math.min(g.offset,o)});var i=-1/0;v.each(u,function(g){i=Math.max(g.offset+g.width,i)}),o=Math.abs(o),i=Math.abs(i);var s=o+i,f=t-e,x=1-(o+i)/l,m=f/x-f;return t+=m*(i/s),e-=m*(o/s),{min:e,max:t}}c(R,"adjustScaleForOverflow");function k(e,t){var r=t,a=d(e,r),n=a.extent,l=r.get("splitNumber");e instanceof F.default&&(e.base=r.get("logBase"));var u=e.type,o=r.get("interval"),i=u==="interval"||u==="time";e.setExtent(n[0],n[1]),e.calcNiceExtent({splitNumber:l,fixMin:a.fixMin,fixMax:a.fixMax,minInterval:i?r.get("minInterval"):null,maxInterval:i?r.get("maxInterval"):null}),o!=null&&e.setInterval&&e.setInterval(o)}c(k,"niceScaleExtent");function D(e,t){if(t=t||e.get("type"),t)switch(t){case"category":return new h.default({ordinalMeta:e.getOrdinalMeta?e.getOrdinalMeta():e.getCategories(),extent:[1/0,-1/0]});case"time":return new C.default({locale:e.ecModel.getLocaleModel(),useUTC:e.ecModel.get("useUTC")});default:return new(S.default.getClass(t)||I.default)}}c(D,"createScaleByModel");function T(e){var t=e.scale.getExtent(),r=t[0],a=t[1];return!(r>0&&a>0||r<0&&a<0)}c(T,"ifAxisCrossZero");function y(e){var t=e.getLabelModel().get("formatter"),r=e.type==="category"?e.scale.getExtent()[0]:null;return e.scale.type==="time"?function(a){return function(n,l){return e.scale.getFormattedLabel(n,l,a)}}(t):v.isString(t)?function(a){return function(n){var l=e.scale.getLabel(n),u=a.replace("{value}",l??"");return u}}(t):v.isFunction(t)?function(a){return function(n,l){return r!=null&&(l=n.value-r),a(w(e,n),l,n.level!=null?{level:n.level}:null)}}(t):function(a){return e.scale.getLabel(a)}}c(y,"makeLabelFormatter");function w(e,t){return e.type==="category"?e.scale.getLabel(t):t.value}c(w,"getAxisRawValue");function B(e){var t=e.model,r=e.scale;if(!(!t.get(["axisLabel","show"])||r.isBlank())){var a,n,l=r.getExtent();r instanceof h.default?n=r.count():(a=r.getTicks(),n=a.length);var u=e.getLabelModel(),o=y(e),i,s=1;n>40&&(s=Math.ceil(n/40));for(var f=0;f<n;f+=s){var x=a?a[f]:{value:l[0]+f},m=o(x,f),g=u.getTextRect(m),b=N(g,u.get("rotate")||0);i?i.union(b):i=b}return i}}c(B,"estimateLabelUnionRect");function N(e,t){var r=t*Math.PI/180,a=e.width,n=e.height,l=a*Math.abs(Math.cos(r))+Math.abs(n*Math.sin(r)),u=a*Math.abs(Math.sin(r))+Math.abs(n*Math.cos(r)),o=new O.default(e.x,e.y,l,u);return o}c(N,"rotateTextRect");function L(e){var t=e.get("interval");return t??"auto"}c(L,"getOptionCategoryInterval");function U(e){return e.type==="category"&&L(e.getLabelModel())===0}c(U,"shouldShowAllLabels");function p(e,t){var r={};return v.each(e.mapDimensionsAll(t),function(a){r[q.getStackedDimension(e,a)]=!0}),v.keys(r)}c(p,"getDataDimensionsOnAxis");function P(e,t,r){t&&v.each(p(t,r),function(a){var n=t.getApproximateExtent(a);n[0]<e[0]&&(e[0]=n[0]),n[1]>e[1]&&(e[1]=n[1])})}c(P,"unionAxisExtentFromData");exports.createScaleByModel=D;exports.estimateLabelUnionRect=B;exports.getAxisRawValue=w;exports.getDataDimensionsOnAxis=p;exports.getOptionCategoryInterval=L;exports.getScaleExtent=d;exports.ifAxisCrossZero=T;exports.makeLabelFormatter=y;exports.niceScaleExtent=k;exports.shouldShowAllLabels=U;exports.unionAxisExtentFromData=P;
