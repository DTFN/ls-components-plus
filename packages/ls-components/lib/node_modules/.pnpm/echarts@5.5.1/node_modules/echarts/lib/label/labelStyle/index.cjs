"use strict";var q=Object.defineProperty;var h=(r,e)=>q(r,"name",{value:e,configurable:!0});Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const m=require("../../../../../../zrender@5.6.0/node_modules/zrender/lib/graphic/Text/index.cjs"),g=require("../../../../../../zrender@5.6.0/node_modules/zrender/lib/core/util/index.cjs"),w=require("../../util/states/index.cjs"),P=require("../../util/log/index.cjs"),W=require("../../util/model/index.cjs");require("../../util/graphic/index.cjs");const B=require("../../animation/basicTransition/index.cjs");var I={};function _(r,e){for(var a=0;a<w.SPECIAL_STATES.length;a++){var i=w.SPECIAL_STATES[a],n=e[i],o=r.ensureState(i);o.style=o.style||{},o.style.text=n}var f=r.currentStates.slice();r.clearStates(!0),r.setStyle({text:e.normal}),r.useStates(f,!0)}h(_,"setLabelText");function O(r,e,a){var i=r.labelFetcher,n=r.labelDataIndex,o=r.labelDimIndex,f=e.normal,t;i&&(t=i.getFormattedLabel(n,"normal",null,o,f&&f.get("formatter"),a!=null?{interpolatedValue:a}:null)),t==null&&(t=g.isFunction(r.defaultText)?r.defaultText(n,r,a):r.defaultText);for(var l={normal:t},v=0;v<w.SPECIAL_STATES.length;v++){var u=w.SPECIAL_STATES[v],s=e[u];l[u]=g.retrieve2(i?i.getFormattedLabel(n,u,null,o,s&&s.get("formatter")):null,t)}return l}h(O,"getLabelText");function x(r,e,a,i){a=a||I;for(var n=r instanceof m.default,o=!1,f=0;f<w.DISPLAY_STATES.length;f++){var t=e[w.DISPLAY_STATES[f]];if(t&&t.getShallow("show")){o=!0;break}}var l=n?r:r.getTextContent();if(o){n||(l||(l=new m.default,r.setTextContent(l)),r.stateProxy&&(l.stateProxy=r.stateProxy));var v=O(a,e),u=e.normal,s=!!u.getShallow("show"),d=p(u,i&&i.normal,a,!1,!n);d.text=v.normal,n||r.setTextConfig(E(u,a,!1));for(var f=0;f<w.SPECIAL_STATES.length;f++){var b=w.SPECIAL_STATES[f],t=e[b];if(t){var L=l.ensureState(b),c=!!g.retrieve2(t.getShallow("show"),s);if(c!==s&&(L.ignore=!c),L.style=p(t,i&&i[b],a,!0,!n),L.style.text=v[b],!n){var T=r.ensureState(b);T.textConfig=E(t,a,!0)}}}l.silent=!!u.getShallow("silent"),l.style.x!=null&&(d.x=l.style.x),l.style.y!=null&&(d.y=l.style.y),l.ignore=!s,l.useStyle(d),l.dirty(),a.enableTextSetter&&(S(l).setLabelText=function(C){var A=O(a,e,C);_(l,A)})}else l&&(l.ignore=!0);r.dirty()}h(x,"setLabelStyle");function X(r,e){e=e||"label";for(var a={normal:r.getModel(e)},i=0;i<w.SPECIAL_STATES.length;i++){var n=w.SPECIAL_STATES[i];a[n]=r.getModel([n,e])}return a}h(X,"getLabelStatesModels");function p(r,e,a,i,n){var o={};return Y(o,r,a,i,n),e&&g.extend(o,e),o}h(p,"createTextStyle");function E(r,e,a){e=e||{};var i={},n,o=r.getShallow("rotate"),f=g.retrieve2(r.getShallow("distance"),a?null:5),t=r.getShallow("offset");return n=r.getShallow("position")||(a?null:"inside"),n==="outside"&&(n=e.defaultOutsidePosition||"top"),n!=null&&(i.position=n),t!=null&&(i.offset=t),o!=null&&(o*=Math.PI/180,i.rotation=o),f!=null&&(i.distance=f),i.outsideFill=r.get("color")==="inherit"?e.inheritColor||null:"auto",i}h(E,"createTextConfig");function Y(r,e,a,i,n){a=a||I;var o=e.ecModel,f=o&&o.option.textStyle,t=z(e),l;if(t){l={};for(var v in t)if(t.hasOwnProperty(v)){var u=e.getModel(["rich",v]);R(l[v]={},u,f,a,i,n,!1,!0)}}l&&(r.rich=l);var s=e.get("overflow");s&&(r.overflow=s);var d=e.get("minMargin");d!=null&&(r.margin=d),R(r,e,f,a,i,n,!0,!1)}h(Y,"setTextStyleCommon");function z(r){for(var e;r&&r!==r.ecModel;){var a=(r.option||I).rich;if(a){e=e||{};for(var i=g.keys(a),n=0;n<i.length;n++){var o=i[n];e[o]=1}}r=r.parentModel}return e}h(z,"getRichItemNames");var V=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],k=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],F=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function R(r,e,a,i,n,o,f,t){a=!n&&a||I;var l=i&&i.inheritColor,v=e.getShallow("color"),u=e.getShallow("textBorderColor"),s=g.retrieve2(e.getShallow("opacity"),a.opacity);(v==="inherit"||v==="auto")&&(process.env.NODE_ENV!=="production"&&v==="auto"&&P.deprecateReplaceLog("color: 'auto'","color: 'inherit'"),l?v=l:v=null),(u==="inherit"||u==="auto")&&(process.env.NODE_ENV!=="production"&&u==="auto"&&P.deprecateReplaceLog("color: 'auto'","color: 'inherit'"),l?u=l:u=null),o||(v=v||a.color,u=u||a.textBorderColor),v!=null&&(r.fill=v),u!=null&&(r.stroke=u);var d=g.retrieve2(e.getShallow("textBorderWidth"),a.textBorderWidth);d!=null&&(r.lineWidth=d);var b=g.retrieve2(e.getShallow("textBorderType"),a.textBorderType);b!=null&&(r.lineDash=b);var L=g.retrieve2(e.getShallow("textBorderDashOffset"),a.textBorderDashOffset);L!=null&&(r.lineDashOffset=L),!n&&s==null&&!t&&(s=i&&i.defaultOpacity),s!=null&&(r.opacity=s),!n&&!o&&r.fill==null&&i.inheritColor&&(r.fill=i.inheritColor);for(var c=0;c<V.length;c++){var T=V[c],C=g.retrieve2(e.getShallow(T),a[T]);C!=null&&(r[T]=C)}for(var c=0;c<k.length;c++){var T=k[c],C=e.getShallow(T);C!=null&&(r[T]=C)}if(r.verticalAlign==null){var A=e.getShallow("baseline");A!=null&&(r.verticalAlign=A)}if(!f||!i.disableBox){for(var c=0;c<F.length;c++){var T=F[c],C=e.getShallow(T);C!=null&&(r[T]=C)}var D=e.getShallow("borderType");D!=null&&(r.borderDash=D),(r.backgroundColor==="auto"||r.backgroundColor==="inherit")&&l&&(process.env.NODE_ENV!=="production"&&r.backgroundColor==="auto"&&P.deprecateReplaceLog("backgroundColor: 'auto'","backgroundColor: 'inherit'"),r.backgroundColor=l),(r.borderColor==="auto"||r.borderColor==="inherit")&&l&&(process.env.NODE_ENV!=="production"&&r.borderColor==="auto"&&P.deprecateReplaceLog("borderColor: 'auto'","borderColor: 'inherit'"),r.borderColor=l)}}h(R,"setTokenTextStyle");function H(r,e){var a=e&&e.getModel("textStyle");return g.trim([r.fontStyle||a&&a.getShallow("fontStyle")||"",r.fontWeight||a&&a.getShallow("fontWeight")||"",(r.fontSize||a&&a.getShallow("fontSize")||12)+"px",r.fontFamily||a&&a.getShallow("fontFamily")||"sans-serif"].join(" "))}h(H,"getFont");var S=W.makeInner();function j(r,e,a,i){if(r){var n=S(r);n.prevValue=n.value,n.value=a;var o=e.normal;n.valueAnimation=o.get("valueAnimation"),n.valueAnimation&&(n.precision=o.get("precision"),n.defaultInterpolatedText=i,n.statesModels=e)}}h(j,"setLabelValueAnimation");function G(r,e,a,i,n){var o=S(r);if(!o.valueAnimation||o.prevValue===o.value)return;var f=o.defaultInterpolatedText,t=g.retrieve2(o.interpolatedValue,o.prevValue),l=o.value;function v(u){var s=W.interpolateRawValues(a,o.precision,t,l,u);o.interpolatedValue=u===1?null:s;var d=O({labelDataIndex:e,labelFetcher:n,defaultText:f?f(s):s+""},o.statesModels,s);_(r,d)}h(v,"during"),r.percent=0,(o.prevValue==null?B.initProps:B.updateProps)(r,{percent:1},i,e,null,v)}h(G,"animateLabelValue");exports.animateLabelValue=G;exports.createTextConfig=E;exports.createTextStyle=p;exports.getFont=H;exports.getLabelStatesModels=X;exports.labelInner=S;exports.setLabelStyle=x;exports.setLabelText=_;exports.setLabelValueAnimation=j;
