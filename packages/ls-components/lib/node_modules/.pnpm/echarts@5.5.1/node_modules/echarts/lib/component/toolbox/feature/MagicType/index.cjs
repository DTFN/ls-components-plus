"use strict";var O=Object.defineProperty;var s=(a,n)=>O(a,"name",{value:n,configurable:!0});Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const w=require("../../../../../../../../tslib@2.3.0/node_modules/tslib/tslib.es6/index.cjs"),z=require("../../../../core/echarts/index.cjs"),l=require("../../../../../../../../zrender@5.6.0/node_modules/zrender/lib/core/util/index.cjs"),M=require("../../featureManager/index.cjs"),q=require("../../../../util/model/index.cjs");var L="__ec_magicType_stack__",N=[["line","bar"],["stack"]],R=function(a){w.__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return s(n,"MagicType"),n.prototype.getIcons=function(){var t=this.model,r=t.get("icon"),e={};return l.each(t.get("type"),function(i){r[i]&&(e[i]=r[i])}),e},n.getDefaultOption=function(t){var r={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:t.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return r},n.prototype.onclick=function(t,r,e){var i=this.model,v=i.get(["seriesIndex",e]);if(S[e]){var c={series:[]},T=s(function(o){var p=o.subType,y=o.id,m=S[e](p,y,o,i);m&&(l.defaults(m,o.option),c.series.push(m));var f=o.coordinateSystem;if(f&&f.type==="cartesian2d"&&(e==="line"||e==="bar")){var k=f.getAxesByScale("ordinal")[0];if(k){var _=k.dim,u=_+"Axis",I=o.getReferringComponents(u,q.SINGLE_REFERRING).models[0],g=I.componentIndex;c[u]=c[u]||[];for(var b=0;b<=g;b++)c[u][g]=c[u][g]||{};c[u][g].boundaryGap=e==="bar"}}},"generateNewSeriesTypes");l.each(N,function(o){l.indexOf(o,e)>=0&&l.each(o,function(p){i.setIconStatus(p,"normal")})}),i.setIconStatus(e,"emphasis"),t.eachComponent({mainType:"series",query:v==null?null:{seriesIndex:v}},T);var d,h=e;e==="stack"&&(d=l.merge({stack:i.option.title.tiled,tiled:i.option.title.stack},i.option.title),i.get(["iconStatus",e])!=="emphasis"&&(h="tiled")),r.dispatchAction({type:"changeMagicType",currentType:h,newOption:c,newTitle:d,featureName:"magicType"})}},n}(M.ToolboxFeature),S={line:s(function(a,n,t,r){if(a==="bar")return l.merge({id:n,type:"line",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},r.get(["option","line"])||{},!0)},"line"),bar:s(function(a,n,t,r){if(a==="line")return l.merge({id:n,type:"bar",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},r.get(["option","bar"])||{},!0)},"bar"),stack:s(function(a,n,t,r){var e=t.get("stack")===L;if(a==="line"||a==="bar")return r.setIconStatus("stack",e?"normal":"emphasis"),l.merge({id:n,stack:e?"":L},r.get(["option","stack"])||{},!0)},"stack")};z.registerAction({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(a,n){n.mergeOption(a.newOption)});exports.default=R;
