"use strict";var U=Object.defineProperty;var q=(o,r)=>U(o,"name",{value:r,configurable:!0});Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const H=require("../helper/index.cjs"),k=require("../../../util/vendor/index.cjs");function W(o,r){var v=[];return r.diff(o).add(function(a){v.push({cmd:"+",idx:a})}).update(function(a,i){v.push({cmd:"=",idx:i,idx1:a})}).remove(function(a){v.push({cmd:"-",idx:a})}).execute(),v}q(W,"diffData");function Z(o,r,v,a,i,$,J,X){for(var L=W(o,r),h=[],g=[],l=[],N=[],M=[],p=[],P=[],T=H.prepareDataCoordInfo(i,r,J),_=o.getLayout("points")||[],y=r.getLayout("points")||[],s=0;s<L.length;s++){var c=L[s],d=!0,n=void 0,t=void 0;switch(c.cmd){case"=":n=c.idx*2,t=c.idx1*2;var A=_[n],C=_[n+1],j=y[t],O=y[t+1];(isNaN(A)||isNaN(C))&&(A=j,C=O),h.push(A,C),g.push(j,O),l.push(v[n],v[n+1]),N.push(a[t],a[t+1]),P.push(r.getRawIndex(c.idx1));break;case"+":var f=c.idx,V=T.dataDimsForPoint,z=i.dataToPoint([r.get(V[0],f),r.get(V[1],f)]);t=f*2,h.push(z[0],z[1]),g.push(y[t],y[t+1]);var B=H.getStackedOnPoint(T,i,r,f);l.push(B[0],B[1]),N.push(a[t],a[t+1]),P.push(r.getRawIndex(f));break;case"-":d=!1}d&&(M.push(c),p.push(p.length))}p.sort(function(K,Q){return P[K]-P[Q]});for(var b=h.length,F=k.createFloat32Array(b),R=k.createFloat32Array(b),S=k.createFloat32Array(b),m=k.createFloat32Array(b),E=[],s=0;s<p.length;s++){var G=p[s],e=s*2,u=G*2;F[e]=h[u],F[e+1]=h[u+1],R[e]=g[u],R[e+1]=g[u+1],S[e]=l[u],S[e+1]=l[u+1],m[e]=N[u],m[e+1]=N[u+1],E[s]=M[G]}return{current:F,next:R,stackedOnCurrent:S,stackedOnNext:m,status:E}}q(Z,"lineAnimationDiff");exports.default=Z;
