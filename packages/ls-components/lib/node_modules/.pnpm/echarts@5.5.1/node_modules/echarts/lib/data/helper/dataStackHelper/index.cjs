"use strict";var b=Object.defineProperty;var s=(e,a)=>b(e,"name",{value:a,configurable:!0});Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const C=require("../../../../../../../zrender@5.6.0/node_modules/zrender/lib/core/util/index.cjs"),p=require("../SeriesDataSchema/index.cjs");function B(e,a,u){u=u||{};var l=u.byIndex,h=u.stackedCoordDimension,r,c,m;E(a)?r=a:(c=a.schema,r=c.dimensions,m=a.store);var g=!!(e&&e.get("stack")),n,i,d,o;if(C.each(r,function(t,x){C.isString(t)&&(r[x]=t={name:t}),g&&!t.isExtraCoord&&(!l&&!n&&t.ordinalMeta&&(n=t),!i&&t.type!=="ordinal"&&t.type!=="time"&&(!h||h===t.coordDim)&&(i=t))}),i&&!l&&!n&&(l=!0),i){d="__\0ecstackresult_"+e.id,o="__\0ecstackedover_"+e.id,n&&(n.createInvertedIndices=!0);var y=i.coordDim,D=i.type,v=0;C.each(r,function(t){t.coordDim===y&&v++});var S={name:d,coordDim:y,coordDimIndex:v,type:D,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:r.length},k={name:o,coordDim:o,coordDimIndex:v+1,type:D,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:r.length+1};c?(m&&(S.storeDimIndex=m.ensureCalculationDimension(o,D),k.storeDimIndex=m.ensureCalculationDimension(d,D)),c.appendCalculationDimension(S),c.appendCalculationDimension(k)):(r.push(S),r.push(k))}return{stackedDimension:i&&i.name,stackedByDimension:n&&n.name,isStackedByIndex:l,stackedOverDimension:o,stackResultDimension:d}}s(B,"enableDataStack");function E(e){return!p.isSeriesDataSchema(e.schema)}s(E,"isLegacyDimensionsInput");function f(e,a){return!!a&&a===e.getCalculationInfo("stackedDimension")}s(f,"isDimensionStacked");function _(e,a){return f(e,a)?e.getCalculationInfo("stackResultDimension"):a}s(_,"getStackedDimension");exports.enableDataStack=B;exports.getStackedDimension=_;exports.isDimensionStacked=f;
