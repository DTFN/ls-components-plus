"use strict";var V=Object.defineProperty;var o=(r,n)=>V(r,"name",{value:n,configurable:!0});Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const p=require("../../util/model/index.cjs"),v=require("../../../../../../zrender@5.6.0/node_modules/zrender/lib/core/util/index.cjs"),F=require("../../../../../../zrender@5.6.0/node_modules/zrender/lib/animation/Animator/index.cjs"),q=require("../../../../../../zrender@5.6.0/node_modules/zrender/lib/graphic/Displayable/index.cjs"),B=require("../basicTransition/index.cjs");require("../../util/graphic/index.cjs");const M=require("../../util/log/index.cjs"),R=require("../../../../../../zrender@5.6.0/node_modules/zrender/lib/core/Transformable/index.cjs"),C=require("../../../../../../zrender@5.6.0/node_modules/zrender/lib/graphic/Path/index.cjs");var w={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},O=v.keys(w),y=v.reduce(R.TRANSFORMABLE_PROPS,function(r,n){return r[n]=1,r},{}),x=R.TRANSFORMABLE_PROPS.join(", "),P=["","style","shape","extra"],N=p.makeInner();function _(r,n,a,e,s){var i=r+"Animation",t=B.getAnimationConfig(r,e,s)||{},u=N(n).userDuring;return t.duration>0&&(t.during=u?v.bind(H,{el:n,userDuring:u}):null,t.setToFinal=!0,t.scope=r),v.extend(t,a[i]),t}o(_,"getElementAnimationConfig");function U(r,n,a,e){e=e||{};var s=e.dataIndex,i=e.isInit,t=e.clearStyle,u=a.isAnimationEnabled(),g=N(r),l=n.style;g.userDuring=n.during;var f={},c={};if(Q(r,n,c),L("shape",n,c),L("extra",n,c),!i&&u&&(J(r,n,f),m("shape",r,n,f),m("extra",r,n,f),W(r,n,l,f)),c.style=l,z(r,c,t),j(r,n),u)if(i){var d={};v.each(P,function(h){var D=h?n[h]:n;D&&D.enterFrom&&(h&&(d[h]=d[h]||{}),v.extend(h?d[h]:d,D.enterFrom))});var S=_("enter",r,n,a,s);S.duration>0&&r.animateFrom(d,S)}else G(r,n,s||0,a,f);b(r,n),l?r.dirty():r.markRedraw()}o(U,"applyUpdateTransition");function b(r,n){for(var a=N(r).leaveToProps,e=0;e<P.length;e++){var s=P[e],i=s?n[s]:n;i&&i.leaveTo&&(a||(a=N(r).leaveToProps={}),s&&(a[s]=a[s]||{}),v.extend(s?a[s]:a,i.leaveTo))}}o(b,"updateLeaveTo");function Y(r,n,a,e){if(r){var s=r.parent,i=N(r).leaveToProps;if(i){var t=_("update",r,n,a,0);t.done=function(){s.remove(r)},r.animateTo(i,t)}else s.remove(r)}}o(Y,"applyLeaveTransition");function T(r){return r==="all"}o(T,"isTransitionAll");function z(r,n,a){var e=n.style;if(!r.isGroup&&e){if(a){r.useStyle({});for(var s=r.animators,i=0;i<s.length;i++){var t=s[i];t.targetName==="style"&&t.changeTarget(r.style)}}r.setStyle(e)}n&&(n.style=null,n&&r.attr(n),n.style=e)}o(z,"applyPropsDirectly");function G(r,n,a,e,s){if(s){var i=_("update",r,n,e,a);i.duration>0&&r.animateFrom(s,i)}}o(G,"applyPropsTransition");function j(r,n){v.hasOwn(n,"silent")&&(r.silent=n.silent),v.hasOwn(n,"ignore")&&(r.ignore=n.ignore),r instanceof q.default&&v.hasOwn(n,"invisible")&&(r.invisible=n.invisible),r instanceof C.default&&v.hasOwn(n,"autoBatch")&&(r.autoBatch=n.autoBatch)}o(j,"applyMiscProps");var E={},X={setTransform:o(function(r,n){return process.env.NODE_ENV!=="production"&&v.assert(v.hasOwn(y,r),"Only "+x+" available in `setTransform`."),E.el[r]=n,this},"setTransform"),getTransform:o(function(r){return process.env.NODE_ENV!=="production"&&v.assert(v.hasOwn(y,r),"Only "+x+" available in `getTransform`."),E.el[r]},"getTransform"),setShape:o(function(r,n){process.env.NODE_ENV!=="production"&&A(r);var a=E.el,e=a.shape||(a.shape={});return e[r]=n,a.dirtyShape&&a.dirtyShape(),this},"setShape"),getShape:o(function(r){process.env.NODE_ENV!=="production"&&A(r);var n=E.el.shape;if(n)return n[r]},"getShape"),setStyle:o(function(r,n){process.env.NODE_ENV!=="production"&&A(r);var a=E.el,e=a.style;return e&&(process.env.NODE_ENV!=="production"&&v.eqNaN(n)&&M.warn("style."+r+" must not be assigned with NaN."),e[r]=n,a.dirtyStyle&&a.dirtyStyle()),this},"setStyle"),getStyle:o(function(r){process.env.NODE_ENV!=="production"&&A(r);var n=E.el.style;if(n)return n[r]},"getStyle"),setExtra:o(function(r,n){process.env.NODE_ENV!=="production"&&A(r);var a=E.el.extra||(E.el.extra={});return a[r]=n,this},"setExtra"),getExtra:o(function(r){process.env.NODE_ENV!=="production"&&A(r);var n=E.el.extra;if(n)return n[r]},"getExtra")};function A(r){if(process.env.NODE_ENV!=="production"&&(r==="transition"||r==="enterFrom"||r==="leaveTo"))throw new Error('key must not be "'+r+'"')}o(A,"assertNotReserved");function H(){var r=this,n=r.el;if(n){var a=N(n).userDuring,e=r.userDuring;if(a!==e){r.el=r.userDuring=null;return}E.el=n,e(X)}}o(H,"duringCall");function m(r,n,a,e){var s=a[r];if(s){var i=n[r],t;if(i){var u=a.transition,g=s.transition;if(g)if(!t&&(t=e[r]={}),T(g))v.extend(t,i);else for(var l=p.normalizeToArray(g),f=0;f<l.length;f++){var c=l[f],d=i[c];t[c]=d}else if(T(u)||v.indexOf(u,r)>=0){!t&&(t=e[r]={});for(var S=v.keys(i),f=0;f<S.length;f++){var c=S[f],d=i[c];Z(s[c],d)&&(t[c]=d)}}}}}o(m,"prepareShapeOrExtraTransitionFrom");function L(r,n,a){var e=n[r];if(e)for(var s=a[r]={},i=v.keys(e),t=0;t<i.length;t++){var u=i[t];s[u]=F.cloneValue(e[u])}}o(L,"prepareShapeOrExtraAllPropsFinal");function J(r,n,a){for(var e=n.transition,s=T(e)?R.TRANSFORMABLE_PROPS:p.normalizeToArray(e||[]),i=0;i<s.length;i++){var t=s[i];if(!(t==="style"||t==="shape"||t==="extra")){var u=r[t];process.env.NODE_ENV!=="production"&&I(t,"el.transition"),a[t]=u}}}o(J,"prepareTransformTransitionFrom");function Q(r,n,a){for(var e=0;e<O.length;e++){var s=O[e],i=w[s],t=n[s];t&&(a[i[0]]=t[0],a[i[1]]=t[1])}for(var e=0;e<R.TRANSFORMABLE_PROPS.length;e++){var u=R.TRANSFORMABLE_PROPS[e];n[u]!=null&&(a[u]=n[u])}}o(Q,"prepareTransformAllPropsFinal");function W(r,n,a,e){if(a){var s=r.style,i;if(s){var t=a.transition,u=n.transition;if(t&&!T(t)){var g=p.normalizeToArray(t);!i&&(i=e.style={});for(var l=0;l<g.length;l++){var f=g[l],c=s[f];i[f]=c}}else if(r.getAnimationStyleProps&&(T(u)||T(t)||v.indexOf(u,"style")>=0)){var d=r.getAnimationStyleProps(),S=d?d.style:null;if(S){!i&&(i=e.style={});for(var h=v.keys(a),l=0;l<h.length;l++){var f=h[l];if(S[f]){var c=s[f];i[f]=c}}}}}}}o(W,"prepareStyleTransitionFrom");function Z(r,n){return v.isArrayLike(r)?r!==n:r!=null&&isFinite(r)}o(Z,"isNonStyleTransitionEnabled");var I;process.env.NODE_ENV!=="production"&&(I=o(function(r,n){v.hasOwn(y,r)||M.warn("Prop `"+r+"` is not a permitted in `"+n+"`. Only `"+v.keys(y).join("`, `")+"` are permitted.")},"checkTransformPropRefer"));exports.ELEMENT_ANIMATABLE_PROPS=P;exports.applyLeaveTransition=Y;exports.applyUpdateTransition=U;exports.isTransitionAll=T;exports.updateLeaveTo=b;
