"use strict";var S=Object.defineProperty;var d=(r,i)=>S(r,"name",{value:i,configurable:!0});Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const a=require("../../../../../../../zrender@5.6.0/node_modules/zrender/lib/core/util/index.cjs"),b=require("../../../util/graphic/index.cjs"),p=require("../brushHelper/index.cjs"),N=require("../../../util/model/index.cjs");var _=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],P=function(){function r(i,n,t){var e=this;this._targetInfoList=[];var s=y(n,i);a.each(D,function(o,u){(!t||!t.include||a.indexOf(t.include,u)>=0)&&o(s,e._targetInfoList)})}return d(r,"BrushTargetManager"),r.prototype.setOutputRanges=function(i,n){return this.matchOutputRanges(i,n,function(t,e,s){if((t.coordRanges||(t.coordRanges=[])).push(e),!t.coordRange){t.coordRange=e;var o=g[t.brushType](0,s,e);t.__rangeOffset={offset:m[t.brushType](o.values,t.range,[1,1]),xyMinMax:o.xyMinMax}}}),i},r.prototype.matchOutputRanges=function(i,n,t){a.each(i,function(e){var s=this.findTargetInfo(e,n);s&&s!==!0&&a.each(s.coordSyses,function(o){var u=g[e.brushType](1,o,e.range,!0);t(e,u.values,o,n)})},this)},r.prototype.setInputRanges=function(i,n){a.each(i,function(t){var e=this.findTargetInfo(t,n);if(process.env.NODE_ENV!=="production"&&(a.assert(!e||e===!0||t.coordRange,"coordRange must be specified when coord index specified."),a.assert(!e||e!==!0||t.range,"range must be specified in global brush.")),t.range=t.range||[],e&&e!==!0){t.panelId=e.panelId;var s=g[t.brushType](0,e.coordSys,t.coordRange),o=t.__rangeOffset;t.range=o?m[t.brushType](s.values,o.offset,R(s.xyMinMax,o.xyMinMax)):s.values}},this)},r.prototype.makePanelOpts=function(i,n){return a.map(this._targetInfoList,function(t){var e=t.getPanelRect();return{panelId:t.panelId,defaultBrushType:n?n(t):null,clipPath:p.makeRectPanelClipPath(e),isTargetByCursor:p.makeRectIsTargetByCursor(e,i,t.coordSysModel),getLinearBrushOtherExtent:p.makeLinearBrushOtherExtent(e)}})},r.prototype.controlSeries=function(i,n,t){var e=this.findTargetInfo(i,t);return e===!0||e&&a.indexOf(e.coordSyses,n.coordinateSystem)>=0},r.prototype.findTargetInfo=function(i,n){for(var t=this._targetInfoList,e=y(n,i),s=0;s<t.length;s++){var o=t[s],u=i.panelId;if(u){if(o.panelId===u)return o}else for(var c=0;c<x.length;c++)if(x[c](e,o))return o}return!0},r}();function h(r){return r[0]>r[1]&&r.reverse(),r}d(h,"formatMinMax");function y(r,i){return N.parseFinder(r,i,{includeMainTypes:_})}d(y,"parseFinder");var D={grid:d(function(r,i){var n=r.xAxisModels,t=r.yAxisModels,e=r.gridModels,s=a.createHashMap(),o={},u={};!n&&!t&&!e||(a.each(n,function(c){var f=c.axis.grid.model;s.set(f.id,f),o[f.id]=!0}),a.each(t,function(c){var f=c.axis.grid.model;s.set(f.id,f),u[f.id]=!0}),a.each(e,function(c){s.set(c.id,c),o[c.id]=!0,u[c.id]=!0}),s.each(function(c){var f=c.coordinateSystem,l=[];a.each(f.getCartesians(),function(v,B){(a.indexOf(n,v.getAxis("x").model)>=0||a.indexOf(t,v.getAxis("y").model)>=0)&&l.push(v)}),i.push({panelId:"grid--"+c.id,gridModel:c,coordSysModel:c,coordSys:l[0],coordSyses:l,getPanelRect:M.grid,xAxisDeclared:o[c.id],yAxisDeclared:u[c.id]})}))},"grid"),geo:d(function(r,i){a.each(r.geoModels,function(n){var t=n.coordinateSystem;i.push({panelId:"geo--"+n.id,geoModel:n,coordSysModel:n,coordSys:t,coordSyses:[t],getPanelRect:M.geo})})},"geo")},x=[function(r,i){var n=r.xAxisModel,t=r.yAxisModel,e=r.gridModel;return!e&&n&&(e=n.axis.grid.model),!e&&t&&(e=t.axis.grid.model),e&&e===i.gridModel},function(r,i){var n=r.geoModel;return n&&n===i.geoModel}],M={grid:d(function(){return this.coordSys.master.getRect().clone()},"grid"),geo:d(function(){var r=this.coordSys,i=r.getBoundingRect().clone();return i.applyTransform(b.getTransform(r)),i},"geo")},g={lineX:a.curry(T,0),lineY:a.curry(T,1),rect:d(function(r,i,n,t){var e=r?i.pointToData([n[0][0],n[1][0]],t):i.dataToPoint([n[0][0],n[1][0]],t),s=r?i.pointToData([n[0][1],n[1][1]],t):i.dataToPoint([n[0][1],n[1][1]],t),o=[h([e[0],s[0]]),h([e[1],s[1]])];return{values:o,xyMinMax:o}},"rect"),polygon:d(function(r,i,n,t){var e=[[1/0,-1/0],[1/0,-1/0]],s=a.map(n,function(o){var u=r?i.pointToData(o,t):i.dataToPoint(o,t);return e[0][0]=Math.min(e[0][0],u[0]),e[1][0]=Math.min(e[1][0],u[1]),e[0][1]=Math.max(e[0][1],u[0]),e[1][1]=Math.max(e[1][1],u[1]),u});return{values:s,xyMinMax:e}},"polygon")};function T(r,i,n,t){process.env.NODE_ENV!=="production"&&a.assert(n.type==="cartesian2d","lineX/lineY brush is available only in cartesian2d.");var e=n.getAxis(["x","y"][r]),s=h(a.map([0,1],function(u){return i?e.coordToData(e.toLocalCoord(t[u]),!0):e.toGlobalCoord(e.dataToCoord(t[u]))})),o=[];return o[r]=s,o[1-r]=[NaN,NaN],{values:s,xyMinMax:o}}d(T,"axisConvert");var m={lineX:a.curry(I,0),lineY:a.curry(I,1),rect:d(function(r,i,n){return[[r[0][0]-n[0]*i[0][0],r[0][1]-n[0]*i[0][1]],[r[1][0]-n[1]*i[1][0],r[1][1]-n[1]*i[1][1]]]},"rect"),polygon:d(function(r,i,n){return a.map(r,function(t,e){return[t[0]-n[0]*i[e][0],t[1]-n[1]*i[e][1]]})},"polygon")};function I(r,i,n,t){return[i[0]-t[r]*n[0],i[1]-t[r]*n[1]]}d(I,"axisDiffProcessor");function R(r,i){var n=A(r),t=A(i),e=[n[0]/t[0],n[1]/t[1]];return isNaN(e[0])&&(e[0]=1),isNaN(e[1])&&(e[1]=1),e}d(R,"getScales");function A(r){return r?[r[0][1]-r[0][0],r[1][1]-r[1][0]]:[NaN,NaN]}d(A,"getSize");exports.default=P;
