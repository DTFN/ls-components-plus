"use strict";var M=Object.defineProperty;var c=(u,n)=>M(u,"name",{value:n,configurable:!0});Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const T=require("../../../../../../../tslib@2.3.0/node_modules/tslib/tslib.es6/index.cjs"),a=require("../../../../../../../zrender@5.6.0/node_modules/zrender/lib/core/util/index.cjs"),O=require("../../../model/Component/index.cjs"),d=require("../helper/index.cjs"),y=require("../../../util/model/index.cjs");var _=function(){function u(){this.indexList=[],this.indexMap=[]}return c(u,"DataZoomAxisInfo"),u.prototype.add=function(n){this.indexMap[n]||(this.indexList.push(n),this.indexMap[n]=!0)},u}(),I=function(u){T.__extends(n,u);function n(){var t=u!==null&&u.apply(this,arguments)||this;return t.type=n.type,t._autoThrottle=!0,t._noTarget=!0,t._rangePropMode=["percent","percent"],t}return c(n,"DataZoomModel"),n.prototype.init=function(t,e,i){var r=x(t);this.settledOption=r,this.mergeDefaultAndTheme(t,i),this._doInit(r)},n.prototype.mergeOption=function(t){var e=x(t);a.merge(this.option,t,!0),a.merge(this.settledOption,e,!0),this._doInit(e)},n.prototype._doInit=function(t){var e=this.option;this._setDefaultThrottle(t),this._updateRangeUse(t);var i=this.settledOption;a.each([["start","startValue"],["end","endValue"]],function(r,o){this._rangePropMode[o]==="value"&&(e[r[0]]=i[r[0]]=null)},this),this._resetTarget()},n.prototype._resetTarget=function(){var t=this.get("orient",!0),e=this._targetAxisInfoMap=a.createHashMap(),i=this._fillSpecifiedTargetAxis(e);i?this._orient=t||this._makeAutoOrientByTargetAxis():(this._orient=t||"horizontal",this._fillAutoTargetAxisByOrient(e,this._orient)),this._noTarget=!0,e.each(function(r){r.indexList.length&&(this._noTarget=!1)},this)},n.prototype._fillSpecifiedTargetAxis=function(t){var e=!1;return a.each(d.DATA_ZOOM_AXIS_DIMENSIONS,function(i){var r=this.getReferringComponents(d.getAxisMainType(i),y.MULTIPLE_REFERRING);if(r.specified){e=!0;var o=new _;a.each(r.models,function(s){o.add(s.componentIndex)}),t.set(i,o)}},this),e},n.prototype._fillAutoTargetAxisByOrient=function(t,e){var i=this.ecModel,r=!0;if(r){var o=e==="vertical"?"y":"x",s=i.findComponents({mainType:o+"Axis"});f(s,o)}if(r){var s=i.findComponents({mainType:"singleAxis",filter:c(function(l){return l.get("orient",!0)===e},"filter")});f(s,"single")}function f(p,l){var h=p[0];if(h){var g=new _;if(g.add(h.componentIndex),t.set(l,g),r=!1,l==="x"||l==="y"){var A=h.getReferringComponents("grid",y.SINGLE_REFERRING).models[0];A&&a.each(p,function(v){h.componentIndex!==v.componentIndex&&A===v.getReferringComponents("grid",y.SINGLE_REFERRING).models[0]&&g.add(v.componentIndex)})}}}c(f,"setParallelAxis"),r&&a.each(d.DATA_ZOOM_AXIS_DIMENSIONS,function(p){if(r){var l=i.findComponents({mainType:d.getAxisMainType(p),filter:c(function(g){return g.get("type",!0)==="category"},"filter")});if(l[0]){var h=new _;h.add(l[0].componentIndex),t.set(p,h),r=!1}}},this)},n.prototype._makeAutoOrientByTargetAxis=function(){var t;return this.eachTargetAxis(function(e){!t&&(t=e)},this),t==="y"?"vertical":"horizontal"},n.prototype._setDefaultThrottle=function(t){if(t.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var e=this.ecModel.option;this.option.throttle=e.animation&&e.animationDurationUpdate>0?100:20}},n.prototype._updateRangeUse=function(t){var e=this._rangePropMode,i=this.get("rangeMode");a.each([["start","startValue"],["end","endValue"]],function(r,o){var s=t[r[0]]!=null,f=t[r[1]]!=null;s&&!f?e[o]="percent":!s&&f?e[o]="value":i?e[o]=i[o]:s&&(e[o]="percent")})},n.prototype.noTarget=function(){return this._noTarget},n.prototype.getFirstTargetAxisModel=function(){var t;return this.eachTargetAxis(function(e,i){t==null&&(t=this.ecModel.getComponent(d.getAxisMainType(e),i))},this),t},n.prototype.eachTargetAxis=function(t,e){this._targetAxisInfoMap.each(function(i,r){a.each(i.indexList,function(o){t.call(e,r,o)})})},n.prototype.getAxisProxy=function(t,e){var i=this.getAxisModel(t,e);if(i)return i.__dzAxisProxy},n.prototype.getAxisModel=function(t,e){process.env.NODE_ENV!=="production"&&a.assert(t&&e!=null);var i=this._targetAxisInfoMap.get(t);if(i&&i.indexMap[e])return this.ecModel.getComponent(d.getAxisMainType(t),e)},n.prototype.setRawRange=function(t){var e=this.option,i=this.settledOption;a.each([["start","startValue"],["end","endValue"]],function(r){(t[r[0]]!=null||t[r[1]]!=null)&&(e[r[0]]=i[r[0]]=t[r[0]],e[r[1]]=i[r[1]]=t[r[1]])},this),this._updateRangeUse(t)},n.prototype.setCalculatedRange=function(t){var e=this.option;a.each(["start","startValue","end","endValue"],function(i){e[i]=t[i]})},n.prototype.getPercentRange=function(){var t=this.findRepresentativeAxisProxy();if(t)return t.getDataPercentWindow()},n.prototype.getValueRange=function(t,e){if(t==null&&e==null){var i=this.findRepresentativeAxisProxy();if(i)return i.getDataValueWindow()}else return this.getAxisProxy(t,e).getDataValueWindow()},n.prototype.findRepresentativeAxisProxy=function(t){if(t)return t.__dzAxisProxy;for(var e,i=this._targetAxisInfoMap.keys(),r=0;r<i.length;r++)for(var o=i[r],s=this._targetAxisInfoMap.get(o),f=0;f<s.indexList.length;f++){var p=this.getAxisProxy(o,s.indexList[f]);if(p.hostedBy(this))return p;e||(e=p)}return e},n.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},n.prototype.getOrient=function(){return process.env.NODE_ENV!=="production"&&a.assert(this._orient),this._orient},n.type="dataZoom",n.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],n.defaultOption={z:4,filterMode:"filter",start:0,end:100},n}(O.default);function x(u){var n={};return a.each(["start","end","startValue","endValue","throttle"],function(t){u.hasOwnProperty(t)&&(n[t]=u[t])}),n}c(x,"retrieveRawOption");exports.default=I;
