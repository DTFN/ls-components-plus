"use strict";var H=Object.defineProperty;var s=(t,r)=>H(t,"name",{value:r,configurable:!0});Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});require("../../util/graphic/index.cjs");const X=require("../../../../../../zrender@5.6.0/node_modules/zrender/lib/core/OrientedBoundingRect/index.cjs"),J=require("../../../../../../zrender@5.6.0/node_modules/zrender/lib/core/BoundingRect/index.cjs");function K(t){for(var r=[],o=0;o<t.length;o++){var v=t[o];if(!v.defaultAttr.ignore){var d=v.label,u=d.getComputedTransform(),a=d.getBoundingRect(),O=!u||u[1]<1e-5&&u[2]<1e-5,h=d.style.margin||0,i=a.clone();i.applyTransform(u),i.x-=h/2,i.y-=h/2,i.width+=h,i.height+=h;var p=O?new X.default(a,u):null;r.push({label:d,labelLine:v.labelLine,rect:i,localRect:a,obb:p,priority:v.priority,defaultAttr:v.defaultAttr,layoutOption:v.computedLayoutOption,axisAligned:O,transform:u})}}return r}s(K,"prepareLayoutList");function j(t,r,o,v,d,u){var a=t.length;if(a<2)return;t.sort(function(n,L){return n.rect[r]-L.rect[r]});for(var O=0,h,i=!1,p=0,q=0;q<a;q++){var k=t[q],g=k.rect;h=g[r]-O,h<0&&(g[r]-=h,k.label[r]-=h,i=!0);var y=Math.max(-h,0);p+=y,O=g[r]+g[o]}p>0&&u&&P(-p/a,0,a);var A=t[0],l=t[a-1],G,M;B(),G<0&&S(-G,.8),M<0&&S(M,.8),B(),Y(G,M,1),Y(M,G,-1),B(),G<0&&b(-G),M<0&&b(M);function B(){G=A.rect[r]-v,M=d-l.rect[r]-l.rect[o]}s(B,"updateMinMaxGap");function Y(n,L,c){if(n<0){var f=Math.min(L,-n);if(f>0){P(f*c,0,a);var e=f+n;e<0&&S(-e*c,1)}else S(-n*c,1)}}s(Y,"takeBoundsGap");function P(n,L,c){n!==0&&(i=!0);for(var f=L;f<c;f++){var e=t[f],w=e.rect;w[r]+=n,e.label[r]+=n}}s(P,"shiftList");function S(n,L){for(var c=[],f=0,e=1;e<a;e++){var w=t[e-1].rect,z=Math.max(t[e].rect[r]-w[r]-w[o],0);c.push(z),f+=z}if(f){var W=Math.min(Math.abs(n)/f,L);if(n>0)for(var e=0;e<a-1;e++){var E=c[e]*W;P(E,0,e+1)}else for(var e=a-1;e>0;e--){var E=c[e-1]*W;P(-E,e,a)}}}s(S,"squeezeGaps");function b(n){var L=n<0?-1:1;n=Math.abs(n);for(var c=Math.ceil(n/(a-1)),f=0;f<a-1;f++)if(L>0?P(c,0,f+1):P(-c,a-f-1,a),n-=c,n<=0)return}return s(b,"squeezeWhenBailout"),i}s(j,"shiftLayout");function N(t,r,o,v){return j(t,"x","width",r,o,v)}s(N,"shiftLayoutOnX");function Q(t,r,o,v){return j(t,"y","height",r,o,v)}s(Q,"shiftLayoutOnY");function U(t){var r=[];t.sort(function(A,l){return l.priority-A.priority});var o=new J.default(0,0,0,0);function v(A){if(!A.ignore){var l=A.ensureState("emphasis");l.ignore==null&&(l.ignore=!1)}A.ignore=!0}s(v,"hideEl");for(var d=0;d<t.length;d++){var u=t[d],a=u.axisAligned,O=u.localRect,h=u.transform,i=u.label,p=u.labelLine;o.copy(u.rect),o.width-=.1,o.height-=.1,o.x+=.05,o.y+=.05;for(var q=u.obb,k=!1,g=0;g<r.length;g++){var y=r[g];if(o.intersect(y.rect)){if(a&&y.axisAligned){k=!0;break}if(y.obb||(y.obb=new X.default(y.localRect,y.transform)),q||(q=new X.default(O,h)),q.intersect(y.obb)){k=!0;break}}}k?(v(i),p&&v(p)):(i.attr("ignore",u.defaultAttr.ignore),p&&p.attr("ignore",u.defaultAttr.labelGuideIgnore),r.push(u))}}s(U,"hideOverlap");exports.hideOverlap=U;exports.prepareLayoutList=K;exports.shiftLayoutOnX=N;exports.shiftLayoutOnY=Q;
