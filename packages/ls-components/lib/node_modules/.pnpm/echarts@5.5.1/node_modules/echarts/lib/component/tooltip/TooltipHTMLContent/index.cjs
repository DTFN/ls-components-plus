"use strict";var x=Object.defineProperty;var d=(e,t)=>x(e,"name",{value:t,configurable:!0});Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const u=require("../../../../../../../zrender@5.6.0/node_modules/zrender/lib/core/util/index.cjs"),O=require("../../../../../../../zrender@5.6.0/node_modules/zrender/lib/core/event/index.cjs"),H=require("../../../../../../../zrender@5.6.0/node_modules/zrender/lib/core/dom/index.cjs"),g=require("../../../../../../../zrender@5.6.0/node_modules/zrender/lib/core/env/index.cjs"),w=require("../../../util/format/index.cjs"),f=require("../helper/index.cjs"),N=require("../tooltipMarkup/index.cjs");var R=f.toCSSVendorPrefix(f.TRANSITION_VENDOR,"transition"),C=f.toCSSVendorPrefix(f.TRANSFORM_VENDOR,"transform"),D="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(g.default.transform3dSupported?"will-change:transform;":"");function z(e){return e=e==="left"?"right":e==="right"?"left":e==="top"?"bottom":"top",e}d(z,"mirrorPos");function L(e,t,a){if(!u.isString(a)||a==="inside")return"";var r=e.get("backgroundColor"),i=e.get("borderWidth");t=w.convertToColorString(t);var o=z(a),s=Math.max(Math.round(i)*1.5,6),n="",h=C+":",l;u.indexOf(["left","right"],o)>-1?(n+="top:50%",h+="translateY(-50%) rotate("+(l=o==="left"?-225:-45)+"deg)"):(n+="left:50%",h+="translateX(-50%) rotate("+(l=o==="top"?225:45)+"deg)");var v=l*Math.PI/180,p=s+i,m=p*Math.abs(Math.cos(v))+p*Math.abs(Math.sin(v)),_=Math.round(((m-Math.SQRT2*i)/2+Math.SQRT2*i-(m-p)/2)*100)/100;n+=";"+o+":-"+_+"px";var c=t+" solid "+i+"px;",T=["position:absolute;width:"+s+"px;height:"+s+"px;z-index:-1;",n+";"+h+";","border-bottom:"+c,"border-right:"+c,"background-color:"+r+";"];return'<div style="'+T.join("")+'"></div>'}d(L,"assembleArrow");function k(e,t){var a="cubic-bezier(0.23,1,0.32,1)",r=" "+e/2+"s "+a,i="opacity"+r+",visibility"+r;return t||(r=" "+e+"s "+a,i+=g.default.transformSupported?","+C+r:",left"+r+",top"+r),R+":"+i}d(k,"assembleTransition");function S(e,t,a){var r=e.toFixed(0)+"px",i=t.toFixed(0)+"px";if(!g.default.transformSupported)return a?"top:"+i+";left:"+r+";":[["top",i],["left",r]];var o=g.default.transform3dSupported,s="translate"+(o?"3d":"")+"("+r+","+i+(o?",0":"")+")";return a?"top:0;left:0;"+C+":"+s+";":[["top",0],["left",0],[f.TRANSFORM_VENDOR,s]]}d(S,"assembleTransform");function F(e){var t=[],a=e.get("fontSize"),r=e.getTextColor();r&&t.push("color:"+r),t.push("font:"+e.getFont()),a&&t.push("line-height:"+Math.round(a*3/2)+"px");var i=e.get("textShadowColor"),o=e.get("textShadowBlur")||0,s=e.get("textShadowOffsetX")||0,n=e.get("textShadowOffsetY")||0;return i&&o&&t.push("text-shadow:"+s+"px "+n+"px "+o+"px "+i),u.each(["decoration","align"],function(h){var l=e.get(h);l&&t.push("text-"+h+":"+l)}),t.join(";")}d(F,"assembleFont");function V(e,t,a){var r=[],i=e.get("transitionDuration"),o=e.get("backgroundColor"),s=e.get("shadowBlur"),n=e.get("shadowColor"),h=e.get("shadowOffsetX"),l=e.get("shadowOffsetY"),v=e.getModel("textStyle"),p=N.getPaddingFromTooltipModel(e,"html"),m=h+"px "+l+"px "+s+"px "+n;return r.push("box-shadow:"+m),t&&i&&r.push(k(i,a)),o&&r.push("background-color:"+o),u.each(["width","color","radius"],function(_){var c="border-"+_,T=w.toCamelCase(c),y=e.get(T);y!=null&&r.push(c+":"+y+(_==="color"?"":"px"))}),r.push(F(v)),p!=null&&r.push("padding:"+w.normalizeCssArray(p).join("px ")+"px"),r.join(";")+";"}d(V,"assembleCssText");function b(e,t,a,r,i){var o=t&&t.painter;if(a){var s=o&&o.getViewportRoot();s&&H.transformLocalCoord(e,s,a,r,i)}else{e[0]=r,e[1]=i;var n=o&&o.getViewportRootOffset();n&&(e[0]+=n.offsetLeft,e[1]+=n.offsetTop)}e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}d(b,"makeStyleCoord");var q=function(){function e(t,a){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,g.default.wxa)return null;var r=document.createElement("div");r.domBelongToZr=!0,this.el=r;var i=this._zr=t.getZr(),o=a.appendTo,s=o&&(u.isString(o)?document.querySelector(o):u.isDom(o)?o:u.isFunction(o)&&o(t.getDom()));b(this._styleCoord,i,s,t.getWidth()/2,t.getHeight()/2),(s||t.getDom()).appendChild(r),this._api=t,this._container=s;var n=this;r.onmouseenter=function(){n._enterable&&(clearTimeout(n._hideTimeout),n._show=!0),n._inContent=!0},r.onmousemove=function(h){if(h=h||window.event,!n._enterable){var l=i.handler,v=i.painter.getViewportRoot();O.normalizeEvent(v,h,!0),l.dispatch("mousemove",h)}},r.onmouseleave=function(){n._inContent=!1,n._enterable&&n._show&&n.hideLater(n._hideDelay)}}return d(e,"TooltipHTMLContent"),e.prototype.update=function(t){if(!this._container){var a=this._api.getDom(),r=f.getComputedStyle(a,"position"),i=a.style;i.position!=="absolute"&&r!=="absolute"&&(i.position="relative")}var o=t.get("alwaysShowContent");o&&this._moveIfResized(),this._alwaysShowContent=o,this.el.className=t.get("className")||""},e.prototype.show=function(t,a){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var r=this.el,i=r.style,o=this._styleCoord;r.innerHTML?i.cssText=D+V(t,!this._firstShow,this._longHide)+S(o[0],o[1],!0)+("border-color:"+w.convertToColorString(a)+";")+(t.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):i.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},e.prototype.setContent=function(t,a,r,i,o){var s=this.el;if(t==null){s.innerHTML="";return}var n="";if(u.isString(o)&&r.get("trigger")==="item"&&!f.shouldTooltipConfine(r)&&(n=L(r,i,o)),u.isString(t))s.innerHTML=t+n;else if(t){s.innerHTML="",u.isArray(t)||(t=[t]);for(var h=0;h<t.length;h++)u.isDom(t[h])&&t[h].parentNode!==s&&s.appendChild(t[h]);if(n&&s.childNodes.length){var l=document.createElement("div");l.innerHTML=n,s.appendChild(l)}}},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el;return[t.offsetWidth,t.offsetHeight]},e.prototype.moveTo=function(t,a){var r=this._styleCoord;if(b(r,this._zr,this._container,t,a),r[0]!=null&&r[1]!=null){var i=this.el.style,o=S(r[0],r[1]);u.each(o,function(s){i[s[0]]=s[1]})}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],a=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),a*this._zr.getHeight())},e.prototype.hide=function(){var t=this,a=this.el.style;a.visibility="hidden",a.opacity="0",g.default.transform3dSupported&&(a.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return t._longHide=!0},500)},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(u.bind(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var t=this.el.parentNode;t&&t.removeChild(this.el),this.el=this._container=null},e}();exports.default=q;
