"use strict";var N=Object.defineProperty;var D=(n,e)=>N(n,"name",{value:e,configurable:!0});Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const B=require("../../../../../../zrender@5.6.0/node_modules/zrender/lib/core/util/index.cjs"),f=require("../../util/number/index.cjs");function S(n){var e=B.createHashMap();n.eachSeries(function(u){var s=u.get("stack");if(s){var t=e.get(s)||e.set(s,[]),i=u.getData(),a={stackResultDimension:i.getCalculationInfo("stackResultDimension"),stackedOverDimension:i.getCalculationInfo("stackedOverDimension"),stackedDimension:i.getCalculationInfo("stackedDimension"),stackedByDimension:i.getCalculationInfo("stackedByDimension"),isStackedByIndex:i.getCalculationInfo("isStackedByIndex"),data:i,seriesModel:u};if(!a.stackedDimension||!(a.isStackedByIndex||a.stackedByDimension))return;t.length&&i.setCalculationInfo("stackedOnSeries",t[t.length-1].seriesModel),t.push(a)}}),e.each(h)}D(S,"dataStack");function h(n){B.each(n,function(e,u){var s=[],t=[NaN,NaN],i=[e.stackResultDimension,e.stackedOverDimension],a=e.data,g=e.isStackedByIndex,d=e.seriesModel.get("stackStrategy")||"samesign";a.modify(i,function(x,O,m){var r=a.get(e.stackedDimension,m);if(isNaN(r))return t;var k,l;g?l=a.getRawIndex(m):k=a.get(e.stackedByDimension,m);for(var y=NaN,v=u-1;v>=0;v--){var o=n[v];if(g||(l=o.data.rawIndexOf(o.stackedByDimension,k)),l>=0){var c=o.data.getByRawIndex(o.stackResultDimension,l);if(d==="all"||d==="positive"&&c>0||d==="negative"&&c<0||d==="samesign"&&r>=0&&c>0||d==="samesign"&&r<=0&&c<0){r=f.addSafe(r,c),y=c;break}}}return s[0]=r,s[1]=y,s})})}D(h,"calculateStack");exports.default=S;
