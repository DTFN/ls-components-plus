"use strict";var g=Object.defineProperty;var x=(h,t)=>g(h,"name",{value:t,configurable:!0});Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const o=require("../Point/index.cjs");var d=[0,0],c=[0,0],_=new o.default,M=new o.default,p=function(){function h(t,n){this._corners=[],this._axes=[],this._origin=[0,0];for(var e=0;e<4;e++)this._corners[e]=new o.default;for(var e=0;e<2;e++)this._axes[e]=new o.default;t&&this.fromBoundingRect(t,n)}return x(h,"OrientedBoundingRect"),h.prototype.fromBoundingRect=function(t,n){var e=this._corners,r=this._axes,l=t.x,s=t.y,f=l+t.width,i=s+t.height;if(e[0].set(l,s),e[1].set(f,s),e[2].set(f,i),e[3].set(l,i),n)for(var a=0;a<4;a++)e[a].transform(n);o.default.sub(r[0],e[1],e[0]),o.default.sub(r[1],e[3],e[0]),r[0].normalize(),r[1].normalize();for(var a=0;a<2;a++)this._origin[a]=r[a].dot(e[0])},h.prototype.intersect=function(t,n){var e=!0,r=!n;return _.set(1/0,1/0),M.set(0,0),!this._intersectCheckOneSide(this,t,_,M,r,1)&&(e=!1,r)||!this._intersectCheckOneSide(t,this,_,M,r,-1)&&(e=!1,r)||r||o.default.copy(n,e?_:M),e},h.prototype._intersectCheckOneSide=function(t,n,e,r,l,s){for(var f=!0,i=0;i<2;i++){var a=this._axes[i];if(this._getProjMinMaxOnAxis(i,t._corners,d),this._getProjMinMaxOnAxis(i,n._corners,c),d[1]<c[0]||d[0]>c[1]){if(f=!1,l)return f;var u=Math.abs(c[0]-d[1]),v=Math.abs(d[0]-c[1]);Math.min(u,v)>r.len()&&(u<v?o.default.scale(r,a,-u*s):o.default.scale(r,a,v*s))}else if(e){var u=Math.abs(c[0]-d[1]),v=Math.abs(d[0]-c[1]);Math.min(u,v)<e.len()&&(u<v?o.default.scale(e,a,u*s):o.default.scale(e,a,-v*s))}}return f},h.prototype._getProjMinMaxOnAxis=function(t,n,e){for(var r=this._axes[t],l=this._origin,s=n[0].dot(r)+l[t],f=s,i=s,a=1;a<n.length;a++){var u=n[a].dot(r)+l[t];f=Math.min(u,f),i=Math.max(u,i)}e[0]=f,e[1]=i},h}();exports.default=p;
