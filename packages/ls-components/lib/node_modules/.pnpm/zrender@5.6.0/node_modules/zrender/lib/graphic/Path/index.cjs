"use strict";var O=Object.defineProperty;var d=(p,i)=>O(p,"name",{value:i,configurable:!0});Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const T=require("../../../../../../tslib@2.3.0/node_modules/tslib/tslib.es6/index.cjs"),S=require("../Displayable/index.cjs"),E=require("../../core/PathProxy/index.cjs"),g=require("../../contain/path/index.cjs"),o=require("../../core/util/index.cjs"),P=require("../../tool/color/index.cjs"),u=require("../../config/index.cjs"),f=require("../constants/index.cjs"),R=require("../../core/Transformable/index.cjs");var L=o.defaults({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},S.DEFAULT_COMMON_STYLE),D={style:o.defaults({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},S.DEFAULT_COMMON_ANIMATION_PROPS.style)},v=R.TRANSFORMABLE_PROPS.concat(["invisible","culling","z","z2","zlevel","parent"]),m=function(p){T.__extends(i,p);function i(t){return p.call(this,t)||this}return d(i,"Path"),i.prototype.update=function(){var t=this;p.prototype.update.call(this);var e=this.style;if(e.decal){var r=this._decalEl=this._decalEl||new i;r.buildPath===i.prototype.buildPath&&(r.buildPath=function(l){t.buildPath(l,t.shape)}),r.silent=!0;var a=r.style;for(var s in e)a[s]!==e[s]&&(a[s]=e[s]);a.fill=e.fill?e.decal:null,a.decal=null,a.shadowColor=null,e.strokeFirst&&(a.stroke=null);for(var n=0;n<v.length;++n)r[v[n]]=this[v[n]];r.__dirty|=f.REDRAW_BIT}else this._decalEl&&(this._decalEl=null)},i.prototype.getDecalElement=function(){return this._decalEl},i.prototype._init=function(t){var e=o.keys(t);this.shape=this.getDefaultShape();var r=this.getDefaultStyle();r&&this.useStyle(r);for(var a=0;a<e.length;a++){var s=e[a],n=t[s];s==="style"?this.style?o.extend(this.style,n):this.useStyle(n):s==="shape"?o.extend(this.shape,n):p.prototype.attrKV.call(this,s,n)}this.style||this.useStyle({})},i.prototype.getDefaultStyle=function(){return null},i.prototype.getDefaultShape=function(){return{}},i.prototype.canBeInsideText=function(){return this.hasFill()},i.prototype.getInsideTextFill=function(){var t=this.style.fill;if(t!=="none"){if(o.isString(t)){var e=P.lum(t,0);return e>.5?u.DARK_LABEL_COLOR:e>.2?u.LIGHTER_LABEL_COLOR:u.LIGHT_LABEL_COLOR}else if(t)return u.LIGHT_LABEL_COLOR}return u.DARK_LABEL_COLOR},i.prototype.getInsideTextStroke=function(t){var e=this.style.fill;if(o.isString(e)){var r=this.__zr,a=!!(r&&r.isDarkMode()),s=P.lum(t,0)<u.DARK_MODE_THRESHOLD;if(a===s)return e}},i.prototype.buildPath=function(t,e,r){},i.prototype.pathUpdated=function(){this.__dirty&=~f.SHAPE_CHANGED_BIT},i.prototype.getUpdatedPathProxy=function(t){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,t),this.path},i.prototype.createPathProxy=function(){this.path=new E.default(!1)},i.prototype.hasStroke=function(){var t=this.style,e=t.stroke;return!(e==null||e==="none"||!(t.lineWidth>0))},i.prototype.hasFill=function(){var t=this.style,e=t.fill;return e!=null&&e!=="none"},i.prototype.getBoundingRect=function(){var t=this._rect,e=this.style,r=!t;if(r){var a=!1;this.path||(a=!0,this.createPathProxy());var s=this.path;(a||this.__dirty&f.SHAPE_CHANGED_BIT)&&(s.beginPath(),this.buildPath(s,this.shape,!1),this.pathUpdated()),t=s.getBoundingRect()}if(this._rect=t,this.hasStroke()&&this.path&&this.path.len()>0){var n=this._rectStroke||(this._rectStroke=t.clone());if(this.__dirty||r){n.copy(t);var l=e.strokeNoScale?this.getLineScale():1,h=e.lineWidth;if(!this.hasFill()){var c=this.strokeContainThreshold;h=Math.max(h,c??4)}l>1e-10&&(n.width+=h/l,n.height+=h/l,n.x-=h/l/2,n.y-=h/l/2)}return n}return t},i.prototype.contain=function(t,e){var r=this.transformCoordToLocal(t,e),a=this.getBoundingRect(),s=this.style;if(t=r[0],e=r[1],a.contain(t,e)){var n=this.path;if(this.hasStroke()){var l=s.lineWidth,h=s.strokeNoScale?this.getLineScale():1;if(h>1e-10&&(this.hasFill()||(l=Math.max(l,this.strokeContainThreshold)),g.containStroke(n,l/h,t,e)))return!0}if(this.hasFill())return g.contain(n,t,e)}return!1},i.prototype.dirtyShape=function(){this.__dirty|=f.SHAPE_CHANGED_BIT,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},i.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},i.prototype.animateShape=function(t){return this.animate("shape",t)},i.prototype.updateDuringAnimation=function(t){t==="style"?this.dirtyStyle():t==="shape"?this.dirtyShape():this.markRedraw()},i.prototype.attrKV=function(t,e){t==="shape"?this.setShape(e):p.prototype.attrKV.call(this,t,e)},i.prototype.setShape=function(t,e){var r=this.shape;return r||(r=this.shape={}),typeof t=="string"?r[t]=e:o.extend(r,t),this.dirtyShape(),this},i.prototype.shapeChanged=function(){return!!(this.__dirty&f.SHAPE_CHANGED_BIT)},i.prototype.createStyle=function(t){return o.createObject(L,t)},i.prototype._innerSaveToNormal=function(t){p.prototype._innerSaveToNormal.call(this,t);var e=this._normalState;t.shape&&!e.shape&&(e.shape=o.extend({},this.shape))},i.prototype._applyStateObj=function(t,e,r,a,s,n){p.prototype._applyStateObj.call(this,t,e,r,a,s,n);var l=!(e&&a),h;if(e&&e.shape?s?a?h=e.shape:(h=o.extend({},r.shape),o.extend(h,e.shape)):(h=o.extend({},a?this.shape:r.shape),o.extend(h,e.shape)):l&&(h=r.shape),h)if(s){this.shape=o.extend({},this.shape);for(var c={},A=o.keys(h),_=0;_<A.length;_++){var y=A[_];typeof h[y]=="object"?this.shape[y]=h[y]:c[y]=h[y]}this._transitionState(t,{shape:c},n)}else this.shape=h,this.dirtyShape()},i.prototype._mergeStates=function(t){for(var e=p.prototype._mergeStates.call(this,t),r,a=0;a<t.length;a++){var s=t[a];s.shape&&(r=r||{},this._mergeStyle(r,s.shape))}return r&&(e.shape=r),e},i.prototype.getAnimationStyleProps=function(){return D},i.prototype.isZeroArea=function(){return!1},i.extend=function(t){var e=function(a){T.__extends(s,a);function s(n){var l=a.call(this,n)||this;return t.init&&t.init.call(l,n),l}return d(s,"Sub"),s.prototype.getDefaultStyle=function(){return o.clone(t.style)},s.prototype.getDefaultShape=function(){return o.clone(t.shape)},s}(i);for(var r in t)typeof t[r]=="function"&&(e.prototype[r]=t[r]);return e},i.initDefaultProps=function(){var t=i.prototype;t.type="path",t.strokeContainThreshold=5,t.segmentIgnoreThreshold=0,t.subPixelOptimize=!1,t.autoBatch=!1,t.__dirty=f.REDRAW_BIT|f.STYLE_CHANGED_BIT|f.SHAPE_CHANGED_BIT}(),i}(S.default);exports.DEFAULT_PATH_ANIMATION_PROPS=D;exports.DEFAULT_PATH_STYLE=L;exports.default=m;
