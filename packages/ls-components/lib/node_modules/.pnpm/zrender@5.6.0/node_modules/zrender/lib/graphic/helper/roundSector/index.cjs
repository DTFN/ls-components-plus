"use strict";var yv=Object.defineProperty;var S=(v,y)=>yv(v,"name",{value:y,configurable:!0});Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const uv=require("../../../core/util/index.cjs");var fv=Math.PI,av=fv*2,Q=Math.sin,Y=Math.cos,dv=Math.acos,l=Math.atan2,ev=Math.abs,O=Math.sqrt,p=Math.max,b=Math.min,h=1e-4;function iv(v,y,s,u,r,C,Z,G){var d=s-v,i=u-y,o=Z-r,n=G-C,e=n*d-o*i;if(!(e*e<h))return e=(o*(y-C)-n*(v-r))/e,[v+e*d,y+e*i]}S(iv,"intersect");function M(v,y,s,u,r,C,Z){var G=v-s,d=y-u,i=(Z?C:-C)/O(G*G+d*d),o=i*d,n=-i*G,e=v+o,g=y+n,U=s+o,H=u+n,V=(e+U)/2,W=(g+H)/2,m=U-e,P=H-g,B=m*m+P*P,J=r-C,N=e*H-U*g,q=(P<0?-1:1)*O(p(0,J*J*B-N*N)),k=(N*P-m*q)/B,T=(-N*m-P*q)/B,A=(N*P+m*q)/B,D=(-N*m+P*q)/B,F=k-V,K=T-W,L=A-V,w=D-W;return F*F+K*K>L*L+w*w&&(k=A,T=D),{cx:k,cy:T,x0:-o,y0:-n,x1:k*(r/J-1),y1:T*(r/J-1)}}S(M,"computeCornerTangents");function lv(v){var y;if(uv.isArray(v)){var s=v.length;if(!s)return v;s===1?y=[v[0],v[0],0,0]:s===2?y=[v[0],v[0],v[1],v[1]]:s===3?y=v.concat(v[2]):y=v}else y=[v,v,v,v];return y}S(lv,"normalizeCornerRadius");function sv(v,y){var s,u=p(y.r,0),r=p(y.r0||0,0),C=u>0,Z=r>0;if(!(!C&&!Z)){if(C||(u=r,r=0),r>u){var G=u;u=r,r=G}var d=y.startAngle,i=y.endAngle;if(!(isNaN(d)||isNaN(i))){var o=y.cx,n=y.cy,e=!!y.clockwise,g=ev(i-d),U=g>av&&g%av;if(U>h&&(g=U),!(u>h))v.moveTo(o,n);else if(g>av-h)v.moveTo(o+u*Y(d),n+u*Q(d)),v.arc(o,n,u,d,i,!e),r>h&&(v.moveTo(o+r*Y(i),n+r*Q(i)),v.arc(o,n,r,i,d,e));else{var H=void 0,V=void 0,W=void 0,m=void 0,P=void 0,B=void 0,J=void 0,N=void 0,q=void 0,k=void 0,T=void 0,A=void 0,D=void 0,F=void 0,K=void 0,L=void 0,w=u*Y(d),X=u*Q(d),$=r*Y(i),I=r*Q(i),_=g>h;if(_){var rv=y.cornerRadius;rv&&(s=lv(rv),H=s[0],V=s[1],W=s[2],m=s[3]);var E=ev(u-r)/2;if(P=b(E,W),B=b(E,m),J=b(E,H),N=b(E,V),T=q=p(P,B),A=k=p(J,N),(q>h||k>h)&&(D=u*Y(i),F=u*Q(i),K=r*Y(d),L=r*Q(d),g<fv)){var j=iv(w,X,K,L,D,F,$,I);if(j){var x=w-j[0],t=X-j[1],c=D-j[0],vv=F-j[1],ov=1/Q(dv((x*c+t*vv)/(O(x*x+t*t)*O(c*c+vv*vv)))/2),nv=O(j[0]*j[0]+j[1]*j[1]);T=b(q,(u-nv)/(ov+1)),A=b(k,(r-nv)/(ov-1))}}}if(!_)v.moveTo(o+w,n+X);else if(T>h){var z=b(W,T),R=b(m,T),a=M(K,L,w,X,u,z,e),f=M(D,F,$,I,u,R,e);v.moveTo(o+a.cx+a.x0,n+a.cy+a.y0),T<q&&z===R?v.arc(o+a.cx,n+a.cy,T,l(a.y0,a.x0),l(f.y0,f.x0),!e):(z>0&&v.arc(o+a.cx,n+a.cy,z,l(a.y0,a.x0),l(a.y1,a.x1),!e),v.arc(o,n,u,l(a.cy+a.y1,a.cx+a.x1),l(f.cy+f.y1,f.cx+f.x1),!e),R>0&&v.arc(o+f.cx,n+f.cy,R,l(f.y1,f.x1),l(f.y0,f.x0),!e))}else v.moveTo(o+w,n+X),v.arc(o,n,u,d,i,!e);if(!(r>h)||!_)v.lineTo(o+$,n+I);else if(A>h){var z=b(H,A),R=b(V,A),a=M($,I,D,F,r,-R,e),f=M(w,X,K,L,r,-z,e);v.lineTo(o+a.cx+a.x0,n+a.cy+a.y0),A<k&&z===R?v.arc(o+a.cx,n+a.cy,A,l(a.y0,a.x0),l(f.y0,f.x0),!e):(R>0&&v.arc(o+a.cx,n+a.cy,R,l(a.y0,a.x0),l(a.y1,a.x1),!e),v.arc(o,n,r,l(a.cy+a.y1,a.cx+a.x1),l(f.cy+f.y1,f.cx+f.x1),e),z>0&&v.arc(o+f.cx,n+f.cy,z,l(f.y1,f.x1),l(f.y0,f.x0),!e))}else v.lineTo(o+$,n+I),v.arc(o,n,r,i,d,e)}v.closePath()}}}S(sv,"buildPath");exports.buildPath=sv;
