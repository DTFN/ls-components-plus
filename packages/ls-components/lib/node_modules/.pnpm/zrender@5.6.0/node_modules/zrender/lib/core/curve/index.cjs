"use strict";var F=Object.defineProperty;var P=(a,i)=>F(a,"name",{value:i,configurable:!0});Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const L=require("../vector/index.cjs");var O=Math.pow,D=Math.sqrt,k=1e-8,Q=1e-4,B=D(3),T=1/3,R=L.create(),S=L.create(),m=L.create();function j(a){return a>-k&&a<k}P(j,"isAroundZero");function U(a){return a>k||a<-k}P(U,"isNotAroundZero");function M(a,i,u,f,v){var r=1-v;return r*r*(r*a+3*v*i)+v*v*(v*f+3*r*u)}P(M,"cubicAt");function G(a,i,u,f,v){var r=1-v;return 3*(((i-a)*r+2*(u-i)*v)*r+(f-u)*v*v)}P(G,"cubicDerivativeAt");function J(a,i,u,f,v,r){var e=f+3*(i-u)-a,t=3*(u-i*2+a),b=3*(i-a),n=a-v,d=t*t-3*e*b,c=t*b-9*e*n,o=b*b-3*t*n,q=0;if(j(d)&&j(c))if(j(t))r[0]=0;else{var l=-b/t;l>=0&&l<=1&&(r[q++]=l)}else{var s=c*c-4*d*o;if(j(s)){var A=c/d,l=-t/e+A,h=-A/2;l>=0&&l<=1&&(r[q++]=l),h>=0&&h<=1&&(r[q++]=h)}else if(s>0){var E=D(s),g=d*t+1.5*e*(-c+E),N=d*t+1.5*e*(-c-E);g<0?g=-O(-g,T):g=O(g,T),N<0?N=-O(-N,T):N=O(N,T);var l=(-t-(g+N))/(3*e);l>=0&&l<=1&&(r[q++]=l)}else{var z=(2*d*t-3*e*c)/(2*D(d*d*d)),w=Math.acos(z)/3,C=D(d),H=Math.cos(w),l=(-t-2*C*H)/(3*e),h=(-t+C*(H+B*Math.sin(w)))/(3*e),Z=(-t+C*(H-B*Math.sin(w)))/(3*e);l>=0&&l<=1&&(r[q++]=l),h>=0&&h<=1&&(r[q++]=h),Z>=0&&Z<=1&&(r[q++]=Z)}}return q}P(J,"cubicRootAt");function V(a,i,u,f,v){var r=6*u-12*i+6*a,e=9*i+3*f-3*a-9*u,t=3*i-3*a,b=0;if(j(e)){if(U(r)){var n=-t/r;n>=0&&n<=1&&(v[b++]=n)}}else{var d=r*r-4*e*t;if(j(d))v[0]=-r/(2*e);else if(d>0){var c=D(d),n=(-r+c)/(2*e),o=(-r-c)/(2*e);n>=0&&n<=1&&(v[b++]=n),o>=0&&o<=1&&(v[b++]=o)}}return b}P(V,"cubicExtrema");function W(a,i,u,f,v,r){var e=(i-a)*v+a,t=(u-i)*v+i,b=(f-u)*v+u,n=(t-e)*v+e,d=(b-t)*v+t,c=(d-n)*v+n;r[0]=a,r[1]=e,r[2]=n,r[3]=c,r[4]=c,r[5]=d,r[6]=b,r[7]=f}P(W,"cubicSubdivide");function X(a,i,u,f,v,r,e,t,b,n,d){var c,o=.005,q=1/0,l,s,A,h;R[0]=b,R[1]=n;for(var E=0;E<1;E+=.05)S[0]=M(a,u,v,e,E),S[1]=M(i,f,r,t,E),A=L.distSquare(R,S),A<q&&(c=E,q=A);q=1/0;for(var g=0;g<32&&!(o<Q);g++)l=c-o,s=c+o,S[0]=M(a,u,v,e,l),S[1]=M(i,f,r,t,l),A=L.distSquare(S,R),l>=0&&A<q?(c=l,q=A):(m[0]=M(a,u,v,e,s),m[1]=M(i,f,r,t,s),h=L.distSquare(m,R),s<=1&&h<q?(c=s,q=h):o*=.5);return d&&(d[0]=M(a,u,v,e,c),d[1]=M(i,f,r,t,c)),D(q)}P(X,"cubicProjectPoint");function $(a,i,u,f,v,r,e,t,b){for(var n=a,d=i,c=0,o=1/b,q=1;q<=b;q++){var l=q*o,s=M(a,u,v,e,l),A=M(i,f,r,t,l),h=s-n,E=A-d;c+=Math.sqrt(h*h+E*E),n=s,d=A}return c}P($,"cubicLength");function I(a,i,u,f){var v=1-f;return v*(v*a+2*f*i)+f*f*u}P(I,"quadraticAt");function K(a,i,u,f){return 2*((1-f)*(i-a)+f*(u-i))}P(K,"quadraticDerivativeAt");function _(a,i,u,f,v){var r=a-2*i+u,e=2*(i-a),t=a-f,b=0;if(j(r)){if(U(e)){var n=-t/e;n>=0&&n<=1&&(v[b++]=n)}}else{var d=e*e-4*r*t;if(j(d)){var n=-e/(2*r);n>=0&&n<=1&&(v[b++]=n)}else if(d>0){var c=D(d),n=(-e+c)/(2*r),o=(-e-c)/(2*r);n>=0&&n<=1&&(v[b++]=n),o>=0&&o<=1&&(v[b++]=o)}}return b}P(_,"quadraticRootAt");function Y(a,i,u){var f=a+u-2*i;return f===0?.5:(a-i)/f}P(Y,"quadraticExtremum");function p(a,i,u,f,v){var r=(i-a)*f+a,e=(u-i)*f+i,t=(e-r)*f+r;v[0]=a,v[1]=r,v[2]=t,v[3]=t,v[4]=e,v[5]=u}P(p,"quadraticSubdivide");function y(a,i,u,f,v,r,e,t,b){var n,d=.005,c=1/0;R[0]=e,R[1]=t;for(var o=0;o<1;o+=.05){S[0]=I(a,u,v,o),S[1]=I(i,f,r,o);var q=L.distSquare(R,S);q<c&&(n=o,c=q)}c=1/0;for(var l=0;l<32&&!(d<Q);l++){var s=n-d,A=n+d;S[0]=I(a,u,v,s),S[1]=I(i,f,r,s);var q=L.distSquare(S,R);if(s>=0&&q<c)n=s,c=q;else{m[0]=I(a,u,v,A),m[1]=I(i,f,r,A);var h=L.distSquare(m,R);A<=1&&h<c?(n=A,c=h):d*=.5}}return b&&(b[0]=I(a,u,v,n),b[1]=I(i,f,r,n)),D(c)}P(y,"quadraticProjectPoint");function x(a,i,u,f,v,r,e){for(var t=a,b=i,n=0,d=1/e,c=1;c<=e;c++){var o=c*d,q=I(a,u,v,o),l=I(i,f,r,o),s=q-t,A=l-b;n+=Math.sqrt(s*s+A*A),t=q,b=l}return n}P(x,"quadraticLength");exports.cubicAt=M;exports.cubicDerivativeAt=G;exports.cubicExtrema=V;exports.cubicLength=$;exports.cubicProjectPoint=X;exports.cubicRootAt=J;exports.cubicSubdivide=W;exports.quadraticAt=I;exports.quadraticDerivativeAt=K;exports.quadraticExtremum=Y;exports.quadraticLength=x;exports.quadraticProjectPoint=y;exports.quadraticRootAt=_;exports.quadraticSubdivide=p;
