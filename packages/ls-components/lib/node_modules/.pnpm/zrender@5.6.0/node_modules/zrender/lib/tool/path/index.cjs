"use strict";var J=Object.defineProperty;var C=(s,t)=>J(s,"name",{value:t,configurable:!0});Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const U=require("../../../../../../tslib@2.3.0/node_modules/tslib/tslib.es6/index.cjs"),P=require("../../graphic/Path/index.cjs"),Z=require("../../core/PathProxy/index.cjs"),X=require("../transformPath/index.cjs"),K=require("../../core/util/index.cjs");var G=Math.sqrt,V=Math.sin,_=Math.cos,O=Math.PI;function j(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}C(j,"vMag");function I(s,t){return(s[0]*t[0]+s[1]*t[1])/(j(s)*j(t))}C(I,"vRatio");function B(s,t){return(s[0]*t[1]<s[1]*t[0]?-1:1)*Math.acos(I(s,t))}C(B,"vAngle");function H(s,t,a,n,d,b,u,v,q,F,R){var l=q*(O/180),i=_(l)*(s-a)/2+V(l)*(t-n)/2,e=-1*V(l)*(s-a)/2+_(l)*(t-n)/2,Q=i*i/(u*u)+e*e/(v*v);Q>1&&(u*=G(Q),v*=G(Q));var z=(d===b?-1:1)*G((u*u*(v*v)-u*u*(e*e)-v*v*(i*i))/(u*u*(e*e)+v*v*(i*i)))||0,r=z*u*e/v,h=z*-v*i/u,g=(s+a)/2+_(l)*r-V(l)*h,w=(t+n)/2+V(l)*r+_(l)*h,A=B([1,0],[(i-r)/u,(e-h)/v]),D=[(i-r)/u,(e-h)/v],L=[(-1*i-r)/u,(-1*e-h)/v],o=B(D,L);if(I(D,L)<=-1&&(o=O),I(D,L)>=1&&(o=0),o<0){var k=Math.round(o/O*1e6)/1e6;o=O*2+k%2*O}R.addData(F,g,w,u,v,A,o,l,b)}C(H,"processArc");var N=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,W=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function $(s){var t=new Z.default;if(!s)return t;var a=0,n=0,d=a,b=n,u,v=Z.default.CMD,q=s.match(N);if(!q)return t;for(var F=0;F<q.length;F++){for(var R=q[F],l=R.charAt(0),i=void 0,e=R.match(W)||[],Q=e.length,z=0;z<Q;z++)e[z]=parseFloat(e[z]);for(var r=0;r<Q;){var h=void 0,g=void 0,w=void 0,A=void 0,D=void 0,L=void 0,o=void 0,k=a,M=n,S=void 0,T=void 0;switch(l){case"l":a+=e[r++],n+=e[r++],i=v.L,t.addData(i,a,n);break;case"L":a=e[r++],n=e[r++],i=v.L,t.addData(i,a,n);break;case"m":a+=e[r++],n+=e[r++],i=v.M,t.addData(i,a,n),d=a,b=n,l="l";break;case"M":a=e[r++],n=e[r++],i=v.M,t.addData(i,a,n),d=a,b=n,l="L";break;case"h":a+=e[r++],i=v.L,t.addData(i,a,n);break;case"H":a=e[r++],i=v.L,t.addData(i,a,n);break;case"v":n+=e[r++],i=v.L,t.addData(i,a,n);break;case"V":n=e[r++],i=v.L,t.addData(i,a,n);break;case"C":i=v.C,t.addData(i,e[r++],e[r++],e[r++],e[r++],e[r++],e[r++]),a=e[r-2],n=e[r-1];break;case"c":i=v.C,t.addData(i,e[r++]+a,e[r++]+n,e[r++]+a,e[r++]+n,e[r++]+a,e[r++]+n),a+=e[r-2],n+=e[r-1];break;case"S":h=a,g=n,S=t.len(),T=t.data,u===v.C&&(h+=a-T[S-4],g+=n-T[S-3]),i=v.C,k=e[r++],M=e[r++],a=e[r++],n=e[r++],t.addData(i,h,g,k,M,a,n);break;case"s":h=a,g=n,S=t.len(),T=t.data,u===v.C&&(h+=a-T[S-4],g+=n-T[S-3]),i=v.C,k=a+e[r++],M=n+e[r++],a+=e[r++],n+=e[r++],t.addData(i,h,g,k,M,a,n);break;case"Q":k=e[r++],M=e[r++],a=e[r++],n=e[r++],i=v.Q,t.addData(i,k,M,a,n);break;case"q":k=e[r++]+a,M=e[r++]+n,a+=e[r++],n+=e[r++],i=v.Q,t.addData(i,k,M,a,n);break;case"T":h=a,g=n,S=t.len(),T=t.data,u===v.Q&&(h+=a-T[S-4],g+=n-T[S-3]),a=e[r++],n=e[r++],i=v.Q,t.addData(i,h,g,a,n);break;case"t":h=a,g=n,S=t.len(),T=t.data,u===v.Q&&(h+=a-T[S-4],g+=n-T[S-3]),a+=e[r++],n+=e[r++],i=v.Q,t.addData(i,h,g,a,n);break;case"A":w=e[r++],A=e[r++],D=e[r++],L=e[r++],o=e[r++],k=a,M=n,a=e[r++],n=e[r++],i=v.A,H(k,M,a,n,L,o,w,A,D,i,t);break;case"a":w=e[r++],A=e[r++],D=e[r++],L=e[r++],o=e[r++],k=a,M=n,a+=e[r++],n+=e[r++],i=v.A,H(k,M,a,n,L,o,w,A,D,i,t);break}}(l==="z"||l==="Z")&&(i=v.Z,t.addData(i),a=d,n=b),u=i}return t.toStatic(),t}C($,"createPathProxyFromString");var Y=function(s){U.__extends(t,s);function t(){return s!==null&&s.apply(this,arguments)||this}return C(t,"SVGPath"),t.prototype.applyTransform=function(a){},t}(P.default);function c(s){return s.setData!=null}C(c,"isPathProxy");function E(s,t){var a=$(s),n=K.extend({},t);return n.buildPath=function(d){if(c(d)){d.setData(a.data);var b=d.getContext();b&&d.rebuildPath(b,1)}else{var b=d;a.rebuildPath(b,1)}},n.applyTransform=function(d){X.default(a,d),this.dirtyShape()},n}C(E,"createPathOptions");function m(s,t){return new Y(E(s,t))}C(m,"createFromString");function y(s,t){var a=E(s,t),n=function(d){U.__extends(b,d);function b(u){var v=d.call(this,u)||this;return v.applyTransform=a.applyTransform,v.buildPath=a.buildPath,v}return C(b,"Sub"),b}(Y);return n}C(y,"extendFromString");function x(s,t){for(var a=[],n=s.length,d=0;d<n;d++){var b=s[d];a.push(b.getUpdatedPathProxy(!0))}var u=new P.default(t);return u.createPathProxy(),u.buildPath=function(v){if(c(v)){v.appendPath(a);var q=v.getContext();q&&v.rebuildPath(q,1)}},u}C(x,"mergePath");function p(s,t){t=t||{};var a=new P.default;return s.shape&&a.setShape(s.shape),a.setStyle(s.style),t.bakeTransform?X.default(a.path,s.getComputedTransform()):t.toLocal?a.setLocalTransform(s.getComputedTransform()):a.copyTransform(s),a.buildPath=s.buildPath,a.applyTransform=a.applyTransform,a.z=s.z,a.z2=s.z2,a.zlevel=s.zlevel,a}C(p,"clonePath");exports.clonePath=p;exports.createFromString=m;exports.extendFromString=y;exports.mergePath=x;
