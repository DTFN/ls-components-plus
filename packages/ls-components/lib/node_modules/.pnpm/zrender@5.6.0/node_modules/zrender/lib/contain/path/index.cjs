"use strict";var J=Object.defineProperty;var C=(q,u)=>J(q,"name",{value:u,configurable:!0});Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const K=require("../../core/PathProxy/index.cjs"),Q=require("../line/index.cjs"),U=require("../cubic/index.cjs"),V=require("../quadratic/index.cjs"),X=require("../arc/index.cjs"),I=require("../../core/curve/index.cjs"),L=require("../windingLine/index.cjs");var p=K.default.CMD,D=Math.PI*2,Y=1e-4;function $(q,u){return Math.abs(q-u)<Y}C($,"isAroundEqual");var k=[-1,-1,-1],P=[-1,-1];function l(){var q=P[0];P[0]=P[1],P[1]=q}C(l,"swapExtrema");function w(q,u,M,e,o,r,S,v,n,f){if(f>u&&f>e&&f>r&&f>v||f<u&&f<e&&f<r&&f<v)return 0;var t=I.cubicRootAt(u,e,r,v,f,k);if(t===0)return 0;for(var c=0,b=-1,s=void 0,a=void 0,d=0;d<t;d++){var R=k[d],i=R===0||R===1?.5:1,O=I.cubicAt(q,M,o,S,R);O<n||(b<0&&(b=I.cubicExtrema(u,e,r,v,P),P[1]<P[0]&&b>1&&l(),s=I.cubicAt(u,e,r,v,P[0]),b>1&&(a=I.cubicAt(u,e,r,v,P[1]))),b===2?R<P[0]?c+=s<u?i:-i:R<P[1]?c+=a<s?i:-i:c+=v<a?i:-i:R<P[0]?c+=s<u?i:-i:c+=v<s?i:-i)}return c}C(w,"windingCubic");function F(q,u,M,e,o,r,S,v){if(v>u&&v>e&&v>r||v<u&&v<e&&v<r)return 0;var n=I.quadraticRootAt(u,e,r,v,k);if(n===0)return 0;var f=I.quadraticExtremum(u,e,r);if(f>=0&&f<=1){for(var t=0,c=I.quadraticAt(u,e,r,f),b=0;b<n;b++){var s=k[b]===0||k[b]===1?.5:1,a=I.quadraticAt(q,M,o,k[b]);a<S||(k[b]<f?t+=c<u?s:-s:t+=r<c?s:-s)}return t}else{var s=k[0]===0||k[0]===1?.5:1,a=I.quadraticAt(q,M,o,k[0]);return a<S?0:r<u?s:-s}}C(F,"windingQuadratic");function T(q,u,M,e,o,r,S,v){if(v-=u,v>M||v<-M)return 0;var n=Math.sqrt(M*M-v*v);k[0]=-n,k[1]=n;var f=Math.abs(e-o);if(f<1e-4)return 0;if(f>=D-1e-4){e=0,o=D;var t=r?1:-1;return S>=k[0]+q&&S<=k[1]+q?t:0}if(e>o){var c=e;e=o,o=c}e<0&&(e+=D,o+=D);for(var b=0,s=0;s<2;s++){var a=k[s];if(a+q>S){var d=Math.atan2(v,a),t=r?1:-1;d<0&&(d=D+d),(d>=e&&d<=o||d+D>=e&&d+D<=o)&&(d>Math.PI/2&&d<Math.PI*1.5&&(t=-t),b+=t)}}return b}C(T,"windingArc");function B(q,u,M,e,o){for(var r=q.data,S=q.len(),v=0,n=0,f=0,t=0,c=0,b,s,a=0;a<S;){var d=r[a++],R=a===1;switch(d===p.M&&a>1&&(M||(v+=L.default(n,f,t,c,e,o))),R&&(n=r[a],f=r[a+1],t=n,c=f),d){case p.M:t=r[a++],c=r[a++],n=t,f=c;break;case p.L:if(M){if(Q.containStroke(n,f,r[a],r[a+1],u,e,o))return!0}else v+=L.default(n,f,r[a],r[a+1],e,o)||0;n=r[a++],f=r[a++];break;case p.C:if(M){if(U.containStroke(n,f,r[a++],r[a++],r[a++],r[a++],r[a],r[a+1],u,e,o))return!0}else v+=w(n,f,r[a++],r[a++],r[a++],r[a++],r[a],r[a+1],e,o)||0;n=r[a++],f=r[a++];break;case p.Q:if(M){if(V.containStroke(n,f,r[a++],r[a++],r[a],r[a+1],u,e,o))return!0}else v+=F(n,f,r[a++],r[a++],r[a],r[a+1],e,o)||0;n=r[a++],f=r[a++];break;case p.A:var i=r[a++],O=r[a++],N=r[a++],j=r[a++],m=r[a++],E=r[a++];a+=1;var Z=!!(1-r[a++]);b=Math.cos(m)*N+i,s=Math.sin(m)*j+O,R?(t=b,c=s):v+=L.default(n,f,b,s,e,o);var z=(e-i)*j/N+i;if(M){if(X.containStroke(i,O,j,m,m+E,Z,u,z,o))return!0}else v+=T(i,O,j,m,m+E,Z,z,o);n=Math.cos(m+E)*N+i,f=Math.sin(m+E)*j+O;break;case p.R:t=n=r[a++],c=f=r[a++];var G=r[a++],H=r[a++];if(b=t+G,s=c+H,M){if(Q.containStroke(t,c,b,c,u,e,o)||Q.containStroke(b,c,b,s,u,e,o)||Q.containStroke(b,s,t,s,u,e,o)||Q.containStroke(t,s,t,c,u,e,o))return!0}else v+=L.default(b,c,b,s,e,o),v+=L.default(t,s,t,c,e,o);break;case p.Z:if(M){if(Q.containStroke(n,f,t,c,u,e,o))return!0}else v+=L.default(n,f,t,c,e,o);n=t,f=c;break}}return!M&&!$(f,c)&&(v+=L.default(n,f,t,c,e,o)||0),v!==0}C(B,"containPath");function h(q,u,M){return B(q,0,!1,u,M)}C(h,"contain");function A(q,u,M,e){return B(q,u,!0,M,e)}C(A,"containStroke");exports.contain=h;exports.containStroke=A;
