"use strict";var f=Object.defineProperty;var n=(t,e)=>f(t,"name",{value:e,configurable:!0});Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const h=require("../../../core/LRU/index.cjs"),_=require("../../../core/platform/index.cjs");var l=new h.default(50);function c(t){if(typeof t=="string"){var e=l.get(t);return e&&e.image}else return t}n(c,"findExistImage");function p(t,e,r,o,d){if(t)if(typeof t=="string"){if(e&&e.__zrImageSrc===t||!r)return e;var i=l.get(t),s={hostEl:r,cb:o,cbPayload:d};return i?(e=i.image,!a(e)&&i.pending.push(s)):(e=_.platformApi.loadImage(t,u,u),e.__zrImageSrc=t,l.put(t,e.__cachedImgObj={image:e,pending:[s]})),e}else return t;else return e}n(p,"createOrUpdateImage");function u(){var t=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<t.pending.length;e++){var r=t.pending[e],o=r.cb;o&&o(this,r.cbPayload),r.hostEl.dirty()}t.pending.length=0}n(u,"imageOnLoad");function a(t){return t&&t.width&&t.height}n(a,"isImageReady");exports.createOrUpdateImage=p;exports.findExistImage=c;exports.isImageReady=a;
