"use strict";var E=Object.defineProperty;var v=(a,i)=>E(a,"name",{value:i,configurable:!0});Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const B=require("../../../../../../tslib@2.3.0/node_modules/tslib/tslib.es6/index.cjs"),N=require("../../Element/index.cjs"),u=require("../../core/BoundingRect/index.cjs"),c=require("../../core/util/index.cjs"),p=require("../constants/index.cjs");var g="__zr_style_"+Math.round(Math.random()*10),m={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},M={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};m[g]=!0;var A=["z","z2","invisible"],O=["invisible"],w=function(a){B.__extends(i,a);function i(t){return a.call(this,t)||this}return v(i,"Displayable"),i.prototype._init=function(t){for(var e=c.keys(t),r=0;r<e.length;r++){var s=e[r];s==="style"?this.useStyle(t[s]):a.prototype.attrKV.call(this,s,t[s])}this.style||this.useStyle({})},i.prototype.beforeBrush=function(){},i.prototype.afterBrush=function(){},i.prototype.innerBeforeBrush=function(){},i.prototype.innerAfterBrush=function(){},i.prototype.shouldBePainted=function(t,e,r,s){var o=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&D(this,t,e)||o&&!o[0]&&!o[3])return!1;if(r&&this.__clipPaths){for(var f=0;f<this.__clipPaths.length;++f)if(this.__clipPaths[f].isZeroArea())return!1}if(s&&this.parent)for(var y=this.parent;y;){if(y.ignore)return!1;y=y.parent}return!0},i.prototype.contain=function(t,e){return this.rectContain(t,e)},i.prototype.traverse=function(t,e){t.call(e,this)},i.prototype.rectContain=function(t,e){var r=this.transformCoordToLocal(t,e),s=this.getBoundingRect();return s.contain(r[0],r[1])},i.prototype.getPaintRect=function(){var t=this._paintRect;if(!this._paintRect||this.__dirty){var e=this.transform,r=this.getBoundingRect(),s=this.style,o=s.shadowBlur||0,f=s.shadowOffsetX||0,y=s.shadowOffsetY||0;t=this._paintRect||(this._paintRect=new u.default(0,0,0,0)),e?u.default.applyTransform(t,r,e):t.copy(r),(o||f||y)&&(t.width+=o*2+Math.abs(f),t.height+=o*2+Math.abs(y),t.x=Math.min(t.x,t.x+f-o),t.y=Math.min(t.y,t.y+y-o));var n=this.dirtyRectTolerance;t.isZero()||(t.x=Math.floor(t.x-n),t.y=Math.floor(t.y-n),t.width=Math.ceil(t.width+1+n*2),t.height=Math.ceil(t.height+1+n*2))}return t},i.prototype.setPrevPaintRect=function(t){t?(this._prevPaintRect=this._prevPaintRect||new u.default(0,0,0,0),this._prevPaintRect.copy(t)):this._prevPaintRect=null},i.prototype.getPrevPaintRect=function(){return this._prevPaintRect},i.prototype.animateStyle=function(t){return this.animate("style",t)},i.prototype.updateDuringAnimation=function(t){t==="style"?this.dirtyStyle():this.markRedraw()},i.prototype.attrKV=function(t,e){t!=="style"?a.prototype.attrKV.call(this,t,e):this.style?this.setStyle(e):this.useStyle(e)},i.prototype.setStyle=function(t,e){return typeof t=="string"?this.style[t]=e:c.extend(this.style,t),this.dirtyStyle(),this},i.prototype.dirtyStyle=function(t){t||this.markRedraw(),this.__dirty|=p.STYLE_CHANGED_BIT,this._rect&&(this._rect=null)},i.prototype.dirty=function(){this.dirtyStyle()},i.prototype.styleChanged=function(){return!!(this.__dirty&p.STYLE_CHANGED_BIT)},i.prototype.styleUpdated=function(){this.__dirty&=~p.STYLE_CHANGED_BIT},i.prototype.createStyle=function(t){return c.createObject(m,t)},i.prototype.useStyle=function(t){t[g]||(t=this.createStyle(t)),this.__inHover?this.__hoverStyle=t:this.style=t,this.dirtyStyle()},i.prototype.isStyleObject=function(t){return t[g]},i.prototype._innerSaveToNormal=function(t){a.prototype._innerSaveToNormal.call(this,t);var e=this._normalState;t.style&&!e.style&&(e.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(t,e,A)},i.prototype._applyStateObj=function(t,e,r,s,o,f){a.prototype._applyStateObj.call(this,t,e,r,s,o,f);var y=!(e&&s),n;if(e&&e.style?o?s?n=e.style:(n=this._mergeStyle(this.createStyle(),r.style),this._mergeStyle(n,e.style)):(n=this._mergeStyle(this.createStyle(),s?this.style:r.style),this._mergeStyle(n,e.style)):y&&(n=r.style),n)if(o){var _=this.style;if(this.style=this.createStyle(y?{}:_),y)for(var T=c.keys(_),h=0;h<T.length;h++){var l=T[h];l in n&&(n[l]=n[l],this.style[l]=_[l])}for(var R=c.keys(n),h=0;h<R.length;h++){var l=R[h];this.style[l]=this.style[l]}this._transitionState(t,{style:n},f,this.getAnimationStyleProps())}else this.useStyle(n);for(var P=this.__inHover?O:A,h=0;h<P.length;h++){var l=P[h];e&&e[l]!=null?this[l]=e[l]:y&&r[l]!=null&&(this[l]=r[l])}},i.prototype._mergeStates=function(t){for(var e=a.prototype._mergeStates.call(this,t),r,s=0;s<t.length;s++){var o=t[s];o.style&&(r=r||{},this._mergeStyle(r,o.style))}return r&&(e.style=r),e},i.prototype._mergeStyle=function(t,e){return c.extend(t,e),t},i.prototype.getAnimationStyleProps=function(){return M},i.initDefaultProps=function(){var t=i.prototype;t.type="displayable",t.invisible=!1,t.z=0,t.z2=0,t.zlevel=0,t.culling=!1,t.cursor="pointer",t.rectHover=!1,t.incremental=!1,t._rect=null,t.dirtyRectTolerance=0,t.__dirty=p.REDRAW_BIT|p.STYLE_CHANGED_BIT}(),i}(N.default),d=new u.default(0,0,0,0),S=new u.default(0,0,0,0);function D(a,i,t){return d.copy(a.getBoundingRect()),a.transform&&d.applyTransform(a.transform),S.width=i,S.height=t,!d.intersect(S)}v(D,"isDisplayableCulled");const b=w;exports.DEFAULT_COMMON_ANIMATION_PROPS=M;exports.DEFAULT_COMMON_STYLE=m;exports.default=b;
