"use strict";var L=Object.defineProperty;var r=(f,s)=>L(f,"name",{value:s,configurable:!0});Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),S=require("../../../../../../../../@vueuse_core@9.13.0_vue@3.5.13_typescript@5.5.4_/node_modules/@vueuse/core/index/index.cjs"),T=require("../constants/index.cjs"),P=require("../util/index.cjs"),H=require("../thumb/index.cjs"),R=require("../../../../_virtual/plugin-vue_export-helper/index.cjs"),B=require("../../../../hooks/use-namespace/index/index.cjs"),N=require("../../../../utils/error/index.cjs"),D=require("../../../../../../../../@vueuse_shared@9.13.0_vue@3.5.13_typescript@5.5.4_/node_modules/@vueuse/shared/index/index.cjs"),O="Thumb",A=e.defineComponent({__name:"thumb",props:H.thumbProps,setup(f){const s=f,o=e.inject(T.scrollbarContextKey),i=B.useNamespace("scrollbar");o||N.throwError(O,"can not inject scrollbar context");const a=e.ref(),c=e.ref(),d=e.ref({}),v=e.ref(!1);let m=!1,b=!1,p=D.isClient?document.onselectstart:null;const t=e.computed(()=>P.BAR_MAP[s.vertical?"vertical":"horizontal"]),y=e.computed(()=>P.renderThumbStyle({size:s.size,move:s.move,bar:t.value})),E=e.computed(()=>a.value[t.value.offset]**2/o.wrapElement[t.value.scrollSize]/s.ratio/c.value[t.value.offset]),C=r(n=>{var l;if(n.stopPropagation(),n.ctrlKey||[1,2].includes(n.button))return;(l=window.getSelection())==null||l.removeAllRanges(),z(n);const u=n.currentTarget;u&&(d.value[t.value.axis]=u[t.value.offset]-(n[t.value.client]-u.getBoundingClientRect()[t.value.direction]))},"clickThumbHandler"),x=r(n=>{if(!c.value||!a.value||!o.wrapElement)return;const l=Math.abs(n.target.getBoundingClientRect()[t.value.direction]-n[t.value.client]),u=c.value[t.value.offset]/2,g=(l-u)*100*E.value/a.value[t.value.offset];o.wrapElement[t.value.scroll]=g*o.wrapElement[t.value.scrollSize]/100},"clickTrackHandler"),z=r(n=>{n.stopImmediatePropagation(),m=!0,document.addEventListener("mousemove",w),document.addEventListener("mouseup",h),p=document.onselectstart,document.onselectstart=()=>!1},"startDrag"),w=r(n=>{if(!a.value||!c.value||m===!1)return;const l=d.value[t.value.axis];if(!l)return;const u=(a.value.getBoundingClientRect()[t.value.direction]-n[t.value.client])*-1,g=c.value[t.value.offset]-l,q=(u-g)*100*E.value/a.value[t.value.offset];o.wrapElement[t.value.scroll]=q*o.wrapElement[t.value.scrollSize]/100},"mouseMoveDocumentHandler"),h=r(()=>{m=!1,d.value[t.value.axis]=0,document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",h),_(),b&&(v.value=!1)},"mouseUpDocumentHandler"),M=r(()=>{b=!1,v.value=!!s.size},"mouseMoveScrollbarHandler"),k=r(()=>{b=!0,v.value=m},"mouseLeaveScrollbarHandler");e.onBeforeUnmount(()=>{_(),document.removeEventListener("mouseup",h)});const _=r(()=>{document.onselectstart!==p&&(document.onselectstart=p)},"restoreOnselectstart");return S.useEventListener(e.toRef(o,"scrollbarElement"),"mousemove",M),S.useEventListener(e.toRef(o,"scrollbarElement"),"mouseleave",k),(n,l)=>(e.openBlock(),e.createBlock(e.Transition,{name:e.unref(i).b("fade"),persisted:""},{default:e.withCtx(()=>[e.withDirectives(e.createElementVNode("div",{ref_key:"instance",ref:a,class:e.normalizeClass([e.unref(i).e("bar"),e.unref(i).is(e.unref(t).key)]),onMousedown:x},[e.createElementVNode("div",{ref_key:"thumb",ref:c,class:e.normalizeClass(e.unref(i).e("thumb")),style:e.normalizeStyle(e.unref(y)),onMousedown:C},null,38)],34),[[e.vShow,n.always||v.value]])]),_:1},8,["name"]))}});var j=R.default(A,[["__file","thumb.vue"]]);exports.default=j;
