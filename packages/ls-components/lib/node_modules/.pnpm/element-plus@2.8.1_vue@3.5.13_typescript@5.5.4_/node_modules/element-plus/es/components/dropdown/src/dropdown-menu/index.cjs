"use strict";var q=Object.defineProperty;var l=(e,r)=>q(e,"name",{value:r,configurable:!0});Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const o=require("vue"),b=require("../tokens/index.cjs"),u=require("../dropdown/index.cjs"),D=require("../useDropdown/index.cjs"),M=require("../../../../_virtual/plugin-vue_export-helper/index.cjs"),G=require("../../../../hooks/use-namespace/index/index.cjs"),L=require("../../../focus-trap/src/tokens/index.cjs"),P=require("../../../roving-focus-group/src/tokens/index.cjs"),Y=require("../../../roving-focus-group/src/roving-focus-group/index.cjs"),$=require("../../../../utils/vue/refs/index.cjs"),h=require("../../../../utils/dom/event/index.cjs"),j=require("../../../../constants/aria/index.cjs"),B=require("../../../roving-focus-group/src/utils/index.cjs"),k=o.defineComponent({name:"ElDropdownMenu",props:u.dropdownMenuProps,setup(e){const r=G.useNamespace("dropdown"),{_elDropdownSize:c}=D.useDropdown(),s=c.value,{focusTrapRef:a,onKeydown:p}=o.inject(L.FOCUS_TRAP_INJECTION_KEY,void 0),{contentRef:f,role:_,triggerId:m}=o.inject(b.DROPDOWN_INJECTION_KEY,void 0),{collectionRef:O,getItems:E}=o.inject(u.DROPDOWN_COLLECTION_INJECTION_KEY,void 0),{rovingFocusGroupRef:I,rovingFocusGroupRootStyle:R,tabIndex:N,onBlur:g,onFocus:C,onMousedown:K}=o.inject(P.ROVING_FOCUS_GROUP_INJECTION_KEY,void 0),{collectionRef:y}=o.inject(Y.ROVING_FOCUS_COLLECTION_INJECTION_KEY,void 0),S=o.computed(()=>[r.b("menu"),r.bm("menu",s==null?void 0:s.value)]),T=$.composeRefs(f,O,a,I,y),F=h.composeEventHandlers(n=>{var t;(t=e.onKeydown)==null||t.call(e,n)},n=>{const{currentTarget:t,code:i,target:w}=n;if(t.contains(w),j.EVENT_CODE.tab===i&&n.stopImmediatePropagation(),n.preventDefault(),w!==o.unref(f)||!u.FIRST_LAST_KEYS.includes(i))return;const v=E().filter(d=>!d.disabled).map(d=>d.ref);u.LAST_KEYS.includes(i)&&v.reverse(),B.focusFirst(v)});return{size:s,rovingFocusGroupRootStyle:R,tabIndex:N,dropdownKls:S,role:_,triggerId:m,dropdownListWrapperRef:T,handleKeydown:l(n=>{F(n),p(n)},"handleKeydown"),onBlur:g,onFocus:C,onMousedown:K}}});function J(e,r,c,s,a,p){return o.openBlock(),o.createElementBlock("ul",{ref:e.dropdownListWrapperRef,class:o.normalizeClass(e.dropdownKls),style:o.normalizeStyle(e.rovingFocusGroupRootStyle),tabindex:-1,role:e.role,"aria-labelledby":e.triggerId,onBlur:e.onBlur,onFocus:e.onFocus,onKeydown:o.withModifiers(e.handleKeydown,["self"]),onMousedown:o.withModifiers(e.onMousedown,["self"])},[o.renderSlot(e.$slots,"default")],46,["role","aria-labelledby","onBlur","onFocus","onKeydown","onMousedown"])}l(J,"_sfc_render");var z=M.default(k,[["render",J],["__file","dropdown-menu.vue"]]);exports.default=z;
