"use strict";var h=Object.defineProperty;var d=(l,o)=>h(l,"name",{value:o,configurable:!0});Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const c=require("vue"),m=require("../../../../../../../../../@vueuse_core@9.13.0_vue@3.5.13_typescript@5.5.4_/node_modules/@vueuse/core/index/index.cjs"),x=require("../../../../../hooks/use-namespace/index/index.cjs"),n=require("../../../../../constants/aria/index.cjs");function k({el$:l},o){const i=x.useNamespace("tree"),t=c.shallowRef([]),f=c.shallowRef([]);c.onMounted(()=>{b()}),c.onUpdated(()=>{t.value=Array.from(l.value.querySelectorAll("[role=treeitem]")),f.value=Array.from(l.value.querySelectorAll("input[type=checkbox]"))}),c.watch(f,r=>{r.forEach(u=>{u.setAttribute("tabindex","-1")})});const E=d(r=>{const u=r.target;if(!u.className.includes(i.b("node")))return;const s=r.code;t.value=Array.from(l.value.querySelectorAll(`.${i.is("focusable")}[role=treeitem]`));const a=t.value.indexOf(u);let e;if([n.EVENT_CODE.up,n.EVENT_CODE.down].includes(s)){if(r.preventDefault(),s===n.EVENT_CODE.up){e=a===-1?0:a!==0?a-1:t.value.length-1;const v=e;for(;!o.value.getNode(t.value[e].dataset.key).canFocus;){if(e--,e===v){e=-1;break}e<0&&(e=t.value.length-1)}}else{e=a===-1?0:a<t.value.length-1?a+1:0;const v=e;for(;!o.value.getNode(t.value[e].dataset.key).canFocus;){if(e++,e===v){e=-1;break}e>=t.value.length&&(e=0)}}e!==-1&&t.value[e].focus()}[n.EVENT_CODE.left,n.EVENT_CODE.right].includes(s)&&(r.preventDefault(),u.click());const y=u.querySelector('[type="checkbox"]');[n.EVENT_CODE.enter,n.EVENT_CODE.space].includes(s)&&y&&(r.preventDefault(),y.click())},"handleKeydown");m.useEventListener(l,"keydown",E);const b=d(()=>{var r;t.value=Array.from(l.value.querySelectorAll(`.${i.is("focusable")}[role=treeitem]`)),f.value=Array.from(l.value.querySelectorAll("input[type=checkbox]"));const u=l.value.querySelectorAll(`.${i.is("checked")}[role=treeitem]`);if(u.length){u[0].setAttribute("tabindex","0");return}(r=t.value[0])==null||r.setAttribute("tabindex","0")},"initTabIndex")}d(k,"useKeydown");exports.useKeydown=k;
