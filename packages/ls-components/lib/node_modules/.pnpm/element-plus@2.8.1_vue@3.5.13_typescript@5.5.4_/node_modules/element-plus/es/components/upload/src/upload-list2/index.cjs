"use strict";var h=Object.defineProperty;var o=(m,d)=>h(m,"name",{value:d,configurable:!0});Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),a=require("../../../icon/index/index.cjs"),c=require("@element-plus/icons-vue"),g=require("../../../progress/index/index.cjs"),k=require("../upload-list/index.cjs"),B=require("../../../../_virtual/plugin-vue_export-helper/index.cjs"),V=require("../../../../hooks/use-locale/index/index.cjs"),f=require("../../../../hooks/use-namespace/index/index.cjs"),E=require("../../../form/src/hooks/use-form-common-props/index.cjs"),z=e.defineComponent({name:"ElUploadList"}),w=e.defineComponent({...z,props:k.uploadListProps,emits:k.uploadListEmits,setup(m,{emit:d}){const C=m,{t:v}=V.useLocale(),s=f.useNamespace("upload"),l=f.useNamespace("icon"),y=f.useNamespace("list"),i=E.useFormDisabled(),u=e.ref(!1),b=e.computed(()=>[s.b("list"),s.bm("list",C.listType),s.is("disabled",C.disabled)]),p=o(t=>{d("remove",t)},"handleRemove");return(t,$)=>(e.openBlock(),e.createBlock(e.TransitionGroup,{tag:"ul",class:e.normalizeClass(e.unref(b)),name:e.unref(y).b()},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.files,(n,N)=>(e.openBlock(),e.createElementBlock("li",{key:n.uid||n.name,class:e.normalizeClass([e.unref(s).be("list","item"),e.unref(s).is(n.status),{focusing:u.value}]),tabindex:"0",onKeydown:e.withKeys(r=>!e.unref(i)&&p(n),["delete"]),onFocus:o(r=>u.value=!0,"onFocus"),onBlur:o(r=>u.value=!1,"onBlur"),onClick:o(r=>u.value=!1,"onClick")},[e.renderSlot(t.$slots,"default",{file:n,index:N},()=>[t.listType==="picture"||n.status!=="uploading"&&t.listType==="picture-card"?(e.openBlock(),e.createElementBlock("img",{key:0,class:e.normalizeClass(e.unref(s).be("list","item-thumbnail")),src:n.url,crossorigin:t.crossorigin,alt:""},null,10,["src","crossorigin"])):e.createCommentVNode("v-if",!0),n.status==="uploading"||t.listType!=="picture-card"?(e.openBlock(),e.createElementBlock("div",{key:1,class:e.normalizeClass(e.unref(s).be("list","item-info"))},[e.createElementVNode("a",{class:e.normalizeClass(e.unref(s).be("list","item-name")),onClick:e.withModifiers(r=>t.handlePreview(n),["prevent"])},[e.createVNode(e.unref(a.ElIcon),{class:e.normalizeClass(e.unref(l).m("document"))},{default:e.withCtx(()=>[e.createVNode(e.unref(c.Document))]),_:1},8,["class"]),e.createElementVNode("span",{class:e.normalizeClass(e.unref(s).be("list","item-file-name")),title:n.name},e.toDisplayString(n.name),11,["title"])],10,["onClick"]),n.status==="uploading"?(e.openBlock(),e.createBlock(e.unref(g.ElProgress),{key:0,type:t.listType==="picture-card"?"circle":"line","stroke-width":t.listType==="picture-card"?6:2,percentage:Number(n.percentage),style:e.normalizeStyle(t.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):e.createCommentVNode("v-if",!0)],2)):e.createCommentVNode("v-if",!0),e.createElementVNode("label",{class:e.normalizeClass(e.unref(s).be("list","item-status-label"))},[t.listType==="text"?(e.openBlock(),e.createBlock(e.unref(a.ElIcon),{key:0,class:e.normalizeClass([e.unref(l).m("upload-success"),e.unref(l).m("circle-check")])},{default:e.withCtx(()=>[e.createVNode(e.unref(c.CircleCheck))]),_:1},8,["class"])):["picture-card","picture"].includes(t.listType)?(e.openBlock(),e.createBlock(e.unref(a.ElIcon),{key:1,class:e.normalizeClass([e.unref(l).m("upload-success"),e.unref(l).m("check")])},{default:e.withCtx(()=>[e.createVNode(e.unref(c.Check))]),_:1},8,["class"])):e.createCommentVNode("v-if",!0)],2),e.unref(i)?e.createCommentVNode("v-if",!0):(e.openBlock(),e.createBlock(e.unref(a.ElIcon),{key:2,class:e.normalizeClass(e.unref(l).m("close")),onClick:o(r=>p(n),"onClick")},{default:e.withCtx(()=>[e.createVNode(e.unref(c.Close))]),_:2},1032,["class","onClick"])),e.createCommentVNode(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),e.createCommentVNode(" This is a bug which needs to be fixed "),e.createCommentVNode(" TODO: Fix the incorrect navigation interaction "),e.unref(i)?e.createCommentVNode("v-if",!0):(e.openBlock(),e.createElementBlock("i",{key:3,class:e.normalizeClass(e.unref(l).m("close-tip"))},e.toDisplayString(e.unref(v)("el.upload.deleteTip")),3)),t.listType==="picture-card"?(e.openBlock(),e.createElementBlock("span",{key:4,class:e.normalizeClass(e.unref(s).be("list","item-actions"))},[e.createElementVNode("span",{class:e.normalizeClass(e.unref(s).be("list","item-preview")),onClick:o(r=>t.handlePreview(n),"onClick")},[e.createVNode(e.unref(a.ElIcon),{class:e.normalizeClass(e.unref(l).m("zoom-in"))},{default:e.withCtx(()=>[e.createVNode(e.unref(c.ZoomIn))]),_:1},8,["class"])],10,["onClick"]),e.unref(i)?e.createCommentVNode("v-if",!0):(e.openBlock(),e.createElementBlock("span",{key:0,class:e.normalizeClass(e.unref(s).be("list","item-delete")),onClick:o(r=>p(n),"onClick")},[e.createVNode(e.unref(a.ElIcon),{class:e.normalizeClass(e.unref(l).m("delete"))},{default:e.withCtx(()=>[e.createVNode(e.unref(c.Delete))]),_:1},8,["class"])],10,["onClick"]))],2)):e.createCommentVNode("v-if",!0)])],42,["onKeydown","onFocus","onBlur","onClick"]))),128)),e.renderSlot(t.$slots,"append")]),_:3},8,["class","name"]))}});var T=B.default(w,[["__file","upload-list.vue"]]);exports.default=T;
