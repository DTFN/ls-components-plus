"use strict";var J=Object.defineProperty;var s=(V,r)=>J(V,"name",{value:r,configurable:!0});Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),h=require("../../../../../../../../../dayjs@1.11.13/node_modules/dayjs/dayjs.min/index.cjs"),C=require("../../../../icon/index/index.cjs"),b=require("@element-plus/icons-vue"),w=require("../../utils/index.cjs"),z=require("../../props/panel-month-range/index.cjs"),Q=require("../../composables/use-month-range-header/index.cjs"),W=require("../../composables/use-range-picker/index.cjs"),q=require("../basic-month-table/index.cjs"),X=require("../../../../../_virtual/plugin-vue_export-helper/index.cjs"),Z=require("../../../../../hooks/use-locale/index/index.cjs"),x=require("../../../../../../../../../@vue_shared@3.5.13/node_modules/@vue/shared/dist/shared.esm-bundler/index.cjs"),v="year",ee=e.defineComponent({name:"DatePickerMonthRange"}),ne=e.defineComponent({...ee,props:z.panelMonthRangeProps,emits:z.panelMonthRangeEmits,setup(V,{emit:r}){const c=V,{lang:d}=Z.useLocale(),N=e.inject("EP_PICKER_BASE"),{shortcuts:y,disabledDate:E}=N.props,m=e.toRef(N.props,"format"),P=e.toRef(N.props,"defaultValue"),u=e.ref(h.default().locale(d.value)),i=e.ref(h.default().locale(d.value).add(1,v)),{minDate:p,maxDate:g,rangeState:S,ppNs:t,drpNs:f,handleChangeRange:R,handleRangeConfirm:M,handleShortcutClick:Y,onSelect:D}=W.useRangePicker(c,{defaultValue:P,leftDate:u,rightDate:i,unit:v,onParsedValueChanged:G}),B=e.computed(()=>!!y.length),{leftPrevYear:A,rightNextYear:I,leftNextYear:$,rightPrevYear:L,leftLabel:T,rightLabel:j,leftYear:H,rightYear:U}=Q.useMonthRangeHeader({unlinkPanels:e.toRef(c,"unlinkPanels"),leftDate:u,rightDate:i}),k=e.computed(()=>c.unlinkPanels&&U.value>H.value+1),_=s((n,a=!0)=>{const l=n.minDate,o=n.maxDate;g.value===o&&p.value===l||(r("calendar-change",[l.toDate(),o&&o.toDate()]),g.value=o,p.value=l,a&&M())},"handleRangePick"),F=s(()=>{u.value=w.getDefaultValue(e.unref(P),{lang:e.unref(d),unit:"year",unlinkPanels:c.unlinkPanels})[0],i.value=u.value.add(1,"year"),r("pick",null)},"handleClear"),K=s(n=>x.isArray(n)?n.map(a=>a.format(m.value)):n.format(m.value),"formatToString"),O=s(n=>x.isArray(n)?n.map(a=>h.default(a,m.value).locale(d.value)):h.default(n,m.value).locale(d.value),"parseUserInput");function G(n,a){if(c.unlinkPanels&&a){const l=(n==null?void 0:n.year())||0,o=a.year();i.value=l===o?a.add(1,v):a}else i.value=u.value.add(1,v)}return s(G,"onParsedValueChanged"),r("set-picker-option",["isValidValue",w.isValidRange]),r("set-picker-option",["formatToString",K]),r("set-picker-option",["parseUserInput",O]),r("set-picker-option",["handleClear",F]),(n,a)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass([e.unref(t).b(),e.unref(f).b(),{"has-sidebar":!!n.$slots.sidebar||e.unref(B)}])},[e.createElementVNode("div",{class:e.normalizeClass(e.unref(t).e("body-wrapper"))},[e.renderSlot(n.$slots,"sidebar",{class:e.normalizeClass(e.unref(t).e("sidebar"))}),e.unref(B)?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(e.unref(t).e("sidebar"))},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(y),(l,o)=>(e.openBlock(),e.createElementBlock("button",{key:o,type:"button",class:e.normalizeClass(e.unref(t).e("shortcut")),onClick:s(ae=>e.unref(Y)(l),"onClick")},e.toDisplayString(l.text),11,["onClick"]))),128))],2)):e.createCommentVNode("v-if",!0),e.createElementVNode("div",{class:e.normalizeClass(e.unref(t).e("body"))},[e.createElementVNode("div",{class:e.normalizeClass([[e.unref(t).e("content"),e.unref(f).e("content")],"is-left"])},[e.createElementVNode("div",{class:e.normalizeClass(e.unref(f).e("header"))},[e.createElementVNode("button",{type:"button",class:e.normalizeClass([e.unref(t).e("icon-btn"),"d-arrow-left"]),onClick:e.unref(A)},[e.renderSlot(n.$slots,"prev-year",{},()=>[e.createVNode(e.unref(C.ElIcon),null,{default:e.withCtx(()=>[e.createVNode(e.unref(b.DArrowLeft))]),_:1})])],10,["onClick"]),n.unlinkPanels?(e.openBlock(),e.createElementBlock("button",{key:0,type:"button",disabled:!e.unref(k),class:e.normalizeClass([[e.unref(t).e("icon-btn"),{[e.unref(t).is("disabled")]:!e.unref(k)}],"d-arrow-right"]),onClick:e.unref($)},[e.renderSlot(n.$slots,"next-year",{},()=>[e.createVNode(e.unref(C.ElIcon),null,{default:e.withCtx(()=>[e.createVNode(e.unref(b.DArrowRight))]),_:1})])],10,["disabled","onClick"])):e.createCommentVNode("v-if",!0),e.createElementVNode("div",null,e.toDisplayString(e.unref(T)),1)],2),e.createVNode(q.default,{"selection-mode":"range",date:u.value,"min-date":e.unref(p),"max-date":e.unref(g),"range-state":e.unref(S),"disabled-date":e.unref(E),onChangerange:e.unref(R),onPick:_,onSelect:e.unref(D)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2),e.createElementVNode("div",{class:e.normalizeClass([[e.unref(t).e("content"),e.unref(f).e("content")],"is-right"])},[e.createElementVNode("div",{class:e.normalizeClass(e.unref(f).e("header"))},[n.unlinkPanels?(e.openBlock(),e.createElementBlock("button",{key:0,type:"button",disabled:!e.unref(k),class:e.normalizeClass([[e.unref(t).e("icon-btn"),{"is-disabled":!e.unref(k)}],"d-arrow-left"]),onClick:e.unref(L)},[e.renderSlot(n.$slots,"prev-year",{},()=>[e.createVNode(e.unref(C.ElIcon),null,{default:e.withCtx(()=>[e.createVNode(e.unref(b.DArrowLeft))]),_:1})])],10,["disabled","onClick"])):e.createCommentVNode("v-if",!0),e.createElementVNode("button",{type:"button",class:e.normalizeClass([e.unref(t).e("icon-btn"),"d-arrow-right"]),onClick:e.unref(I)},[e.renderSlot(n.$slots,"next-year",{},()=>[e.createVNode(e.unref(C.ElIcon),null,{default:e.withCtx(()=>[e.createVNode(e.unref(b.DArrowRight))]),_:1})])],10,["onClick"]),e.createElementVNode("div",null,e.toDisplayString(e.unref(j)),1)],2),e.createVNode(q.default,{"selection-mode":"range",date:i.value,"min-date":e.unref(p),"max-date":e.unref(g),"range-state":e.unref(S),"disabled-date":e.unref(E),onChangerange:e.unref(R),onPick:_,onSelect:e.unref(D)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2)],2)],2)],2))}});var te=X.default(ne,[["__file","panel-month-range.vue"]]);exports.default=te;
