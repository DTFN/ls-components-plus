"use strict";var q=Object.defineProperty;var o=(s,p)=>q(s,"name",{value:p,configurable:!0});Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const r=require("vue"),B=require("../../../popper/index/index.cjs"),E=require("../constants/index.cjs"),v=require("../tooltip/index.cjs"),A=require("../trigger2/index.cjs"),O=require("../content2/index.cjs"),P=require("../../../../_virtual/plugin-vue_export-helper/index.cjs"),S=require("../../../../hooks/use-popper-container/index/index.cjs"),I=require("../../../../hooks/use-id/index/index.cjs"),H=require("../../../../hooks/use-delayed-toggle/index/index.cjs"),N=require("../../../../utils/types/index.cjs"),$=require("../../../popper/src/arrow2/index.cjs"),M=r.defineComponent({name:"ElTooltip"}),V=r.defineComponent({...M,props:v.useTooltipProps,emits:v.tooltipEmits,setup(s,{expose:p,emit:i}){const t=s;S.usePopperContainer();const m=I.useId(),d=r.ref(),u=r.ref(),b=o(()=>{var e;const a=r.unref(d);a&&((e=a.popperInstanceRef)==null||e.update())},"updatePopper"),n=r.ref(!1),l=r.ref(),{show:y,hide:f,hasUpdateHandler:C}=v.useTooltipModelToggle({indicator:n,toggleReason:l}),{onOpen:g,onClose:c}=H.useDelayedToggle({showAfter:r.toRef(t,"showAfter"),hideAfter:r.toRef(t,"hideAfter"),autoClose:r.toRef(t,"autoClose"),open:y,close:f}),k=r.computed(()=>N.isBoolean(t.visible)&&!C.value);r.provide(E.TOOLTIP_INJECTION_KEY,{controlled:k,id:m,open:r.readonly(n),trigger:r.toRef(t,"trigger"),onOpen:o(e=>{g(e)},"onOpen"),onClose:o(e=>{c(e)},"onClose"),onToggle:o(e=>{r.unref(n)?c(e):g(e)},"onToggle"),onShow:o(()=>{i("show",l.value)},"onShow"),onHide:o(()=>{i("hide",l.value)},"onHide"),onBeforeShow:o(()=>{i("before-show",l.value)},"onBeforeShow"),onBeforeHide:o(()=>{i("before-hide",l.value)},"onBeforeHide"),updatePopper:b}),r.watch(()=>t.disabled,e=>{e&&n.value&&(n.value=!1)});const T=o(e=>{var a,h;const w=(h=(a=u.value)==null?void 0:a.contentRef)==null?void 0:h.popperContentRef,R=(e==null?void 0:e.relatedTarget)||document.activeElement;return w&&w.contains(R)},"isFocusInsideContent");return r.onDeactivated(()=>n.value&&f()),p({popperRef:d,contentRef:u,isFocusInsideContent:T,updatePopper:b,onOpen:g,onClose:c,hide:f}),(e,a)=>(r.openBlock(),r.createBlock(r.unref(B.ElPopper),{ref_key:"popperRef",ref:d,role:e.role},{default:r.withCtx(()=>[r.createVNode(A.default,{disabled:e.disabled,trigger:e.trigger,"trigger-keys":e.triggerKeys,"virtual-ref":e.virtualRef,"virtual-triggering":e.virtualTriggering},{default:r.withCtx(()=>[e.$slots.default?r.renderSlot(e.$slots,"default",{key:0}):r.createCommentVNode("v-if",!0)]),_:3},8,["disabled","trigger","trigger-keys","virtual-ref","virtual-triggering"]),r.createVNode(O.default,{ref_key:"contentRef",ref:u,"aria-label":e.ariaLabel,"boundaries-padding":e.boundariesPadding,content:e.content,disabled:e.disabled,effect:e.effect,enterable:e.enterable,"fallback-placements":e.fallbackPlacements,"hide-after":e.hideAfter,"gpu-acceleration":e.gpuAcceleration,offset:e.offset,persistent:e.persistent,"popper-class":e.popperClass,"popper-style":e.popperStyle,placement:e.placement,"popper-options":e.popperOptions,pure:e.pure,"raw-content":e.rawContent,"reference-el":e.referenceEl,"trigger-target-el":e.triggerTargetEl,"show-after":e.showAfter,strategy:e.strategy,teleported:e.teleported,transition:e.transition,"virtual-triggering":e.virtualTriggering,"z-index":e.zIndex,"append-to":e.appendTo},{default:r.withCtx(()=>[r.renderSlot(e.$slots,"content",{},()=>[e.rawContent?(r.openBlock(),r.createElementBlock("span",{key:0,innerHTML:e.content},null,8,["innerHTML"])):(r.openBlock(),r.createElementBlock("span",{key:1},r.toDisplayString(e.content),1))]),e.showArrow?(r.openBlock(),r.createBlock(r.unref($.default),{key:0,"arrow-offset":e.arrowOffset},null,8,["arrow-offset"])):r.createCommentVNode("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","pure","raw-content","reference-el","trigger-target-el","show-after","strategy","teleported","transition","virtual-triggering","z-index","append-to"])]),_:3},8,["role"]))}});var L=P.default(V,[["__file","tooltip.vue"]]);exports.default=L;
