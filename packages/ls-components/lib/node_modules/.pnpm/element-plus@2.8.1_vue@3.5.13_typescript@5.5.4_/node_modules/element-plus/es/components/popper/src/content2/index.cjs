"use strict";var V=Object.defineProperty;var u=(i,l)=>V(i,"name",{value:l,configurable:!0});Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),_=require("../../../../../../../../@vue_shared@3.5.13/node_modules/@vue/shared/dist/shared.esm-bundler/index.cjs"),H=require("../constants/index.cjs"),q=require("../content/index.cjs"),J=require("../../../../_virtual/plugin-vue_export-helper/index.cjs"),L=require("../composables/use-focus-trap/index.cjs"),U=require("../composables/use-content/index.cjs"),W=require("../composables/use-content-dom/index.cjs"),E=require("../../../form/src/constants/index.cjs"),F=require("../../../../utils/types/index.cjs"),Y=require("../../../focus-trap/src/focus-trap/index.cjs"),Z=require("../../../../../../../../lodash-es@4.17.21/node_modules/lodash-es/isNil/index.cjs"),z=e.defineComponent({name:"ElPopperContent"}),G=e.defineComponent({...z,props:q.popperContentProps,emits:q.popperContentEmits,setup(i,{expose:l,emit:b}){const t=i,{focusStartRef:T,trapped:c,onFocusAfterReleased:g,onFocusAfterTrapped:A,onFocusInTrap:I,onFocusoutPrevented:O,onReleaseRequested:h}=L.usePopperContentFocusTrap(t,b),{attributes:M,arrowRef:y,contentRef:s,styles:N,instanceRef:S,role:f,update:w}=U.usePopperContent(t),{ariaModal:x,arrowStyle:B,contentAttrs:$,contentClass:K,contentStyle:d,updateZIndex:j}=W.usePopperContentDOM(t,{styles:N,attributes:M,role:f}),m=e.inject(E.formItemContextKey,void 0),k=e.ref();e.provide(H.POPPER_CONTENT_INJECTION_KEY,{arrowStyle:B,arrowRef:y,arrowOffset:k}),m&&e.provide(E.formItemContextKey,{...m,addInputId:_.NOOP,removeInputId:_.NOOP});let r;const v=u((n=!0)=>{w(),n&&j()},"updatePopper"),D=u(()=>{v(!1),t.visible&&t.focusOnShow?c.value=!0:t.visible===!1&&(c.value=!1)},"togglePopperAlive");return e.onMounted(()=>{e.watch(()=>t.triggerTargetEl,(n,C)=>{r==null||r(),r=void 0;const o=e.unref(n||s.value),p=e.unref(C||s.value);F.isElement(o)&&(r=e.watch([f,()=>t.ariaLabel,x,()=>t.id],a=>{["role","aria-label","aria-modal","id"].forEach((P,R)=>{Z.default(a[R])?o.removeAttribute(P):o.setAttribute(P,a[R])})},{immediate:!0})),p!==o&&F.isElement(p)&&["role","aria-label","aria-modal","id"].forEach(a=>{p.removeAttribute(a)})},{immediate:!0}),e.watch(()=>t.visible,D,{immediate:!0})}),e.onBeforeUnmount(()=>{r==null||r(),r=void 0}),l({popperContentRef:s,popperInstanceRef:S,updatePopper:v,contentStyle:d}),(n,C)=>(e.openBlock(),e.createElementBlock("div",e.mergeProps({ref_key:"contentRef",ref:s},e.unref($),{style:e.unref(d),class:e.unref(K),tabindex:"-1",onMouseenter:u(o=>n.$emit("mouseenter",o),"onMouseenter"),onMouseleave:u(o=>n.$emit("mouseleave",o),"onMouseleave")}),[e.createVNode(e.unref(Y.default),{trapped:e.unref(c),"trap-on-focus-in":!0,"focus-trap-el":e.unref(s),"focus-start-el":e.unref(T),onFocusAfterTrapped:e.unref(A),onFocusAfterReleased:e.unref(g),onFocusin:e.unref(I),onFocusoutPrevented:e.unref(O),onReleaseRequested:e.unref(h)},{default:e.withCtx(()=>[e.renderSlot(n.$slots,"default")]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusin","onFocusoutPrevented","onReleaseRequested"])],16,["onMouseenter","onMouseleave"]))}});var Q=J.default(G,[["__file","content.vue"]]);exports.default=Q;
