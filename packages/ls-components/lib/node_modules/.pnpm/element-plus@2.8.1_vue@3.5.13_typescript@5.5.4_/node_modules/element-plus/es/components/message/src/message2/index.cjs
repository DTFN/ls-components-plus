"use strict";var L=Object.defineProperty;var s=(l,u)=>L(l,"name",{value:u,configurable:!0});Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),g=require("../../../../../../../../@vueuse_core@9.13.0_vue@3.5.13_typescript@5.5.4_/node_modules/@vueuse/core/index/index.cjs"),V=require("../../../badge/index/index.cjs"),y=require("../../../icon/index/index.cjs"),k=require("../message/index.cjs"),B=require("../instance/index.cjs"),O=require("../../../../_virtual/plugin-vue_export-helper/index.cjs"),f=require("../../../../utils/vue/icon/index.cjs"),$=require("../../../config-provider/src/hooks/use-global-config/index.cjs"),I=require("../../../../constants/aria/index.cjs"),D=require("../../../../../../../../@vueuse_shared@9.13.0_vue@3.5.13_typescript@5.5.4_/node_modules/@vueuse/shared/index/index.cjs"),H=e.defineComponent({name:"ElMessage"}),R=e.defineComponent({...H,props:k.messageProps,emits:k.messageEmits,setup(l,{expose:u}){const o=l,{Close:h}=f.TypeComponents,{ns:t,zIndex:b}=$.useGlobalComponentSettings("message"),{currentZIndex:T,nextZIndex:E}=b,i=e.ref(),r=e.ref(!1),p=e.ref(0);let c;const M=e.computed(()=>o.type?o.type==="error"?"danger":o.type:"info"),q=e.computed(()=>{const n=o.type;return{[t.bm("icon",n)]:n&&f.TypeComponentsMap[n]}}),d=e.computed(()=>o.icon||f.TypeComponentsMap[o.type]||""),w=e.computed(()=>B.getLastOffset(o.id)),v=e.computed(()=>B.getOffsetOrSpace(o.id,o.offset)+w.value),N=e.computed(()=>p.value+v.value),z=e.computed(()=>({top:`${v.value}px`,zIndex:T.value}));function m(){o.duration!==0&&({stop:c}=D.useTimeoutFn(()=>{a()},o.duration))}s(m,"startTimer");function C(){c==null||c()}s(C,"clearTimer");function a(){r.value=!1}s(a,"close");function S({code:n}){n===I.EVENT_CODE.esc&&a()}return s(S,"keydown"),e.onMounted(()=>{m(),E(),r.value=!0}),e.watch(()=>o.repeatNum,()=>{C(),m()}),g.useEventListener(document,"keydown",S),g.useResizeObserver(i,()=>{p.value=i.value.getBoundingClientRect().height}),u({visible:r,bottom:N,close:a}),(n,F)=>(e.openBlock(),e.createBlock(e.Transition,{name:e.unref(t).b("fade"),onBeforeLeave:n.onClose,onAfterLeave:s(G=>n.$emit("destroy"),"onAfterLeave"),persisted:""},{default:e.withCtx(()=>[e.withDirectives(e.createElementVNode("div",{id:n.id,ref_key:"messageRef",ref:i,class:e.normalizeClass([e.unref(t).b(),{[e.unref(t).m(n.type)]:n.type},e.unref(t).is("center",n.center),e.unref(t).is("closable",n.showClose),e.unref(t).is("plain",n.plain),n.customClass]),style:e.normalizeStyle(e.unref(z)),role:"alert",onMouseenter:C,onMouseleave:m},[n.repeatNum>1?(e.openBlock(),e.createBlock(e.unref(V.ElBadge),{key:0,value:n.repeatNum,type:e.unref(M),class:e.normalizeClass(e.unref(t).e("badge"))},null,8,["value","type","class"])):e.createCommentVNode("v-if",!0),e.unref(d)?(e.openBlock(),e.createBlock(e.unref(y.ElIcon),{key:1,class:e.normalizeClass([e.unref(t).e("icon"),e.unref(q)])},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(d))))]),_:1},8,["class"])):e.createCommentVNode("v-if",!0),e.renderSlot(n.$slots,"default",{},()=>[n.dangerouslyUseHTMLString?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createCommentVNode(" Caution here, message could've been compromised, never use user's input as message "),e.createElementVNode("p",{class:e.normalizeClass(e.unref(t).e("content")),innerHTML:n.message},null,10,["innerHTML"])],2112)):(e.openBlock(),e.createElementBlock("p",{key:0,class:e.normalizeClass(e.unref(t).e("content"))},e.toDisplayString(n.message),3))]),n.showClose?(e.openBlock(),e.createBlock(e.unref(y.ElIcon),{key:2,class:e.normalizeClass(e.unref(t).e("closeBtn")),onClick:e.withModifiers(a,["stop"])},{default:e.withCtx(()=>[e.createVNode(e.unref(h))]),_:1},8,["class","onClick"])):e.createCommentVNode("v-if",!0)],46,["id"]),[[e.vShow,r.value]])]),_:3},8,["name","onBeforeLeave","onAfterLeave"]))}});var A=O.default(R,[["__file","message.vue"]]);exports.default=A;
