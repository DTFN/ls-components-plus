"use strict";var M=Object.defineProperty;var o=(m,p)=>M(m,"name",{value:p,configurable:!0});Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const t=require("vue"),S=require("../constants/index.cjs"),q=require("../form/index.cjs"),d=require("../utils/index.cjs"),T=require("../../../../_virtual/plugin-vue_export-helper/index.cjs"),W=require("../hooks/use-form-common-props/index.cjs"),x=require("../../../../hooks/use-namespace/index/index.cjs"),u=require("../../../../utils/error/index.cjs"),N=require("../../../../../../../../@vue_shared@3.5.13/node_modules/@vue/shared/dist/shared.esm-bundler/index.cjs"),f="ElForm",z=t.defineComponent({name:f}),B=t.defineComponent({...z,props:q.formProps,emits:q.formEmits,setup(m,{expose:p,emit:w}){const l=m,s=[],b=W.useFormSize(),c=x.useNamespace("form"),E=t.computed(()=>{const{labelPosition:e,inline:r}=l;return[c.b(),c.m(b.value||"default"),{[c.m(`label-${e}`)]:e,[c.m("inline")]:r}]}),y=o(e=>s.find(r=>r.prop===e),"getField"),C=o(e=>{s.push(e)},"addField"),O=o(e=>{e.prop&&s.splice(s.indexOf(e),1)},"removeField"),F=o((e=[])=>{if(!l.model){u.debugWarn(f,"model is required for resetFields to work.");return}d.filterFields(s,e).forEach(r=>r.resetField())},"resetFields"),h=o((e=[])=>{d.filterFields(s,e).forEach(r=>r.clearValidate())},"clearValidate"),V=t.computed(()=>{const e=!!l.model;return e||u.debugWarn(f,"model is required for validate to work."),e}),P=o(e=>{if(s.length===0)return[];const r=d.filterFields(s,e);return r.length?r:(u.debugWarn(f,"please pass correct props!"),[])},"obtainValidateFields"),_=o(async e=>v(void 0,e),"validate"),j=o(async(e=[])=>{if(!V.value)return!1;const r=P(e);if(r.length===0)return!0;let i={};for(const n of r)try{await n.validate("")}catch(a){i={...i,...a}}return Object.keys(i).length===0?!0:Promise.reject(i)},"doValidateField"),v=o(async(e=[],r)=>{const i=!N.isFunction(r);try{const n=await j(e);return n===!0&&await(r==null?void 0:r(n)),n}catch(n){if(n instanceof Error)throw n;const a=n;return l.scrollToError&&g(Object.keys(a)[0]),await(r==null?void 0:r(!1,a)),i&&Promise.reject(a)}},"validateField"),g=o(e=>{var r;const i=d.filterFields(s,e)[0];i&&((r=i.$el)==null||r.scrollIntoView(l.scrollIntoViewOptions))},"scrollToField");return t.watch(()=>l.rules,()=>{l.validateOnRuleChange&&_().catch(e=>u.debugWarn(e))},{deep:!0}),t.provide(S.formContextKey,t.reactive({...t.toRefs(l),emit:w,resetFields:F,clearValidate:h,validateField:v,getField:y,addField:C,removeField:O,...d.useFormLabelWidth()})),p({validate:_,validateField:v,resetFields:F,clearValidate:h,scrollToField:g,fields:s}),(e,r)=>(t.openBlock(),t.createElementBlock("form",{class:t.normalizeClass(t.unref(E))},[t.renderSlot(e.$slots,"default")],2))}});var $=T.default(B,[["__file","form.vue"]]);exports.default=$;
