"use strict";var b=Object.defineProperty;var t=(e,s)=>b(e,"name",{value:s,configurable:!0});Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const u=require("vue"),x=require("../message2/index.cjs"),v=require("../message/index.cjs"),c=require("../instance/index.cjs"),p=require("../../../../../../../../@vue_shared@3.5.13/node_modules/@vue/shared/dist/shared.esm-bundler/index.cjs"),h=require("../../../../utils/types/index.cjs"),y=require("../../../../utils/error/index.cjs"),f=require("../../../config-provider/src/config-provider/index.cjs"),C=require("../../../../../../../../@vueuse_shared@9.13.0_vue@3.5.13_typescript@5.5.4_/node_modules/@vueuse/shared/index/index.cjs");let _=1;const q=t(e=>{const s=!e||p.isString(e)||u.isVNode(e)||p.isFunction(e)?{message:e}:e,n={...v.messageDefaults,...s};if(!n.appendTo)n.appendTo=document.body;else if(p.isString(n.appendTo)){let o=document.querySelector(n.appendTo);h.isElement(o)||(y.debugWarn("ElMessage","the appendTo option is not an HTMLElement. Falling back to document.body."),o=document.body),n.appendTo=o}return n},"normalizeOptions"),E=t(e=>{const s=c.instances.indexOf(e);if(s===-1)return;c.instances.splice(s,1);const{handler:n}=e;n.close()},"closeMessage"),M=t(({appendTo:e,...s},n)=>{const o=`message_${_++}`,i=s.onClose,a=document.createElement("div"),r={...s,id:o,onClose:t(()=>{i==null||i(),E(g)},"onClose"),onDestroy:t(()=>{u.render(null,a)},"onDestroy")},d=u.createVNode(x.default,r,p.isFunction(r.message)||u.isVNode(r.message)?{default:p.isFunction(r.message)?r.message:()=>r.message}:null);d.appContext=n||l._context,u.render(d,a),e.appendChild(a.firstElementChild);const m=d.component,g={id:o,vnode:d,vm:m,handler:{close:t(()=>{m.exposed.visible.value=!1},"close")},props:d.component.props};return g},"createMessage"),l=t((e={},s)=>{if(!C.isClient)return{close:t(()=>{},"close")};if(h.isNumber(f.messageConfig.max)&&c.instances.length>=f.messageConfig.max)return{close:t(()=>{},"close")};const n=q(e);if(n.grouping&&c.instances.length){const i=c.instances.find(({vnode:a})=>{var r;return((r=a.props)==null?void 0:r.message)===n.message});if(i)return i.props.repeatNum+=1,i.props.type=n.type,i.handler}const o=M(n,s);return c.instances.push(o),o.handler},"message");v.messageTypes.forEach(e=>{l[e]=(s={},n)=>{const o=q(s);return l({...o,type:e},n)}});function T(e){for(const s of c.instances)(!e||e===s.props.type)&&s.handler.close()}t(T,"closeAll");l.closeAll=T;l._context=null;exports.closeAll=T;exports.default=l;
