"use strict";var q=Object.defineProperty;var s=(n,u)=>q(n,"name",{value:u,configurable:!0});Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),V=require("../../../../../../../../@vueuse_core@9.13.0_vue@3.5.13_typescript@5.5.4_/node_modules/@vueuse/core/index/index.cjs"),E=require("../roving-focus-group/index.cjs"),B=require("../tokens/index.cjs"),H=require("../utils/index.cjs"),P=require("../../../../_virtual/plugin-vue_export-helper/index.cjs"),v=require("../../../../utils/dom/event/index.cjs"),F="currentTabIdChange",m="rovingFocusGroup.entryFocus",U={bubbles:!1,cancelable:!0},$=e.defineComponent({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:E.rovingFocusGroupProps,emits:[F,"entryFocus"],setup(n,{emit:u}){var i;const l=e.ref((i=n.currentTabId||n.defaultCurrentTabId)!=null?i:null),c=e.ref(!1),a=e.ref(!1),_=e.ref(null),{getItems:T}=e.inject(E.ROVING_FOCUS_COLLECTION_INJECTION_KEY,void 0),b=e.computed(()=>[{outline:"none"},n.style]),g=s(t=>{u(F,t)},"onItemFocus"),C=s(()=>{c.value=!0},"onItemShiftTab"),O=v.composeEventHandlers(t=>{var o;(o=n.onMousedown)==null||o.call(n,t)},()=>{a.value=!0}),R=v.composeEventHandlers(t=>{var o;(o=n.onFocus)==null||o.call(n,t)},t=>{const o=!e.unref(a),{target:p,currentTarget:d}=t;if(p===d&&o&&!e.unref(c)){const I=new Event(m,U);if(d==null||d.dispatchEvent(I),!I.defaultPrevented){const f=T().filter(r=>r.focusable),y=f.find(r=>r.active),S=f.find(r=>r.id===e.unref(l)),h=[y,S,...f].filter(Boolean).map(r=>r.ref);H.focusFirst(h)}}a.value=!1}),G=v.composeEventHandlers(t=>{var o;(o=n.onBlur)==null||o.call(n,t)},()=>{c.value=!1}),N=s((...t)=>{u("entryFocus",...t)},"handleEntryFocus");e.provide(B.ROVING_FOCUS_GROUP_INJECTION_KEY,{currentTabbedId:e.readonly(l),loop:e.toRef(n,"loop"),tabIndex:e.computed(()=>e.unref(c)?-1:0),rovingFocusGroupRef:_,rovingFocusGroupRootStyle:b,orientation:e.toRef(n,"orientation"),dir:e.toRef(n,"dir"),onItemFocus:g,onItemShiftTab:C,onBlur:G,onFocus:R,onMousedown:O}),e.watch(()=>n.currentTabId,t=>{l.value=t??null}),V.useEventListener(_,m,N)}});function w(n,u,i,l,c,a){return e.renderSlot(n.$slots,"default")}s(w,"_sfc_render");var M=P.default($,[["render",w],["__file","roving-focus-group-impl.vue"]]);exports.default=M;
