"use strict";var q=Object.defineProperty;var c=(e,r)=>q(e,"name",{value:r,configurable:!0});Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const u=require("vue"),p=require("../token/index.cjs"),o=require("../../../../../../../../@vue_shared@3.5.13/node_modules/@vue/shared/dist/shared.esm-bundler/index.cjs"),S=require("../../../../utils/strings/index.cjs"),v=require("../../../../../../../../lodash-es@4.17.21/node_modules/lodash-es/castArray/index.cjs"),f=require("../../../../../../../../lodash-es@4.17.21/node_modules/lodash-es/get/index.cjs");function w(e,r){const t=u.inject(p.selectKey),a=u.inject(p.selectGroupKey,{disabled:!1}),b=u.computed(()=>h(v.default(t.props.modelValue),e.value)),y=u.computed(()=>{var n;if(t.props.multiple){const i=v.default((n=t.props.modelValue)!=null?n:[]);return!b.value&&i.length>=t.props.multipleLimit&&t.props.multipleLimit>0}else return!1}),d=u.computed(()=>e.label||(o.isObject(e.value)?"":e.value)),g=u.computed(()=>e.value||e.label||""),O=u.computed(()=>e.disabled||r.groupDisabled||y.value),m=u.getCurrentInstance(),h=c((n=[],i)=>{if(o.isObject(e.value)){const l=t.props.valueKey;return n&&n.some(s=>u.toRaw(f.default(s,l))===f.default(i,l))}else return n&&n.includes(i)},"contains"),x=c(()=>{!e.disabled&&!a.disabled&&(t.states.hoveringIndex=t.optionsArray.indexOf(m.proxy))},"hoverItem"),j=c(n=>{const i=new RegExp(S.escapeStringRegexp(n),"i");r.visible=i.test(d.value)||e.created},"updateOption");return u.watch(()=>d.value,()=>{!e.created&&!t.props.remote&&t.setSelected()}),u.watch(()=>e.value,(n,i)=>{const{remote:l,valueKey:s}=t.props;if(n!==i&&(t.onOptionDestroy(i,m.proxy),t.onOptionCreate(m.proxy)),!e.created&&!l){if(s&&o.isObject(n)&&o.isObject(i)&&n[s]===i[s])return;t.setSelected()}}),u.watch(()=>a.disabled,()=>{r.groupDisabled=a.disabled},{immediate:!0}),{select:t,currentLabel:d,currentValue:g,itemSelected:b,isDisabled:O,hoverItem:x,updateOption:j}}c(w,"useOption");exports.useOption=w;
