"use strict";var O=Object.defineProperty;var a=(n,l)=>O(n,"name",{value:l,configurable:!0});Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const r=require("vue"),T=require("../../../../checkbox/index/index.cjs"),E=require("../../filter-panel/index.cjs"),R=require("../../layout-observer/index.cjs"),_=require("../../tokens/index.cjs"),x=require("../event-helper/index.cjs"),P=require("../style.helper/index.cjs"),j=require("../utils-helper/index.cjs"),D=require("../../../../../hooks/use-namespace/index/index.cjs");var F=r.defineComponent({name:"ElTableHeader",components:{ElCheckbox:T.ElCheckbox},props:{fixed:{type:String,default:""},store:{required:!0,type:Object},border:Boolean,defaultSort:{type:Object,default:a(()=>({prop:"",order:""}),"default")}},setup(n,{emit:l}){const u=r.getCurrentInstance(),o=r.inject(_.TABLE_INJECTION_KEY),H=D.useNamespace("table"),h=r.ref({}),{onColumnsChange:p,onScrollableChange:f}=R.default(o);r.onMounted(async()=>{await r.nextTick(),await r.nextTick();const{prop:q,order:v}=n.defaultSort;o==null||o.store.commit("sort",{prop:q,order:v,init:!0})});const{handleHeaderClick:S,handleHeaderContextMenu:k,handleMouseDown:M,handleMouseMove:i,handleMouseOut:y,handleSortClick:C,handleFilterClick:b}=x.default(n,l),{getHeaderRowStyle:g,getHeaderRowClass:d,getHeaderCellStyle:s,getHeaderCellClass:e}=P.default(n),{isGroup:c,toggleAllSelection:t,columnRows:w}=j.default(n);return u.state={onColumnsChange:p,onScrollableChange:f},u.filterPanels=h,{ns:H,filterPanels:h,onColumnsChange:p,onScrollableChange:f,columnRows:w,getHeaderRowClass:d,getHeaderRowStyle:g,getHeaderCellClass:e,getHeaderCellStyle:s,handleHeaderClick:S,handleHeaderContextMenu:k,handleMouseDown:M,handleMouseMove:i,handleMouseOut:y,handleSortClick:C,handleFilterClick:b,isGroup:c,toggleAllSelection:t}},render(){const{ns:n,isGroup:l,columnRows:u,getHeaderCellStyle:o,getHeaderCellClass:H,getHeaderRowClass:h,getHeaderRowStyle:p,handleHeaderClick:f,handleHeaderContextMenu:S,handleMouseDown:k,handleMouseMove:M,handleSortClick:i,handleMouseOut:y,store:C,$parent:b}=this;let g=1;return r.h("thead",{class:{[n.is("group")]:l}},u.map((d,s)=>r.h("tr",{class:h(s),key:s,style:p(s)},d.map((e,c)=>(e.rowSpan>g&&(g=e.rowSpan),r.h("th",{class:H(s,c,d,e),colspan:e.colSpan,key:`${e.id}-thead`,rowspan:e.rowSpan,style:o(s,c,d,e),onClick:a(t=>{t.currentTarget.classList.contains("noclick")||f(t,e)},"onClick"),onContextmenu:a(t=>S(t,e),"onContextmenu"),onMousedown:a(t=>k(t,e),"onMousedown"),onMousemove:a(t=>M(t,e),"onMousemove"),onMouseout:y},[r.h("div",{class:["cell",e.filteredValue&&e.filteredValue.length>0?"highlight":""]},[e.renderHeader?e.renderHeader({column:e,$index:c,store:C,_self:b}):e.label,e.sortable&&r.h("span",{onClick:a(t=>i(t,e),"onClick"),class:"caret-wrapper"},[r.h("i",{onClick:a(t=>i(t,e,"ascending"),"onClick"),class:"sort-caret ascending"}),r.h("i",{onClick:a(t=>i(t,e,"descending"),"onClick"),class:"sort-caret descending"})]),e.filterable&&r.h(E.default,{store:C,placement:e.filterPlacement||"bottom-start",column:e,upDataColumn:a((t,w)=>{e[t]=w},"upDataColumn")},{"filter-icon":a(()=>e.renderFilterIcon?e.renderFilterIcon({filterOpened:e.filterOpened}):null,"filter-icon")})])]))))))}});exports.default=F;
