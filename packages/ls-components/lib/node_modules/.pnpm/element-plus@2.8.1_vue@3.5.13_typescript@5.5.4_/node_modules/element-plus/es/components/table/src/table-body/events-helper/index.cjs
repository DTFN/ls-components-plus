"use strict";var j=Object.defineProperty;var s=(a,c)=>j(a,"name",{value:c,configurable:!0});Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const g=require("vue"),u=require("../../util/index.cjs"),z=require("../../tokens/index.cjs"),f=require("../../../../../utils/dom/style/index.cjs"),S=require("../../../../../../../../../lodash-es@4.17.21/node_modules/lodash-es/debounce/index.cjs");function p(a,c,h=.03){return a-c>h}s(p,"isGreaterThan");function A(a){const c=g.inject(z.TABLE_INJECTION_KEY),h=g.ref(""),N=g.ref(g.h("div")),m=s((e,t,l)=>{var o;const n=c,i=u.getCell(e);let d;const r=(o=n==null?void 0:n.vnode.el)==null?void 0:o.dataset.prefix;i&&(d=u.getColumnByCell({columns:a.store.states.columns.value},i,r),d&&(n==null||n.emit(`cell-${l}`,t,d,i,e))),n==null||n.emit(`row-${l}`,t,d,e)},"handleEvent"),R=s((e,t)=>{m(e,t,"dblclick")},"handleDoubleClick"),T=s((e,t)=>{a.store.commit("setCurrentRow",t),m(e,t,"click")},"handleClick"),E=s((e,t)=>{m(e,t,"contextmenu")},"handleContextMenu"),M=S.default(e=>{a.store.commit("setHoverRow",e)},30),x=S.default(()=>{a.store.commit("setHoverRow",null)},30),y=s(e=>{const t=window.getComputedStyle(e,null),l=Number.parseInt(t.paddingLeft,10)||0,o=Number.parseInt(t.paddingRight,10)||0,n=Number.parseInt(t.paddingTop,10)||0,i=Number.parseInt(t.paddingBottom,10)||0;return{left:l,right:o,top:n,bottom:i}},"getPadding"),b=s((e,t,l)=>{let o=t.target.parentNode;for(;e>1&&(o=o==null?void 0:o.nextSibling,!(!o||o.nodeName!=="TR"));)l(o,"hover-row hover-fixed-row"),e--},"toggleRowClassByCell");return{handleDoubleClick:R,handleClick:T,handleContextMenu:E,handleMouseEnter:M,handleMouseLeave:x,handleCellMouseEnter:s((e,t,l)=>{var o;const n=c,i=u.getCell(e),d=(o=n==null?void 0:n.vnode.el)==null?void 0:o.dataset.prefix;if(i){const $=u.getColumnByCell({columns:a.store.states.columns.value},i,d);i.rowSpan>1&&b(i.rowSpan,e,f.addClass);const C=n.hoverState={cell:i,column:$,row:t};n==null||n.emit("cell-mouse-enter",C.row,C.column,C.cell,e)}if(!l)return;const r=e.target.querySelector(".cell");if(!(f.hasClass(r,`${d}-tooltip`)&&r.childNodes.length))return;const v=document.createRange();v.setStart(r,0),v.setEnd(r,r.childNodes.length);const{width:B,height:k}=v.getBoundingClientRect(),{width:w,height:q}=r.getBoundingClientRect(),{top:I,left:L,right:_,bottom:H}=y(r),P=L+_,W=I+H;(p(B+P,w)||p(k+W,q)||p(r.scrollWidth,w))&&u.createTablePopper(l,i.innerText||i.textContent,i,n)},"handleCellMouseEnter"),handleCellMouseLeave:s(e=>{const t=u.getCell(e);if(!t)return;t.rowSpan>1&&b(t.rowSpan,e,f.removeClass);const l=c==null?void 0:c.hoverState;c==null||c.emit("cell-mouse-leave",l==null?void 0:l.row,l==null?void 0:l.column,l==null?void 0:l.cell,e)},"handleCellMouseLeave"),tooltipContent:h,tooltipTrigger:N}}s(A,"useEvents");exports.default=A;
