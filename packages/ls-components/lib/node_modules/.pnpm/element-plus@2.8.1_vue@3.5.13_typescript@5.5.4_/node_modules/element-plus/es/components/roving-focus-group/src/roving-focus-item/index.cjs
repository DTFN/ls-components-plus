"use strict";var y=Object.defineProperty;var b=(t,r)=>y(t,"name",{value:r,configurable:!0});Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),O=require("../roving-focus-group/index.cjs"),C=require("../tokens/index.cjs"),a=require("../utils/index.cjs"),h=require("../../../../_virtual/plugin-vue_export-helper/index.cjs"),q=require("../../../../hooks/use-id/index/index.cjs"),f=require("../../../../utils/dom/event/index.cjs"),w=require("../../../../constants/aria/index.cjs"),R=e.defineComponent({components:{ElRovingFocusCollectionItem:O.ElCollectionItem},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(t,{emit:r}){const{currentTabbedId:d,loop:p,onItemFocus:u,onItemShiftTab:v}=e.inject(C.ROVING_FOCUS_GROUP_INJECTION_KEY,void 0),{getItems:i}=e.inject(O.ROVING_FOCUS_COLLECTION_INJECTION_KEY,void 0),c=q.useId(),g=e.ref(null),_=f.composeEventHandlers(o=>{r("mousedown",o)},o=>{t.focusable?u(e.unref(c)):o.preventDefault()}),m=f.composeEventHandlers(o=>{r("focus",o)},()=>{u(e.unref(c))}),I=f.composeEventHandlers(o=>{r("keydown",o)},o=>{const{key:F,shiftKey:N,target:k,currentTarget:E}=o;if(F===w.EVENT_CODE.tab&&N){v();return}if(k!==E)return;const l=a.getFocusIntent(o);if(l){o.preventDefault();let n=i().filter(s=>s.focusable).map(s=>s.ref);switch(l){case"last":{n.reverse();break}case"prev":case"next":{l==="prev"&&n.reverse();const s=n.indexOf(E);n=p.value?a.reorderArray(n,s+1):n.slice(s+1);break}}e.nextTick(()=>{a.focusFirst(n)})}}),T=e.computed(()=>d.value===e.unref(c));return e.provide(C.ROVING_FOCUS_GROUP_ITEM_INJECTION_KEY,{rovingFocusGroupItemRef:g,tabIndex:e.computed(()=>e.unref(T)?0:-1),handleMousedown:_,handleFocus:m,handleKeydown:I}),{id:c,handleKeydown:I,handleFocus:m,handleMousedown:_}}});function G(t,r,d,p,u,v){const i=e.resolveComponent("el-roving-focus-collection-item");return e.openBlock(),e.createBlock(i,{id:t.id,focusable:t.focusable,active:t.active},{default:e.withCtx(()=>[e.renderSlot(t.$slots,"default")]),_:3},8,["id","focusable","active"])}b(G,"_sfc_render");var S=h.default(R,[["render",G],["__file","roving-focus-item.vue"]]);exports.default=S;
