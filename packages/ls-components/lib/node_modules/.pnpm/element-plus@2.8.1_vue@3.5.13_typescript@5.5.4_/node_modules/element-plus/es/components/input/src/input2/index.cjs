"use strict";var xe=Object.defineProperty;var r=(I,V)=>xe(I,"name",{value:V,configurable:!0});Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),Be=require("../../../../../../../../@vueuse_core@9.13.0_vue@3.5.13_typescript@5.5.4_/node_modules/@vueuse/core/index/index.cjs"),k=require("../../../icon/index/index.cjs"),q=require("@element-plus/icons-vue"),_=require("../utils/index.cjs"),ee=require("../input/index.cjs"),Ie=require("../../../../_virtual/plugin-vue_export-helper/index.cjs"),Ve=require("../../../../hooks/use-attrs/index/index.cjs"),oe=require("../../../form/src/hooks/use-form-item/index.cjs"),ne=require("../../../form/src/hooks/use-form-common-props/index.cjs"),te=require("../../../../hooks/use-namespace/index/index.cjs"),Ee=require("../../../../hooks/use-focus-controller/index/index.cjs"),P=require("../../../../utils/error/index.cjs"),Ne=require("../../../../utils/vue/icon/index.cjs"),ze=require("../../../../hooks/use-cursor/index/index.cjs"),$=require("../../../../../../../../@vue_shared@3.5.13/node_modules/@vue/shared/dist/shared.esm-bundler/index.cjs"),ae=require("../../../../constants/event/index.cjs"),Se=require("../../../../hooks/use-composition/index/index.cjs"),qe=require("../../../../../../../../lodash-es@4.17.21/node_modules/lodash-es/isNil/index.cjs"),Pe=require("../../../../../../../../@vueuse_shared@9.13.0_vue@3.5.13_typescript@5.5.4_/node_modules/@vueuse/shared/index/index.cjs"),$e=e.defineComponent({name:"ElInput",inheritAttrs:!1}),Fe=e.defineComponent({...$e,props:ee.inputProps,emits:ee.inputEmits,setup(I,{expose:V,emit:s}){const n=I,m=e.useAttrs(),v=e.useSlots(),F=e.computed(()=>{const o={};return n.containerRole==="combobox"&&(o["aria-haspopup"]=m["aria-haspopup"],o["aria-owns"]=m["aria-owns"],o["aria-expanded"]=m["aria-expanded"]),o}),re=e.computed(()=>[n.type==="textarea"?M.b():t.b(),t.m(le.value),t.is("disabled",c.value),t.is("exceed",fe.value),{[t.b("group")]:v.prepend||v.append,[t.m("prefix")]:v.prefix||n.prefixIcon,[t.m("suffix")]:v.suffix||n.suffixIcon||n.clearable||n.showPassword,[t.bm("suffix","password-clear")]:B.value&&N.value,[t.b("hidden")]:n.type==="hidden"},m.class]),se=e.computed(()=>[t.e("wrapper"),t.is("focus",x.value)]),R=Ve.useAttrs({excludeKeys:e.computed(()=>Object.keys(F.value))}),{form:T,formItem:l}=oe.useFormItem(),{inputId:D}=oe.useFormItemInputId(n,{formItemContext:l}),le=ne.useFormSize(),c=ne.useFormDisabled(),t=te.useNamespace("input"),M=te.useNamespace("textarea"),g=e.shallowRef(),u=e.shallowRef(),E=e.ref(!1),w=e.ref(!1),O=e.ref(),b=e.shallowRef(n.inputStyle),d=e.computed(()=>g.value||u.value),{wrapperRef:ue,isFocused:x,handleFocus:ie,handleBlur:ce}=Ee.useFocusController(d,{afterBlur(){var o;n.validateEvent&&((o=l==null?void 0:l.validate)==null||o.call(l,"blur").catch(a=>P.debugWarn(a)))}}),H=e.computed(()=>{var o;return(o=T==null?void 0:T.statusIcon)!=null?o:!1}),h=e.computed(()=>(l==null?void 0:l.validateState)||""),A=e.computed(()=>h.value&&Ne.ValidateComponentsMap[h.value]),de=e.computed(()=>w.value?q.View:q.Hide),pe=e.computed(()=>[m.style]),L=e.computed(()=>[n.inputStyle,b.value,{resize:n.resize}]),i=e.computed(()=>qe.default(n.modelValue)?"":String(n.modelValue)),B=e.computed(()=>n.clearable&&!c.value&&!n.readonly&&!!i.value&&(x.value||E.value)),N=e.computed(()=>n.showPassword&&!c.value&&!n.readonly&&!!i.value&&(!!i.value||x.value)),p=e.computed(()=>n.showWordLimit&&!!n.maxlength&&(n.type==="text"||n.type==="textarea")&&!c.value&&!n.readonly&&!n.showPassword),z=e.computed(()=>i.value.length),fe=e.computed(()=>!!p.value&&z.value>Number(n.maxlength)),me=e.computed(()=>!!v.suffix||!!n.suffixIcon||B.value||n.showPassword||p.value||!!h.value&&H.value),[ve,he]=ze.useCursor(g);Be.useResizeObserver(u,o=>{if(Ce(),!p.value||n.resize!=="both")return;const a=o[0],{width:f}=a.contentRect;O.value={right:`calc(100% - ${f+15+6}px)`}});const C=r(()=>{const{type:o,autosize:a}=n;if(!(!Pe.isClient||o!=="textarea"||!u.value))if(a){const f=$.isObject(a)?a.minRows:void 0,X=$.isObject(a)?a.maxRows:void 0,Z=_.calcTextareaHeight(u.value,f,X);b.value={overflowY:"hidden",...Z},e.nextTick(()=>{u.value.offsetHeight,b.value=Z})}else b.value={minHeight:_.calcTextareaHeight(u.value).minHeight}},"resizeTextarea"),Ce=r(o=>{let a=!1;return()=>{var f;if(a||!n.autosize)return;((f=u.value)==null?void 0:f.offsetParent)===null||(o(),a=!0)}},"createOnceInitResize")(C),y=r(()=>{const o=d.value,a=n.formatter?n.formatter(i.value):i.value;!o||o.value===a||(o.value=a)},"setNativeInputValue"),S=r(async o=>{ve();let{value:a}=o.target;if(n.formatter&&(a=n.parser?n.parser(a):a),!W.value){if(a===i.value){y();return}s(ae.UPDATE_MODEL_EVENT,a),s("input",a),await e.nextTick(),y(),he()}},"handleInput"),K=r(o=>{s("change",o.target.value)},"handleChange"),{isComposing:W,handleCompositionStart:j,handleCompositionUpdate:U,handleCompositionEnd:Y}=Se.useComposition({emit:s,afterComposition:S}),ye=r(()=>{w.value=!w.value,G()},"handlePasswordVisible"),G=r(async()=>{var o;await e.nextTick(),(o=d.value)==null||o.focus()},"focus"),ke=r(()=>{var o;return(o=d.value)==null?void 0:o.blur()},"blur"),ge=r(o=>{E.value=!1,s("mouseleave",o)},"handleMouseLeave"),we=r(o=>{E.value=!0,s("mouseenter",o)},"handleMouseEnter"),J=r(o=>{s("keydown",o)},"handleKeydown"),be=r(()=>{var o;(o=d.value)==null||o.select()},"select"),Q=r(()=>{s(ae.UPDATE_MODEL_EVENT,""),s("change",""),s("clear"),s("input","")},"clear");return e.watch(()=>n.modelValue,()=>{var o;e.nextTick(()=>C()),n.validateEvent&&((o=l==null?void 0:l.validate)==null||o.call(l,"change").catch(a=>P.debugWarn(a)))}),e.watch(i,()=>y()),e.watch(()=>n.type,async()=>{await e.nextTick(),y(),C()}),e.onMounted(()=>{!n.formatter&&n.parser&&P.debugWarn("ElInput","If you set the parser, you also need to set the formatter."),y(),e.nextTick(C)}),V({input:g,textarea:u,ref:d,textareaStyle:L,autosize:e.toRef(n,"autosize"),isComposing:W,focus:G,blur:ke,select:be,clear:Q,resizeTextarea:C}),(o,a)=>(e.openBlock(),e.createElementBlock("div",e.mergeProps(e.unref(F),{class:[e.unref(re),{[e.unref(t).bm("group","append")]:o.$slots.append,[e.unref(t).bm("group","prepend")]:o.$slots.prepend}],style:e.unref(pe),role:o.containerRole,onMouseenter:we,onMouseleave:ge}),[e.createCommentVNode(" input "),o.type!=="textarea"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createCommentVNode(" prepend slot "),o.$slots.prepend?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(e.unref(t).be("group","prepend"))},[e.renderSlot(o.$slots,"prepend")],2)):e.createCommentVNode("v-if",!0),e.createElementVNode("div",{ref_key:"wrapperRef",ref:ue,class:e.normalizeClass(e.unref(se))},[e.createCommentVNode(" prefix slot "),o.$slots.prefix||o.prefixIcon?(e.openBlock(),e.createElementBlock("span",{key:0,class:e.normalizeClass(e.unref(t).e("prefix"))},[e.createElementVNode("span",{class:e.normalizeClass(e.unref(t).e("prefix-inner"))},[e.renderSlot(o.$slots,"prefix"),o.prefixIcon?(e.openBlock(),e.createBlock(e.unref(k.ElIcon),{key:0,class:e.normalizeClass(e.unref(t).e("icon"))},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(o.prefixIcon)))]),_:1},8,["class"])):e.createCommentVNode("v-if",!0)],2)],2)):e.createCommentVNode("v-if",!0),e.createElementVNode("input",e.mergeProps({id:e.unref(D),ref_key:"input",ref:g,class:e.unref(t).e("inner")},e.unref(R),{minlength:o.minlength,maxlength:o.maxlength,type:o.showPassword?w.value?"text":"password":o.type,disabled:e.unref(c),readonly:o.readonly,autocomplete:o.autocomplete,tabindex:o.tabindex,"aria-label":o.ariaLabel,placeholder:o.placeholder,style:o.inputStyle,form:o.form,autofocus:o.autofocus,onCompositionstart:e.unref(j),onCompositionupdate:e.unref(U),onCompositionend:e.unref(Y),onInput:S,onChange:K,onKeydown:J}),null,16,["id","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","onCompositionstart","onCompositionupdate","onCompositionend"]),e.createCommentVNode(" suffix slot "),e.unref(me)?(e.openBlock(),e.createElementBlock("span",{key:1,class:e.normalizeClass(e.unref(t).e("suffix"))},[e.createElementVNode("span",{class:e.normalizeClass(e.unref(t).e("suffix-inner"))},[!e.unref(B)||!e.unref(N)||!e.unref(p)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.renderSlot(o.$slots,"suffix"),o.suffixIcon?(e.openBlock(),e.createBlock(e.unref(k.ElIcon),{key:0,class:e.normalizeClass(e.unref(t).e("icon"))},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(o.suffixIcon)))]),_:1},8,["class"])):e.createCommentVNode("v-if",!0)],64)):e.createCommentVNode("v-if",!0),e.unref(B)?(e.openBlock(),e.createBlock(e.unref(k.ElIcon),{key:1,class:e.normalizeClass([e.unref(t).e("icon"),e.unref(t).e("clear")]),onMousedown:e.withModifiers(e.unref($.NOOP),["prevent"]),onClick:Q},{default:e.withCtx(()=>[e.createVNode(e.unref(q.CircleClose))]),_:1},8,["class","onMousedown"])):e.createCommentVNode("v-if",!0),e.unref(N)?(e.openBlock(),e.createBlock(e.unref(k.ElIcon),{key:2,class:e.normalizeClass([e.unref(t).e("icon"),e.unref(t).e("password")]),onClick:ye},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(de))))]),_:1},8,["class"])):e.createCommentVNode("v-if",!0),e.unref(p)?(e.openBlock(),e.createElementBlock("span",{key:3,class:e.normalizeClass(e.unref(t).e("count"))},[e.createElementVNode("span",{class:e.normalizeClass(e.unref(t).e("count-inner"))},e.toDisplayString(e.unref(z))+" / "+e.toDisplayString(o.maxlength),3)],2)):e.createCommentVNode("v-if",!0),e.unref(h)&&e.unref(A)&&e.unref(H)?(e.openBlock(),e.createBlock(e.unref(k.ElIcon),{key:4,class:e.normalizeClass([e.unref(t).e("icon"),e.unref(t).e("validateIcon"),e.unref(t).is("loading",e.unref(h)==="validating")])},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(A))))]),_:1},8,["class"])):e.createCommentVNode("v-if",!0)],2)],2)):e.createCommentVNode("v-if",!0)],2),e.createCommentVNode(" append slot "),o.$slots.append?(e.openBlock(),e.createElementBlock("div",{key:1,class:e.normalizeClass(e.unref(t).be("group","append"))},[e.renderSlot(o.$slots,"append")],2)):e.createCommentVNode("v-if",!0)],64)):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createCommentVNode(" textarea "),e.createElementVNode("textarea",e.mergeProps({id:e.unref(D),ref_key:"textarea",ref:u,class:[e.unref(M).e("inner"),e.unref(t).is("focus",e.unref(x))]},e.unref(R),{minlength:o.minlength,maxlength:o.maxlength,tabindex:o.tabindex,disabled:e.unref(c),readonly:o.readonly,autocomplete:o.autocomplete,style:e.unref(L),"aria-label":o.ariaLabel,placeholder:o.placeholder,form:o.form,autofocus:o.autofocus,rows:o.rows,onCompositionstart:e.unref(j),onCompositionupdate:e.unref(U),onCompositionend:e.unref(Y),onInput:S,onFocus:e.unref(ie),onBlur:e.unref(ce),onChange:K,onKeydown:J}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),e.unref(p)?(e.openBlock(),e.createElementBlock("span",{key:0,style:e.normalizeStyle(O.value),class:e.normalizeClass(e.unref(t).e("count"))},e.toDisplayString(e.unref(z))+" / "+e.toDisplayString(o.maxlength),7)):e.createCommentVNode("v-if",!0)],64))],16,["role"]))}});var Re=Ie.default(Fe,[["__file","input.vue"]]);exports.default=Re;
