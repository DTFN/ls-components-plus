"use strict";var F=Object.defineProperty;var u=(e,n)=>F(e,"name",{value:n,configurable:!0});Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const v=require("vue"),P=require("../../../tooltip/index/index.cjs"),p=require("../../../../../../../../@vue_shared@3.5.13/node_modules/@vue/shared/dist/shared.esm-bundler/index.cjs"),R=require("../../../../utils/error/index.cjs"),_=require("../../../../utils/types/index.cjs"),A=require("../../../../../../../../lodash-es@4.17.21/node_modules/lodash-es/flatMap/index.cjs"),y=require("../../../../../../../../lodash-es@4.17.21/node_modules/lodash-es/get/index.cjs"),I=u(function(e){var n;return(n=e.target)==null?void 0:n.closest("td")},"getCell"),M=u(function(e,n,r,t,o){if(!n&&!t&&(!o||Array.isArray(o)&&!o.length))return e;typeof r=="string"?r=r==="descending"?-1:1:r=r&&r<0?-1:1;const f=t?null:function(i,c){return o?(Array.isArray(o)||(o=[o]),o.map(l=>typeof l=="string"?y.default(i,l):l(i,c,e))):(n!=="$key"&&p.isObject(i)&&"$value"in i&&(i=i.$value),[p.isObject(i)?y.default(i,n):i])},s=u(function(i,c){if(t)return t(i.value,c.value);for(let l=0,a=i.key.length;l<a;l++){if(i.key[l]<c.key[l])return-1;if(i.key[l]>c.key[l])return 1}return 0},"compare");return e.map((i,c)=>({value:i,index:c,key:f?f(i,c):null})).sort((i,c)=>{let l=s(i,c);return l||(l=i.index-c.index),l*+r}).map(i=>i.value)},"orderBy"),k=u(function(e,n){let r=null;return e.columns.forEach(t=>{t.id===n&&(r=t)}),r},"getColumnById"),j=u(function(e,n){let r=null;for(let t=0;t<e.columns.length;t++){const o=e.columns[t];if(o.columnKey===n){r=o;break}}return r||R.throwError("ElTable",`No column matching with column-key: ${n}`),r},"getColumnByKey"),B=u(function(e,n,r){const t=(n.className||"").match(new RegExp(`${r}-table_[^\\s]+`,"gm"));return t?k(e,t[0]):null},"getColumnByCell"),E=u((e,n)=>{if(!e)throw new Error("Row is required when get row identity");if(typeof n=="string"){if(!n.includes("."))return`${e[n]}`;const r=n.split(".");let t=e;for(const o of r)t=t[o];return`${t}`}else if(typeof n=="function")return n.call(null,e)},"getRowIdentity"),H=u(function(e,n){const r={};return(e||[]).forEach((t,o)=>{r[E(t,n)]={row:t,index:o}}),r},"getKeysMap");function W(e,n){const r={};let t;for(t in e)r[t]=e[t];for(t in n)if(p.hasOwn(n,t)){const o=n[t];typeof o<"u"&&(r[t]=o)}return r}u(W,"mergeOptions");function O(e){return e===""||e!==void 0&&(e=Number.parseInt(e,10),Number.isNaN(e)&&(e="")),e}u(O,"parseWidth");function D(e){return e===""||e!==void 0&&(e=O(e),Number.isNaN(e)&&(e=80)),e}u(D,"parseMinWidth");function G(e){return typeof e=="number"?e:typeof e=="string"?/^\d+(?:px)?$/.test(e)?Number.parseInt(e,10):e:null}u(G,"parseHeight");function J(...e){return e.length===0?n=>n:e.length===1?e[0]:e.reduce((n,r)=>(...t)=>n(r(...t)))}u(J,"compose");function $(e,n,r,t,o,f){let s=f??0,i=!1;const c=e.indexOf(n),l=c!==-1,a=o==null?void 0:o.call(null,n,f),g=u(d=>{d==="add"?e.push(n):e.splice(c,1),i=!0},"toggleStatus"),x=u(d=>{let h=0;const m=(t==null?void 0:t.children)&&d[t.children];return m&&p.isArray(m)&&(h+=m.length,m.forEach(q=>{h+=x(q)})),h},"getChildrenCount");return(!o||a)&&(_.isBoolean(r)?r&&!l?g("add"):!r&&l&&g("remove"):g(l?"remove":"add")),!(t!=null&&t.checkStrictly)&&(t!=null&&t.children)&&p.isArray(n[t.children])&&n[t.children].forEach(d=>{$(e,d,r??!l,t,o,s+1),s+=x(d)+1}),i}u($,"toggleRowStatus");function Q(e,n,r="children",t="hasChildren"){const o=u(s=>!(Array.isArray(s)&&s.length),"isNil");function f(s,i,c){n(s,i,c),i.forEach(l=>{if(l[t]){n(l,null,c+1);return}const a=l[r];o(a)||f(l,a,c+1)})}u(f,"_walker"),e.forEach(s=>{if(s[t]){n(s,null,0);return}const i=s[r];o(i)||f(s,i,0)})}u(Q,"walkTreeNode");exports.removePopper=null;function T(e,n,r,t){if((exports.removePopper==null?void 0:exports.removePopper.trigger)===r)return;exports.removePopper==null||exports.removePopper();const o=t==null?void 0:t.refs.tableWrapper,f=o==null?void 0:o.dataset.prefix,s={strategy:"fixed",...e.popperOptions},i=v.createVNode(P.ElTooltip,{content:n,virtualTriggering:!0,virtualRef:r,appendTo:o,placement:"top",transition:"none",offset:0,hideAfter:0,...e,popperOptions:s,onHide:u(()=>{exports.removePopper==null||exports.removePopper()},"onHide")});i.appContext={...t.appContext,...t};const c=document.createElement("div");v.render(i,c),i.component.exposed.onOpen();const l=o==null?void 0:o.querySelector(`.${f}-scrollbar__wrap`);exports.removePopper=()=>{v.render(null,c),l==null||l.removeEventListener("scroll",exports.removePopper),exports.removePopper=null},exports.removePopper.trigger=r,l==null||l.addEventListener("scroll",exports.removePopper)}u(T,"createTablePopper");function S(e){return e.children?A.default(e.children,S):[e]}u(S,"getCurrentColumns");function N(e,n){return e+n.colSpan}u(N,"getColSpan");const C=u((e,n,r,t)=>{let o=0,f=e;const s=r.states.columns.value;if(t){const c=S(t[e]);o=s.slice(0,s.indexOf(c[0])).reduce(N,0),f=o+c.reduce(N,0)-1}else o=e;let i;switch(n){case"left":f<r.states.fixedLeafColumnsLength.value&&(i="left");break;case"right":o>=s.length-r.states.rightFixedLeafColumnsLength.value&&(i="right");break;default:f<r.states.fixedLeafColumnsLength.value?i="left":o>=s.length-r.states.rightFixedLeafColumnsLength.value&&(i="right")}return i?{direction:i,start:o,after:f}:{}},"isFixedColumn"),U=u((e,n,r,t,o,f=0)=>{const s=[],{direction:i,start:c,after:l}=C(n,r,t,o);if(i){const a=i==="left";s.push(`${e}-fixed-column--${i}`),a&&l+f===t.states.fixedLeafColumnsLength.value-1?s.push("is-last-column"):!a&&c-f===t.states.columns.value.length-t.states.rightFixedLeafColumnsLength.value&&s.push("is-first-column")}return s},"getFixedColumnsClass");function L(e,n){return e+(n.realWidth===null||Number.isNaN(n.realWidth)?Number(n.width):n.realWidth)}u(L,"getOffset");const X=u((e,n,r,t)=>{const{direction:o,start:f=0,after:s=0}=C(e,n,r,t);if(!o)return;const i={},c=o==="left",l=r.states.columns.value;return c?i.left=l.slice(0,f).reduce(L,0):i.right=l.slice(s+1).reverse().reduce(L,0),i},"getFixedColumnOffset"),Y=u((e,n)=>{e&&(Number.isNaN(e[n])||(e[n]=`${e[n]}px`))},"ensurePosition");exports.compose=J;exports.createTablePopper=T;exports.ensurePosition=Y;exports.getCell=I;exports.getColumnByCell=B;exports.getColumnById=k;exports.getColumnByKey=j;exports.getFixedColumnOffset=X;exports.getFixedColumnsClass=U;exports.getKeysMap=H;exports.getRowIdentity=E;exports.isFixedColumn=C;exports.mergeOptions=W;exports.orderBy=M;exports.parseHeight=G;exports.parseMinWidth=D;exports.parseWidth=O;exports.toggleRowStatus=$;exports.walkTreeNode=Q;
