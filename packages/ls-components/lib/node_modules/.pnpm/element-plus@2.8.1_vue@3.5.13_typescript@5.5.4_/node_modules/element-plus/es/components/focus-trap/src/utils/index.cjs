"use strict";var y=Object.defineProperty;var o=(e,t)=>y(e,"name",{value:t,configurable:!0});Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const c=require("vue"),E=require("../tokens/index.cjs"),l=c.ref(),a=c.ref(0),f=c.ref(0);let u=0;const p=o(e=>{const t=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:o(n=>{const r=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||r?NodeFilter.FILTER_SKIP:n.tabIndex>=0||n===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP},"acceptNode")});for(;s.nextNode();)t.push(s.currentNode);return t},"obtainAllFocusableElements"),d=o((e,t)=>{for(const s of e)if(!b(s,t))return s},"getVisibleElement"),b=o((e,t)=>{if(process.env.NODE_ENV==="test")return!1;if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1},"isHidden"),S=o(e=>{const t=p(e),s=d(t,e),n=d(t.reverse(),e);return[s,n]},"getEdges"),T=o(e=>e instanceof HTMLInputElement&&"select"in e,"isSelectable"),w=o((e,t)=>{if(e&&e.focus){const s=document.activeElement;e.focus({preventScroll:!0}),f.value=window.performance.now(),e!==s&&T(e)&&t&&e.select()}},"tryFocus");function m(e,t){const s=[...e],n=e.indexOf(t);return n!==-1&&s.splice(n,1),s}o(m,"removeFromStack");const N=o(()=>{let e=[];return{push:o(n=>{const r=e[0];r&&n!==r&&r.pause(),e=m(e,n),e.unshift(n)},"push"),remove:o(n=>{var r,v;e=m(e,n),(v=(r=e[0])==null?void 0:r.resume)==null||v.call(r)},"remove")}},"createFocusableStack"),L=o((e,t=!1)=>{const s=document.activeElement;for(const n of e)if(w(n,t),document.activeElement!==s)return},"focusFirstDescendant"),g=N(),h=o(()=>a.value>f.value,"isFocusCausedByUserEvent"),i=o(()=>{l.value="pointer",a.value=window.performance.now()},"notifyFocusReasonPointer"),F=o(()=>{l.value="keyboard",a.value=window.performance.now()},"notifyFocusReasonKeydown"),k=o(()=>(c.onMounted(()=>{u===0&&(document.addEventListener("mousedown",i),document.addEventListener("touchstart",i),document.addEventListener("keydown",F)),u++}),c.onBeforeUnmount(()=>{u--,u<=0&&(document.removeEventListener("mousedown",i),document.removeEventListener("touchstart",i),document.removeEventListener("keydown",F))}),{focusReason:l,lastUserFocusTimestamp:a,lastAutomatedFocusTimestamp:f}),"useFocusReason"),O=o(e=>new CustomEvent(E.FOCUSOUT_PREVENTED,{...E.FOCUSOUT_PREVENTED_OPTS,detail:e}),"createFocusOutPreventedEvent");exports.createFocusOutPreventedEvent=O;exports.focusFirstDescendant=L;exports.focusableStack=g;exports.getEdges=S;exports.getVisibleElement=d;exports.isFocusCausedByUserEvent=h;exports.isHidden=b;exports.obtainAllFocusableElements=p;exports.tryFocus=w;exports.useFocusReason=k;
