"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),w=require("../constants/index.cjs"),p=require("../upload-list2/index.cjs"),c=require("../upload-content2/index.cjs"),R=require("../use-handlers/index.cjs"),b=require("../upload/index.cjs"),P=require("../../../../_virtual/plugin-vue_export-helper/index.cjs"),V=require("../../../form/src/hooks/use-form-common-props/index.cjs"),B=e.defineComponent({name:"ElUpload"}),N=e.defineComponent({...B,props:b.uploadProps,setup(m,{expose:v}){const r=m,u=V.useFormDisabled(),n=e.shallowRef(),{abort:g,submit:h,clearFiles:C,uploadFiles:t,handleStart:d,handleError:k,handleRemove:s,handleSuccess:y,handleProgress:$,revokeFileObjectURL:S}=R.useHandlers(r,n),l=e.computed(()=>r.listType==="picture-card"),f=e.computed(()=>({...r,fileList:t.value,onStart:d,onProgress:$,onSuccess:y,onError:k,onRemove:s}));return e.onBeforeUnmount(()=>{t.value.forEach(S)}),e.provide(w.uploadContextKey,{accept:e.toRef(r,"accept")}),v({abort:g,submit:h,clearFiles:C,handleStart:d,handleRemove:s}),(o,F)=>(e.openBlock(),e.createElementBlock("div",null,[e.unref(l)&&o.showFileList?(e.openBlock(),e.createBlock(p.default,{key:0,disabled:e.unref(u),"list-type":o.listType,files:e.unref(t),crossorigin:o.crossorigin,"handle-preview":o.onPreview,onRemove:e.unref(s)},e.createSlots({append:e.withCtx(()=>[e.createVNode(c.default,e.mergeProps({ref_key:"uploadRef",ref:n},e.unref(f)),{default:e.withCtx(()=>[o.$slots.trigger?e.renderSlot(o.$slots,"trigger",{key:0}):e.createCommentVNode("v-if",!0),!o.$slots.trigger&&o.$slots.default?e.renderSlot(o.$slots,"default",{key:1}):e.createCommentVNode("v-if",!0)]),_:3},16)]),_:2},[o.$slots.file?{name:"default",fn:e.withCtx(({file:i,index:a})=>[e.renderSlot(o.$slots,"file",{file:i,index:a})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):e.createCommentVNode("v-if",!0),!e.unref(l)||e.unref(l)&&!o.showFileList?(e.openBlock(),e.createBlock(c.default,e.mergeProps({key:1,ref_key:"uploadRef",ref:n},e.unref(f)),{default:e.withCtx(()=>[o.$slots.trigger?e.renderSlot(o.$slots,"trigger",{key:0}):e.createCommentVNode("v-if",!0),!o.$slots.trigger&&o.$slots.default?e.renderSlot(o.$slots,"default",{key:1}):e.createCommentVNode("v-if",!0)]),_:3},16)):e.createCommentVNode("v-if",!0),o.$slots.trigger?e.renderSlot(o.$slots,"default",{key:2}):e.createCommentVNode("v-if",!0),e.renderSlot(o.$slots,"tip"),!e.unref(l)&&o.showFileList?(e.openBlock(),e.createBlock(p.default,{key:3,disabled:e.unref(u),"list-type":o.listType,files:e.unref(t),crossorigin:o.crossorigin,"handle-preview":o.onPreview,onRemove:e.unref(s)},e.createSlots({_:2},[o.$slots.file?{name:"default",fn:e.withCtx(({file:i,index:a})=>[e.renderSlot(o.$slots,"file",{file:i,index:a})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):e.createCommentVNode("v-if",!0)]))}});var q=P.default(N,[["__file","upload.vue"]]);exports.default=q;
