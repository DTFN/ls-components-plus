"use strict";var x=Object.defineProperty;var d=(i,o)=>x(i,"name",{value:o,configurable:!0});Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),w=require("../../../../../../../../@vueuse_core@9.13.0_vue@3.5.13_typescript@5.5.4_/node_modules/@vueuse/core/index/index.cjs"),b=require("../constants/index.cjs"),N=require("../../../../utils/error/index.cjs"),_=require("../../../../hooks/use-namespace/index/index.cjs"),h="ElLabelWrap";var E=e.defineComponent({name:h,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(i,{slots:o}){const n=e.inject(b.formContextKey,void 0),a=e.inject(b.formItemContextKey);a||N.throwError(h,"usage: <el-form-item><label-wrap /></el-form-item>");const p=_.useNamespace("form"),r=e.ref(),u=e.ref(0),W=d(()=>{var t;if((t=r.value)!=null&&t.firstElementChild){const l=window.getComputedStyle(r.value.firstElementChild).width;return Math.ceil(Number.parseFloat(l))}else return 0},"getLabelWidth"),m=d((t="update")=>{e.nextTick(()=>{o.default&&i.isAutoWidth&&(t==="update"?u.value=W():t==="remove"&&(n==null||n.deregisterLabelWidth(u.value)))})},"updateLabelWidth"),s=d(()=>m("update"),"updateLabelWidthFn");return e.onMounted(()=>{s()}),e.onBeforeUnmount(()=>{m("remove")}),e.onUpdated(()=>s()),e.watch(u,(t,l)=>{i.updateAll&&(n==null||n.registerLabelWidth(t,l))}),w.useResizeObserver(e.computed(()=>{var t,l;return(l=(t=r.value)==null?void 0:t.firstElementChild)!=null?l:null}),s),()=>{var t,l;if(!o)return null;const{isAutoWidth:g}=i;if(g){const c=n==null?void 0:n.autoLabelWidth,L=a==null?void 0:a.hasLabel,f={};if(L&&c&&c!=="auto"){const v=Math.max(0,Number.parseInt(c,10)-u.value),C=(a.labelPosition||n.labelPosition)==="left"?"marginRight":"marginLeft";v&&(f[C]=`${v}px`)}return e.createVNode("div",{ref:r,class:[p.be("item","label-wrap")],style:f},[(t=o.default)==null?void 0:t.call(o)])}else return e.createVNode(e.Fragment,{ref:r},[(l=o.default)==null?void 0:l.call(o)])}}});exports.default=E;
