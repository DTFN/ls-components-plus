"use strict";var M=Object.defineProperty;var v=(f,p)=>M(f,"name",{value:p,configurable:!0});Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),I=require("../../../../../../../../@vue_shared@3.5.13/node_modules/@vue/shared/dist/shared.esm-bundler/index.cjs"),c=require("../../../icon/index/index.cjs"),O=require("@element-plus/icons-vue"),b=require("../switch/index.cjs"),F=require("../../../../_virtual/plugin-vue_export-helper/index.cjs"),N=require("../../../form/src/hooks/use-form-item/index.cjs"),w=require("../../../form/src/hooks/use-form-common-props/index.cjs"),K=require("../../../../hooks/use-namespace/index/index.cjs"),L=require("../../../../utils/dom/style/index.cjs"),r=require("../../../../constants/event/index.cjs"),h=require("../../../../utils/error/index.cjs"),U=require("../../../../utils/types/index.cjs"),C="ElSwitch",$=e.defineComponent({name:C}),H=e.defineComponent({...$,props:b.switchProps,emits:b.switchEmits,setup(f,{expose:p,emit:l}){const a=f,{formItem:u}=N.useFormItem(),T=w.useFormSize(),o=K.useNamespace("switch"),{inputId:g}=N.useFormItemInputId(a,{formItemContext:u}),d=w.useFormDisabled(e.computed(()=>a.loading)),E=e.ref(a.modelValue!==!1),s=e.ref(),P=e.ref(),D=e.computed(()=>[o.b(),o.m(T.value),o.is("disabled",d.value),o.is("checked",t.value)]),q=e.computed(()=>[o.e("label"),o.em("label","left"),o.is("active",!t.value)]),z=e.computed(()=>[o.e("label"),o.em("label","right"),o.is("active",t.value)]),S=e.computed(()=>({width:L.addUnit(a.width)}));e.watch(()=>a.modelValue,()=>{E.value=!0});const B=e.computed(()=>E.value?a.modelValue:!1),t=e.computed(()=>B.value===a.activeValue);[a.activeValue,a.inactiveValue].includes(B.value)||(l(r.UPDATE_MODEL_EVENT,a.inactiveValue),l(r.CHANGE_EVENT,a.inactiveValue),l(r.INPUT_EVENT,a.inactiveValue)),e.watch(t,n=>{var i;s.value.checked=n,a.validateEvent&&((i=u==null?void 0:u.validate)==null||i.call(u,"change").catch(y=>h.debugWarn(y)))});const m=v(()=>{const n=t.value?a.inactiveValue:a.activeValue;l(r.UPDATE_MODEL_EVENT,n),l(r.CHANGE_EVENT,n),l(r.INPUT_EVENT,n),e.nextTick(()=>{s.value.checked=t.value})},"handleChange"),V=v(()=>{if(d.value)return;const{beforeChange:n}=a;if(!n){m();return}const i=n();[I.isPromise(i),U.isBoolean(i)].includes(!0)||h.throwError(C,"beforeChange must return type `Promise<boolean>` or `boolean`"),I.isPromise(i)?i.then(k=>{k&&m()}).catch(k=>{h.debugWarn(C,`some error occurred: ${k}`)}):i&&m()},"switchValue"),A=v(()=>{var n,i;(i=(n=s.value)==null?void 0:n.focus)==null||i.call(n)},"focus");return e.onMounted(()=>{s.value.checked=t.value}),p({focus:A,checked:t}),(n,i)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(e.unref(D)),onClick:e.withModifiers(V,["prevent"])},[e.createElementVNode("input",{id:e.unref(g),ref_key:"input",ref:s,class:e.normalizeClass(e.unref(o).e("input")),type:"checkbox",role:"switch","aria-checked":e.unref(t),"aria-disabled":e.unref(d),"aria-label":n.ariaLabel,name:n.name,"true-value":n.activeValue,"false-value":n.inactiveValue,disabled:e.unref(d),tabindex:n.tabindex,onChange:m,onKeydown:e.withKeys(V,["enter"])},null,42,["id","aria-checked","aria-disabled","aria-label","name","true-value","false-value","disabled","tabindex","onKeydown"]),!n.inlinePrompt&&(n.inactiveIcon||n.inactiveText)?(e.openBlock(),e.createElementBlock("span",{key:0,class:e.normalizeClass(e.unref(q))},[n.inactiveIcon?(e.openBlock(),e.createBlock(e.unref(c.ElIcon),{key:0},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.inactiveIcon)))]),_:1})):e.createCommentVNode("v-if",!0),!n.inactiveIcon&&n.inactiveText?(e.openBlock(),e.createElementBlock("span",{key:1,"aria-hidden":e.unref(t)},e.toDisplayString(n.inactiveText),9,["aria-hidden"])):e.createCommentVNode("v-if",!0)],2)):e.createCommentVNode("v-if",!0),e.createElementVNode("span",{ref_key:"core",ref:P,class:e.normalizeClass(e.unref(o).e("core")),style:e.normalizeStyle(e.unref(S))},[n.inlinePrompt?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(e.unref(o).e("inner"))},[n.activeIcon||n.inactiveIcon?(e.openBlock(),e.createBlock(e.unref(c.ElIcon),{key:0,class:e.normalizeClass(e.unref(o).is("icon"))},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(t)?n.activeIcon:n.inactiveIcon)))]),_:1},8,["class"])):n.activeText||n.inactiveText?(e.openBlock(),e.createElementBlock("span",{key:1,class:e.normalizeClass(e.unref(o).is("text")),"aria-hidden":!e.unref(t)},e.toDisplayString(e.unref(t)?n.activeText:n.inactiveText),11,["aria-hidden"])):e.createCommentVNode("v-if",!0)],2)):e.createCommentVNode("v-if",!0),e.createElementVNode("div",{class:e.normalizeClass(e.unref(o).e("action"))},[n.loading?(e.openBlock(),e.createBlock(e.unref(c.ElIcon),{key:0,class:e.normalizeClass(e.unref(o).is("loading"))},{default:e.withCtx(()=>[e.createVNode(e.unref(O.Loading))]),_:1},8,["class"])):e.unref(t)?e.renderSlot(n.$slots,"active-action",{key:1},()=>[n.activeActionIcon?(e.openBlock(),e.createBlock(e.unref(c.ElIcon),{key:0},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.activeActionIcon)))]),_:1})):e.createCommentVNode("v-if",!0)]):e.unref(t)?e.createCommentVNode("v-if",!0):e.renderSlot(n.$slots,"inactive-action",{key:2},()=>[n.inactiveActionIcon?(e.openBlock(),e.createBlock(e.unref(c.ElIcon),{key:0},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.inactiveActionIcon)))]),_:1})):e.createCommentVNode("v-if",!0)])],2)],6),!n.inlinePrompt&&(n.activeIcon||n.activeText)?(e.openBlock(),e.createElementBlock("span",{key:1,class:e.normalizeClass(e.unref(z))},[n.activeIcon?(e.openBlock(),e.createBlock(e.unref(c.ElIcon),{key:0},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.activeIcon)))]),_:1})):e.createCommentVNode("v-if",!0),!n.activeIcon&&n.activeText?(e.openBlock(),e.createElementBlock("span",{key:1,"aria-hidden":!e.unref(t)},e.toDisplayString(n.activeText),9,["aria-hidden"])):e.createCommentVNode("v-if",!0)],2)):e.createCommentVNode("v-if",!0)],10,["onClick"]))}});var G=F.default(H,[["__file","switch.vue"]]);exports.default=G;
