"use strict";var S=Object.defineProperty;var i=(a,s)=>S(a,"name",{value:s,configurable:!0});Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const n=require("vue"),v=require("../../config/index.cjs"),b=require("../../util/index.cjs"),T=require("../../../../../hooks/use-namespace/index/index.cjs"),q=require("../../../../../utils/error/index.cjs");function D(a,s,C){const u=n.getCurrentInstance(),W=n.ref(""),x=n.ref(!1),o=n.ref(),m=n.ref(),y=T.useNamespace("table");n.watchEffect(()=>{o.value=a.align?`is-${a.align}`:null,o.value}),n.watchEffect(()=>{m.value=a.headerAlign?`is-${a.headerAlign}`:o.value,m.value});const w=n.computed(()=>{let e=u.vnode.vParent||u.parent;for(;e&&!e.tableId&&!e.columnId;)e=e.vnode.vParent||e.parent;return e}),I=n.computed(()=>{const{store:e}=u.parent;if(!e)return!1;const{treeData:r}=e.states,t=r.value;return t&&Object.keys(t).length>0}),g=n.ref(b.parseWidth(a.width)),p=n.ref(b.parseMinWidth(a.minWidth)),P=i(e=>(g.value&&(e.width=g.value),p.value&&(e.minWidth=p.value),!g.value&&p.value&&(e.width=void 0),e.minWidth||(e.minWidth=80),e.realWidth=Number(e.width===void 0?e.minWidth:e.width),e),"setColumnWidth"),A=i(e=>{const r=e.type,t=v.cellForced[r]||{};Object.keys(t).forEach(d=>{const c=t[d];d!=="className"&&c!==void 0&&(e[d]=c)});const l=v.getDefaultClassName(r);if(l){const d=`${n.unref(y.namespace)}-${l}`;e.className=e.className?`${e.className} ${d}`:d}return e},"setColumnForcedProps"),E=i(e=>{Array.isArray(e)?e.forEach(t=>r(t)):r(e);function r(t){var l;((l=t==null?void 0:t.type)==null?void 0:l.name)==="ElTableColumn"&&(t.vParent=u)}i(r,"check")},"checkSubColumn");return{columnId:W,realAlign:o,isSubColumn:x,realHeaderAlign:m,columnOrTableParent:w,setColumnWidth:P,setColumnForcedProps:A,setColumnRenders:i(e=>{a.renderHeader?q.debugWarn("TableColumn","Comparing to render-header, scoped-slot header is easier to use. We recommend users to use scoped-slot header."):e.type!=="selection"&&(e.renderHeader=t=>(u.columnConfig.value.label,n.renderSlot(s,"header",t,()=>[e.label]))),s["filter-icon"]&&(e.renderFilterIcon=t=>n.renderSlot(s,"filter-icon",t));let r=e.renderCell;return e.type==="expand"?(e.renderCell=t=>n.h("div",{class:"cell"},[r(t)]),C.value.renderExpanded=t=>s.default?s.default(t):s.default):(r=r||v.defaultRenderCell,e.renderCell=t=>{let l=null;if(s.default){const h=s.default(t);l=h.some($=>$.type!==n.Comment)?h:r(t)}else l=r(t);const{columns:d}=C.value.store.states,c=d.value.findIndex(h=>h.type==="default"),N=I.value&&t.cellIndex===c,O=v.treeCellPrefix(t,N),f={class:"cell",style:{}};return e.showOverflowTooltip&&(f.class=`${f.class} ${n.unref(y.namespace)}-tooltip`,f.style={width:`${(t.column.realWidth||Number(t.column.width))-1}px`}),E(l),n.h("div",f,[O,l])}),e},"setColumnRenders"),getPropsData:i((...e)=>e.reduce((r,t)=>(Array.isArray(t)&&t.forEach(l=>{r[l]=a[l]}),r),{}),"getPropsData"),getColumnElIndex:i((e,r)=>Array.prototype.indexOf.call(e,r),"getColumnElIndex"),updateColumnOrder:i(()=>{C.value.store.commit("updateColumnOrder",u.columnConfig.value)},"updateColumnOrder")}}i(D,"useRender");exports.default=D;
