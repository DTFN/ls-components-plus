"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),E=require("../../../../../../../../@vueuse_core@9.13.0_vue@3.5.13_typescript@5.5.4_/node_modules/@vueuse/core/index/index.cjs"),_=require("../constants/index.cjs"),b=require("../trigger/index.cjs"),C=require("../../../../_virtual/plugin-vue_export-helper/index.cjs"),y=require("../../../../hooks/use-forward-ref/index/index.cjs"),c=require("../../../../utils/types/index.cjs"),q=require("../../../slot/src/only-child/index.cjs"),T=require("../../../../../../../../lodash-es@4.17.21/node_modules/lodash-es/isNil/index.cjs"),w=e.defineComponent({name:"ElPopperTrigger",inheritAttrs:!1}),P=e.defineComponent({...w,props:b.popperTriggerProps,setup(g,{expose:h}){const i=g,{role:s,triggerRef:a}=e.inject(_.POPPER_INJECTION_KEY,void 0);y.useForwardRef(a);const p=e.computed(()=>l.value?i.id:void 0),f=e.computed(()=>{if(s&&s.value==="tooltip")return i.open&&i.id?i.id:void 0}),l=e.computed(()=>{if(s&&s.value!=="tooltip")return s.value}),v=e.computed(()=>l.value?`${i.open}`:void 0);let n;const m=["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"];return e.onMounted(()=>{e.watch(()=>i.virtualRef,r=>{r&&(a.value=E.unrefElement(r))},{immediate:!0}),e.watch(a,(r,t)=>{n==null||n(),n=void 0,c.isElement(r)&&(m.forEach(o=>{var d;const u=i[o];u&&(r.addEventListener(o.slice(2).toLowerCase(),u),(d=t==null?void 0:t.removeEventListener)==null||d.call(t,o.slice(2).toLowerCase(),u))}),n=e.watch([p,f,l,v],o=>{["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach((d,u)=>{T.default(o[u])?r.removeAttribute(d):r.setAttribute(d,o[u])})},{immediate:!0})),c.isElement(t)&&["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach(o=>t.removeAttribute(o))},{immediate:!0})}),e.onBeforeUnmount(()=>{if(n==null||n(),n=void 0,a.value&&c.isElement(a.value)){const r=a.value;m.forEach(t=>{const o=i[t];o&&r.removeEventListener(t.slice(2).toLowerCase(),o)}),a.value=void 0}}),h({triggerRef:a}),(r,t)=>r.virtualTriggering?e.createCommentVNode("v-if",!0):(e.openBlock(),e.createBlock(e.unref(q.OnlyChild),e.mergeProps({key:0},r.$attrs,{"aria-controls":e.unref(p),"aria-describedby":e.unref(f),"aria-expanded":e.unref(v),"aria-haspopup":e.unref(l)}),{default:e.withCtx(()=>[e.renderSlot(r.$slots,"default")]),_:3},16,["aria-controls","aria-describedby","aria-expanded","aria-haspopup"]))}});var x=C.default(P,[["__file","trigger.vue"]]);exports.default=x;
