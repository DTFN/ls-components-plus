"use strict";var G=Object.defineProperty;var o=(u,s)=>G(u,"name",{value:s,configurable:!0});Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),f=require("../../../../../../../../../dayjs@1.11.13/node_modules/dayjs/dayjs.min/index.cjs"),L=require("../../props/panel-time-picker/index.cjs"),F=require("../../composables/use-time-panel/index.cjs"),C=require("../../composables/use-time-picker/index.cjs"),J=require("../basic-time-spinner/index.cjs"),Q=require("../../../../../_virtual/plugin-vue_export-helper/index.cjs"),W=require("../../../../../hooks/use-namespace/index/index.cjs"),X=require("../../../../../hooks/use-locale/index/index.cjs"),Y=require("../../../../../utils/types/index.cjs"),Z=require("../../../../../constants/aria/index.cjs"),ee=e.defineComponent({__name:"panel-time-pick",props:L.panelTimePickerProps,emits:["pick","select-range","set-picker-option"],setup(u,{emit:s}){const a=u,T=e.inject("EP_PICKER_BASE"),{arrowControl:_,disabledHours:m,disabledMinutes:b,disabledSeconds:g,defaultValue:P}=T.props,{getAvailableHours:q,getAvailableMinutes:w,getAvailableSeconds:E}=C.buildAvailableTimeSlotGetter(m,b,g),l=W.useNamespace("time"),{t:k,lang:d}=X.useLocale(),v=e.ref([0,2]),y=C.useOldValue(a),A=e.computed(()=>Y.isUndefined(a.actualVisible)?`${l.namespace.value}-zoom-in-top`:""),i=e.computed(()=>a.format.includes("ss")),R=e.computed(()=>a.format.includes("A")?"A":a.format.includes("a")?"a":""),D=o(n=>{const t=f.default(n).locale(d.value),r=p(t);return t.isSame(r)},"isValidValue"),N=o(()=>{s("pick",y.value,!1)},"handleCancel"),O=o((n=!1,t=!1)=>{t||s("pick",a.parsedValue,n)},"handleConfirm"),z=o(n=>{if(!a.visible)return;const t=p(n).millisecond(0);s("pick",t,!0)},"handleChange"),B=o((n,t)=>{s("select-range",n,t),v.value=[n,t]},"setSelectionRange"),x=o(n=>{const t=[0,3].concat(i.value?[6]:[]),r=["hours","minutes"].concat(i.value?["seconds"]:[]),c=(t.indexOf(v.value[0])+n+t.length)%t.length;V.start_emitSelectRange(r[c])},"changeSelectionRange"),M=o(n=>{const t=n.code,{left:r,right:h,up:c,down:$}=Z.EVENT_CODE;if([r,h].includes(t)){x(t===r?-1:1),n.preventDefault();return}if([c,$].includes(t)){const S=t===c?-1:1;V.start_scrollDown(S),n.preventDefault();return}},"handleKeydown"),{timePickerOptions:V,onSetOption:I,getAvailableTime:j}=F.useTimePanel({getAvailableHours:q,getAvailableMinutes:w,getAvailableSeconds:E}),p=o(n=>j(n,a.datetimeRole||"",!0),"getRangeAvailableTime"),H=o(n=>n?f.default(n,a.format).locale(d.value):null,"parseUserInput"),K=o(n=>n?n.format(a.format):null,"formatToString"),U=o(()=>f.default(P).locale(d.value),"getDefaultValue");return s("set-picker-option",["isValidValue",D]),s("set-picker-option",["formatToString",K]),s("set-picker-option",["parseUserInput",H]),s("set-picker-option",["handleKeydownInput",M]),s("set-picker-option",["getRangeAvailableTime",p]),s("set-picker-option",["getDefaultValue",U]),(n,t)=>(e.openBlock(),e.createBlock(e.Transition,{name:e.unref(A)},{default:e.withCtx(()=>[n.actualVisible||n.visible?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(e.unref(l).b("panel"))},[e.createElementVNode("div",{class:e.normalizeClass([e.unref(l).be("panel","content"),{"has-seconds":e.unref(i)}])},[e.createVNode(J.default,{ref:"spinner",role:n.datetimeRole||"start","arrow-control":e.unref(_),"show-seconds":e.unref(i),"am-pm-mode":e.unref(R),"spinner-date":n.parsedValue,"disabled-hours":e.unref(m),"disabled-minutes":e.unref(b),"disabled-seconds":e.unref(g),onChange:z,onSetOption:e.unref(I),onSelectRange:B},null,8,["role","arrow-control","show-seconds","am-pm-mode","spinner-date","disabled-hours","disabled-minutes","disabled-seconds","onSetOption"])],2),e.createElementVNode("div",{class:e.normalizeClass(e.unref(l).be("panel","footer"))},[e.createElementVNode("button",{type:"button",class:e.normalizeClass([e.unref(l).be("panel","btn"),"cancel"]),onClick:N},e.toDisplayString(e.unref(k)("el.datepicker.cancel")),3),e.createElementVNode("button",{type:"button",class:e.normalizeClass([e.unref(l).be("panel","btn"),"confirm"]),onClick:o(r=>O(),"onClick")},e.toDisplayString(e.unref(k)("el.datepicker.confirm")),11,["onClick"])],2)],2)):e.createCommentVNode("v-if",!0)]),_:1},8,["name"]))}});var ne=Q.default(ee,[["__file","panel-time-pick.vue"]]);exports.default=ne;
