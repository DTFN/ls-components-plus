"use strict";var _=Object.defineProperty;var n=(e,t)=>_(e,"name",{value:t,configurable:!0});Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const o=require("vue"),z=require("../../../../hooks/use-z-index/index/index.cjs"),T=require("../../../../hooks/use-id/index/index.cjs"),U=require("../../../config-provider/src/hooks/use-global-config/index.cjs"),V=require("../../../../hooks/use-namespace/index/index.cjs"),G=require("../../../../utils/dom/style/index.cjs"),N=require("../../../../constants/event/index.cjs"),Z=require("../../../../hooks/use-lockscreen/index/index.cjs"),j=require("../../../../../../../../lodash-es@4.17.21/node_modules/lodash-es/isUndefined/index.cjs"),x=require("../../../../../../../../@vueuse_shared@9.13.0_vue@3.5.13_typescript@5.5.4_/node_modules/@vueuse/shared/index/index.cjs"),B=n((e,t)=>{var C;const u=o.getCurrentInstance().emit,{nextZIndex:D}=z.useZIndex();let q="";const $=T.useId(),h=T.useId(),i=o.ref(!1),d=o.ref(!1),f=o.ref(!1),r=o.ref((C=e.zIndex)!=null?C:D());let c,a;const F=U.useGlobalConfig("namespace",V.defaultNamespace),O=o.computed(()=>{const l={},s=`--${F.value}-dialog`;return e.fullscreen||(e.top&&(l[`${s}-margin-top`]=e.top),e.width&&(l[`${s}-width`]=G.addUnit(e.width))),l}),g=o.computed(()=>e.alignCenter?{display:"flex"}:{});function E(){u("opened")}n(E,"afterEnter");function P(){u("closed"),u(N.UPDATE_MODEL_EVENT,!1),e.destroyOnClose&&(f.value=!1)}n(P,"afterLeave");function k(){u("close")}n(k,"beforeLeave");function I(){a==null||a(),c==null||c(),e.openDelay&&e.openDelay>0?{stop:c}=x.useTimeoutFn(()=>b(),e.openDelay):b()}n(I,"open");function v(){c==null||c(),a==null||a(),e.closeDelay&&e.closeDelay>0?{stop:a}=x.useTimeoutFn(()=>m(),e.closeDelay):m()}n(v,"close");function y(){function l(s){s||(d.value=!0,i.value=!1)}n(l,"hide"),e.beforeClose?e.beforeClose(l):v()}n(y,"handleClose");function w(){e.closeOnClickModal&&y()}n(w,"onModalClick");function b(){x.isClient&&(i.value=!0)}n(b,"doOpen");function m(){i.value=!1}n(m,"doClose");function A(){u("openAutoFocus")}n(A,"onOpenAutoFocus");function M(){u("closeAutoFocus")}n(M,"onCloseAutoFocus");function L(l){var s;((s=l.detail)==null?void 0:s.focusReason)==="pointer"&&l.preventDefault()}n(L,"onFocusoutPrevented"),e.lockScroll&&Z.useLockscreen(i);function S(){e.closeOnPressEscape&&y()}return n(S,"onCloseRequested"),o.watch(()=>e.modelValue,l=>{l?(d.value=!1,I(),f.value=!0,r.value=j.default(e.zIndex)?D():r.value++,o.nextTick(()=>{u("open"),t.value&&(t.value.scrollTop=0)})):i.value&&v()}),o.watch(()=>e.fullscreen,l=>{t.value&&(l?(q=t.value.style.transform,t.value.style.transform=""):t.value.style.transform=q)}),o.onMounted(()=>{e.modelValue&&(i.value=!0,f.value=!0,I())}),{afterEnter:E,afterLeave:P,beforeLeave:k,handleClose:y,onModalClick:w,close:v,doClose:m,onOpenAutoFocus:A,onCloseAutoFocus:M,onCloseRequested:S,onFocusoutPrevented:L,titleId:$,bodyId:h,closed:d,style:O,overlayDialogStyle:g,rendered:f,visible:i,zIndex:r}},"useDialog");exports.useDialog=B;
